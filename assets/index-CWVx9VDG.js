(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const R of document.querySelectorAll('link[rel="modulepreload"]'))B(R);new MutationObserver(R=>{for(const U of R)if(U.type==="childList")for(const ee of U.addedNodes)ee.tagName==="LINK"&&ee.rel==="modulepreload"&&B(ee)}).observe(document,{childList:!0,subtree:!0});function P(R){const U={};return R.integrity&&(U.integrity=R.integrity),R.referrerPolicy&&(U.referrerPolicy=R.referrerPolicy),R.crossOrigin==="use-credentials"?U.credentials="include":R.crossOrigin==="anonymous"?U.credentials="omit":U.credentials="same-origin",U}function B(R){if(R.ep)return;R.ep=!0;const U=P(R);fetch(R.href,U)}})();function Lf(w){if(w.__esModule)return w;var p=w.default;if(typeof p=="function"){var P=function B(){return this instanceof B?Reflect.construct(p,arguments,this.constructor):p.apply(this,arguments)};P.prototype=p.prototype}else P={};return Object.defineProperty(P,"__esModule",{value:!0}),Object.keys(w).forEach(function(B){var R=Object.getOwnPropertyDescriptor(w,B);Object.defineProperty(P,B,R.get?R:{enumerable:!0,get:function(){return w[B]}})}),P}var ra={exports:{}},Gi={},sa={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rc;function Ff(){if(rc)return Fe;rc=1;var w=Symbol.for("react.element"),p=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),ee=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),i=Symbol.iterator;function r(x){return x===null||typeof x!="object"?null:(x=i&&x[i]||x["@@iterator"],typeof x=="function"?x:null)}var n={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o=Object.assign,c={};function s(x,b,W){this.props=x,this.context=b,this.refs=c,this.updater=W||n}s.prototype.isReactComponent={},s.prototype.setState=function(x,b){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,b,"setState")},s.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function f(){}f.prototype=s.prototype;function m(x,b,W){this.props=x,this.context=b,this.refs=c,this.updater=W||n}var y=m.prototype=new f;y.constructor=m,o(y,s.prototype),y.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,O={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function A(x,b,W){var L,E={},I=null,z=null;if(b!=null)for(L in b.ref!==void 0&&(z=b.ref),b.key!==void 0&&(I=""+b.key),b)S.call(b,L)&&!D.hasOwnProperty(L)&&(E[L]=b[L]);var $=arguments.length-2;if($===1)E.children=W;else if(1<$){for(var Y=Array($),te=0;te<$;te++)Y[te]=arguments[te+2];E.children=Y}if(x&&x.defaultProps)for(L in $=x.defaultProps,$)E[L]===void 0&&(E[L]=$[L]);return{$$typeof:w,type:x,key:I,ref:z,props:E,_owner:O.current}}function V(x,b){return{$$typeof:w,type:x.type,key:b,ref:x.ref,props:x.props,_owner:x._owner}}function q(x){return typeof x=="object"&&x!==null&&x.$$typeof===w}function oe(x){var b={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(W){return b[W]})}var ge=/\/+/g;function me(x,b){return typeof x=="object"&&x!==null&&x.key!=null?oe(""+x.key):b.toString(36)}function he(x,b,W,L,E){var I=typeof x;(I==="undefined"||I==="boolean")&&(x=null);var z=!1;if(x===null)z=!0;else switch(I){case"string":case"number":z=!0;break;case"object":switch(x.$$typeof){case w:case p:z=!0}}if(z)return z=x,E=E(z),x=L===""?"."+me(z,0):L,_(E)?(W="",x!=null&&(W=x.replace(ge,"$&/")+"/"),he(E,b,W,"",function(te){return te})):E!=null&&(q(E)&&(E=V(E,W+(!E.key||z&&z.key===E.key?"":(""+E.key).replace(ge,"$&/")+"/")+x)),b.push(E)),1;if(z=0,L=L===""?".":L+":",_(x))for(var $=0;$<x.length;$++){I=x[$];var Y=L+me(I,$);z+=he(I,b,W,Y,E)}else if(Y=r(x),typeof Y=="function")for(x=Y.call(x),$=0;!(I=x.next()).done;)I=I.value,Y=L+me(I,$++),z+=he(I,b,W,Y,E);else if(I==="object")throw b=String(x),Error("Objects are not valid as a React child (found: "+(b==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":b)+"). If you meant to render a collection of children, use an array instead.");return z}function de(x,b,W){if(x==null)return x;var L=[],E=0;return he(x,L,"","",function(I){return b.call(W,I,E++)}),L}function Ce(x){if(x._status===-1){var b=x._result;b=b(),b.then(function(W){(x._status===0||x._status===-1)&&(x._status=1,x._result=W)},function(W){(x._status===0||x._status===-1)&&(x._status=2,x._result=W)}),x._status===-1&&(x._status=0,x._result=b)}if(x._status===1)return x._result.default;throw x._result}var _e={current:null},Z={transition:null},k={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:Z,ReactCurrentOwner:O};function M(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:de,forEach:function(x,b,W){de(x,function(){b.apply(this,arguments)},W)},count:function(x){var b=0;return de(x,function(){b++}),b},toArray:function(x){return de(x,function(b){return b})||[]},only:function(x){if(!q(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Fe.Component=s,Fe.Fragment=P,Fe.Profiler=R,Fe.PureComponent=m,Fe.StrictMode=B,Fe.Suspense=a,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,Fe.act=M,Fe.cloneElement=function(x,b,W){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var L=o({},x.props),E=x.key,I=x.ref,z=x._owner;if(b!=null){if(b.ref!==void 0&&(I=b.ref,z=O.current),b.key!==void 0&&(E=""+b.key),x.type&&x.type.defaultProps)var $=x.type.defaultProps;for(Y in b)S.call(b,Y)&&!D.hasOwnProperty(Y)&&(L[Y]=b[Y]===void 0&&$!==void 0?$[Y]:b[Y])}var Y=arguments.length-2;if(Y===1)L.children=W;else if(1<Y){$=Array(Y);for(var te=0;te<Y;te++)$[te]=arguments[te+2];L.children=$}return{$$typeof:w,type:x.type,key:E,ref:I,props:L,_owner:z}},Fe.createContext=function(x){return x={$$typeof:ee,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:U,_context:x},x.Consumer=x},Fe.createElement=A,Fe.createFactory=function(x){var b=A.bind(null,x);return b.type=x,b},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(x){return{$$typeof:g,render:x}},Fe.isValidElement=q,Fe.lazy=function(x){return{$$typeof:h,_payload:{_status:-1,_result:x},_init:Ce}},Fe.memo=function(x,b){return{$$typeof:u,type:x,compare:b===void 0?null:b}},Fe.startTransition=function(x){var b=Z.transition;Z.transition={};try{x()}finally{Z.transition=b}},Fe.unstable_act=M,Fe.useCallback=function(x,b){return _e.current.useCallback(x,b)},Fe.useContext=function(x){return _e.current.useContext(x)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(x){return _e.current.useDeferredValue(x)},Fe.useEffect=function(x,b){return _e.current.useEffect(x,b)},Fe.useId=function(){return _e.current.useId()},Fe.useImperativeHandle=function(x,b,W){return _e.current.useImperativeHandle(x,b,W)},Fe.useInsertionEffect=function(x,b){return _e.current.useInsertionEffect(x,b)},Fe.useLayoutEffect=function(x,b){return _e.current.useLayoutEffect(x,b)},Fe.useMemo=function(x,b){return _e.current.useMemo(x,b)},Fe.useReducer=function(x,b,W){return _e.current.useReducer(x,b,W)},Fe.useRef=function(x){return _e.current.useRef(x)},Fe.useState=function(x){return _e.current.useState(x)},Fe.useSyncExternalStore=function(x,b,W){return _e.current.useSyncExternalStore(x,b,W)},Fe.useTransition=function(){return _e.current.useTransition()},Fe.version="18.3.1",Fe}var sc;function pa(){return sc||(sc=1,sa.exports=Ff()),sa.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oc;function Af(){if(oc)return Gi;oc=1;var w=pa(),p=Symbol.for("react.element"),P=Symbol.for("react.fragment"),B=Object.prototype.hasOwnProperty,R=w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U={key:!0,ref:!0,__self:!0,__source:!0};function ee(g,a,u){var h,i={},r=null,n=null;u!==void 0&&(r=""+u),a.key!==void 0&&(r=""+a.key),a.ref!==void 0&&(n=a.ref);for(h in a)B.call(a,h)&&!U.hasOwnProperty(h)&&(i[h]=a[h]);if(g&&g.defaultProps)for(h in a=g.defaultProps,a)i[h]===void 0&&(i[h]=a[h]);return{$$typeof:p,type:g,key:r,ref:n,props:i,_owner:R.current}}return Gi.Fragment=P,Gi.jsx=ee,Gi.jsxs=ee,Gi}var ac;function Rf(){return ac||(ac=1,ra.exports=Af()),ra.exports}var Rn=Rf(),ls={},oa={exports:{}},vt={},aa={exports:{}},la={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lc;function If(){return lc||(lc=1,function(w){function p(Z,k){var M=Z.length;Z.push(k);e:for(;0<M;){var x=M-1>>>1,b=Z[x];if(0<R(b,k))Z[x]=k,Z[M]=b,M=x;else break e}}function P(Z){return Z.length===0?null:Z[0]}function B(Z){if(Z.length===0)return null;var k=Z[0],M=Z.pop();if(M!==k){Z[0]=M;e:for(var x=0,b=Z.length,W=b>>>1;x<W;){var L=2*(x+1)-1,E=Z[L],I=L+1,z=Z[I];if(0>R(E,M))I<b&&0>R(z,E)?(Z[x]=z,Z[I]=M,x=I):(Z[x]=E,Z[L]=M,x=L);else if(I<b&&0>R(z,M))Z[x]=z,Z[I]=M,x=I;else break e}}return k}function R(Z,k){var M=Z.sortIndex-k.sortIndex;return M!==0?M:Z.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var U=performance;w.unstable_now=function(){return U.now()}}else{var ee=Date,g=ee.now();w.unstable_now=function(){return ee.now()-g}}var a=[],u=[],h=1,i=null,r=3,n=!1,o=!1,c=!1,s=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(Z){for(var k=P(u);k!==null;){if(k.callback===null)B(u);else if(k.startTime<=Z)B(u),k.sortIndex=k.expirationTime,p(a,k);else break;k=P(u)}}function _(Z){if(c=!1,y(Z),!o)if(P(a)!==null)o=!0,Ce(S);else{var k=P(u);k!==null&&_e(_,k.startTime-Z)}}function S(Z,k){o=!1,c&&(c=!1,f(A),A=-1),n=!0;var M=r;try{for(y(k),i=P(a);i!==null&&(!(i.expirationTime>k)||Z&&!oe());){var x=i.callback;if(typeof x=="function"){i.callback=null,r=i.priorityLevel;var b=x(i.expirationTime<=k);k=w.unstable_now(),typeof b=="function"?i.callback=b:i===P(a)&&B(a),y(k)}else B(a);i=P(a)}if(i!==null)var W=!0;else{var L=P(u);L!==null&&_e(_,L.startTime-k),W=!1}return W}finally{i=null,r=M,n=!1}}var O=!1,D=null,A=-1,V=5,q=-1;function oe(){return!(w.unstable_now()-q<V)}function ge(){if(D!==null){var Z=w.unstable_now();q=Z;var k=!0;try{k=D(!0,Z)}finally{k?me():(O=!1,D=null)}}else O=!1}var me;if(typeof m=="function")me=function(){m(ge)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,de=he.port2;he.port1.onmessage=ge,me=function(){de.postMessage(null)}}else me=function(){s(ge,0)};function Ce(Z){D=Z,O||(O=!0,me())}function _e(Z,k){A=s(function(){Z(w.unstable_now())},k)}w.unstable_IdlePriority=5,w.unstable_ImmediatePriority=1,w.unstable_LowPriority=4,w.unstable_NormalPriority=3,w.unstable_Profiling=null,w.unstable_UserBlockingPriority=2,w.unstable_cancelCallback=function(Z){Z.callback=null},w.unstable_continueExecution=function(){o||n||(o=!0,Ce(S))},w.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<Z?Math.floor(1e3/Z):5},w.unstable_getCurrentPriorityLevel=function(){return r},w.unstable_getFirstCallbackNode=function(){return P(a)},w.unstable_next=function(Z){switch(r){case 1:case 2:case 3:var k=3;break;default:k=r}var M=r;r=k;try{return Z()}finally{r=M}},w.unstable_pauseExecution=function(){},w.unstable_requestPaint=function(){},w.unstable_runWithPriority=function(Z,k){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var M=r;r=Z;try{return k()}finally{r=M}},w.unstable_scheduleCallback=function(Z,k,M){var x=w.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?x+M:x):M=x,Z){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=M+b,Z={id:h++,callback:k,priorityLevel:Z,startTime:M,expirationTime:b,sortIndex:-1},M>x?(Z.sortIndex=M,p(u,Z),P(a)===null&&Z===P(u)&&(c?(f(A),A=-1):c=!0,_e(_,M-x))):(Z.sortIndex=b,p(a,Z),o||n||(o=!0,Ce(S))),Z},w.unstable_shouldYield=oe,w.unstable_wrapCallback=function(Z){var k=r;return function(){var M=r;r=k;try{return Z.apply(this,arguments)}finally{r=M}}}}(la)),la}var uc;function jf(){return uc||(uc=1,aa.exports=If()),aa.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cc;function Bf(){if(cc)return vt;cc=1;var w=pa(),p=jf();function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,l=1;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var B=new Set,R={};function U(e,t){ee(e,t),ee(e+"Capture",t)}function ee(e,t){for(R[e]=t,e=0;e<t.length;e++)B.add(t[e])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),a=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},i={};function r(e){return a.call(i,e)?!0:a.call(h,e)?!1:u.test(e)?i[e]=!0:(h[e]=!0,!1)}function n(e,t,l,d){if(l!==null&&l.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function o(e,t,l,d){if(t===null||typeof t>"u"||n(e,t,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function c(e,t,l,d,v,C,T){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=d,this.attributeNamespace=v,this.mustUseProperty=l,this.propertyName=e,this.type=t,this.sanitizeURL=C,this.removeEmptyString=T}var s={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){s[e]=new c(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];s[t]=new c(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){s[e]=new c(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){s[e]=new c(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){s[e]=new c(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){s[e]=new c(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){s[e]=new c(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){s[e]=new c(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){s[e]=new c(e,5,!1,e.toLowerCase(),null,!1,!1)});var f=/[\-:]([a-z])/g;function m(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(f,m);s[t]=new c(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(f,m);s[t]=new c(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(f,m);s[t]=new c(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){s[e]=new c(e,1,!1,e.toLowerCase(),null,!1,!1)}),s.xlinkHref=new c("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){s[e]=new c(e,1,!1,e.toLowerCase(),null,!0,!0)});function y(e,t,l,d){var v=s.hasOwnProperty(t)?s[t]:null;(v!==null?v.type!==0:d||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(o(t,l,v,d)&&(l=null),d||v===null?r(t)&&(l===null?e.removeAttribute(t):e.setAttribute(t,""+l)):v.mustUseProperty?e[v.propertyName]=l===null?v.type===3?!1:"":l:(t=v.attributeName,d=v.attributeNamespace,l===null?e.removeAttribute(t):(v=v.type,l=v===3||v===4&&l===!0?"":""+l,d?e.setAttributeNS(d,t,l):e.setAttribute(t,l))))}var _=w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),O=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),oe=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),Z=Symbol.iterator;function k(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var M=Object.assign,x;function b(e){if(x===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\n( *(at )?)/);x=t&&t[1]||""}return`
`+x+e}var W=!1;function L(e,t){if(!e||W)return"";W=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(K){var d=K}Reflect.construct(e,[],t)}else{try{t.call()}catch(K){d=K}e.call(t.prototype)}else{try{throw Error()}catch(K){d=K}e()}}catch(K){if(K&&d&&typeof K.stack=="string"){for(var v=K.stack.split(`
`),C=d.stack.split(`
`),T=v.length-1,F=C.length-1;1<=T&&0<=F&&v[T]!==C[F];)F--;for(;1<=T&&0<=F;T--,F--)if(v[T]!==C[F]){if(T!==1||F!==1)do if(T--,F--,0>F||v[T]!==C[F]){var j=`
`+v[T].replace(" at new "," at ");return e.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",e.displayName)),j}while(1<=T&&0<=F);break}}}finally{W=!1,Error.prepareStackTrace=l}return(e=e?e.displayName||e.name:"")?b(e):""}function E(e){switch(e.tag){case 5:return b(e.type);case 16:return b("Lazy");case 13:return b("Suspense");case 19:return b("SuspenseList");case 0:case 2:case 15:return e=L(e.type,!1),e;case 11:return e=L(e.type.render,!1),e;case 1:return e=L(e.type,!0),e;default:return""}}function I(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case D:return"Fragment";case O:return"Portal";case V:return"Profiler";case A:return"StrictMode";case me:return"Suspense";case he:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case oe:return(e.displayName||"Context")+".Consumer";case q:return(e._context.displayName||"Context")+".Provider";case ge:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case de:return t=e.displayName||null,t!==null?t:I(e.type)||"Memo";case Ce:t=e._payload,e=e._init;try{return I(e(t))}catch{}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function te(e){var t=Y(e)?"checked":"value",l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),d=""+e[t];if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var v=l.get,C=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return v.call(this)},set:function(T){d=""+T,C.call(this,T)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function le(e){e._valueTracker||(e._valueTracker=te(e))}function ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var l=t.getValue(),d="";return e&&(d=Y(e)?e.checked?"true":"false":e.value),e=d,e!==l?(t.setValue(e),!0):!1}function Q(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function X(e,t){var l=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??e._wrapperState.initialChecked})}function ie(e,t){var l=t.defaultValue==null?"":t.defaultValue,d=t.checked!=null?t.checked:t.defaultChecked;l=$(t.value!=null?t.value:l),e._wrapperState={initialChecked:d,initialValue:l,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function re(e,t){t=t.checked,t!=null&&y(e,"checked",t,!1)}function J(e,t){re(e,t);var l=$(t.value),d=t.type;if(l!=null)d==="number"?(l===0&&e.value===""||e.value!=l)&&(e.value=""+l):e.value!==""+l&&(e.value=""+l);else if(d==="submit"||d==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ye(e,t.type,l):t.hasOwnProperty("defaultValue")&&ye(e,t.type,$(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function se(e,t,l){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var d=t.type;if(!(d!=="submit"&&d!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,l||t===e.value||(e.value=t),e.defaultValue=t}l=e.name,l!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,l!==""&&(e.name=l)}function ye(e,t,l){(t!=="number"||Q(e.ownerDocument)!==e)&&(l==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+l&&(e.defaultValue=""+l))}var De=Array.isArray;function xe(e,t,l,d){if(e=e.options,t){t={};for(var v=0;v<l.length;v++)t["$"+l[v]]=!0;for(l=0;l<e.length;l++)v=t.hasOwnProperty("$"+e[l].value),e[l].selected!==v&&(e[l].selected=v),v&&d&&(e[l].defaultSelected=!0)}else{for(l=""+$(l),t=null,v=0;v<e.length;v++){if(e[v].value===l){e[v].selected=!0,d&&(e[v].defaultSelected=!0);return}t!==null||e[v].disabled||(t=e[v])}t!==null&&(t.selected=!0)}}function ne(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ee(e,t){var l=t.value;if(l==null){if(l=t.children,t=t.defaultValue,l!=null){if(t!=null)throw Error(P(92));if(De(l)){if(1<l.length)throw Error(P(93));l=l[0]}t=l}t==null&&(t=""),l=t}e._wrapperState={initialValue:$(l)}}function Le(e,t){var l=$(t.value),d=$(t.defaultValue);l!=null&&(l=""+l,l!==e.value&&(e.value=l),t.defaultValue==null&&e.defaultValue!==l&&(e.defaultValue=l)),d!=null&&(e.defaultValue=""+d)}function Ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ne(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Re(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ne(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qe,He=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,l,d,v){MSApp.execUnsafeLocalFunction(function(){return e(t,l,d,v)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qe=Qe||document.createElement("div"),Qe.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yt(e,t){if(t){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=t;return}}e.textContent=t}var Dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xt=["Webkit","ms","Moz","O"];Object.keys(Dt).forEach(function(e){xt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dt[t]=Dt[e]})});function er(e,t,l){return t==null||typeof t=="boolean"||t===""?"":l||typeof t!="number"||t===0||Dt.hasOwnProperty(e)&&Dt[e]?(""+t).trim():t+"px"}function ui(e,t){e=e.style;for(var l in t)if(t.hasOwnProperty(l)){var d=l.indexOf("--")===0,v=er(l,t[l],d);l==="float"&&(l="cssFloat"),d?e.setProperty(l,v):e[l]=v}}var ps=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ci(e,t){if(t){if(ps[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function ms(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vs=null;function ys(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _s=null,jn=null,Bn=null;function Sa(e){if(e=Li(e)){if(typeof _s!="function")throw Error(P(280));var t=e.stateNode;t&&(t=xr(t),_s(e.stateNode,e.type,t))}}function wa(e){jn?Bn?Bn.push(e):Bn=[e]:jn=e}function xa(){if(jn){var e=jn,t=Bn;if(Bn=jn=null,Sa(e),t)for(e=0;e<t.length;e++)Sa(t[e])}}function Ta(e,t){return e(t)}function ka(){}var Cs=!1;function Oa(e,t,l){if(Cs)return e(t,l);Cs=!0;try{return Ta(e,t,l)}finally{Cs=!1,(jn!==null||Bn!==null)&&(ka(),xa())}}function hi(e,t){var l=e.stateNode;if(l===null)return null;var d=xr(l);if(d===null)return null;l=d[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(e=e.type,d=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!d;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(P(231,t,typeof l));return l}var Ss=!1;if(g)try{var fi={};Object.defineProperty(fi,"passive",{get:function(){Ss=!0}}),window.addEventListener("test",fi,fi),window.removeEventListener("test",fi,fi)}catch{Ss=!1}function jc(e,t,l,d,v,C,T,F,j){var K=Array.prototype.slice.call(arguments,3);try{t.apply(l,K)}catch(ce){this.onError(ce)}}var di=!1,tr=null,nr=!1,ws=null,Bc={onError:function(e){di=!0,tr=e}};function Nc(e,t,l,d,v,C,T,F,j){di=!1,tr=null,jc.apply(Bc,arguments)}function zc(e,t,l,d,v,C,T,F,j){if(Nc.apply(this,arguments),di){if(di){var K=tr;di=!1,tr=null}else throw Error(P(198));nr||(nr=!0,ws=K)}}function wn(e){var t=e,l=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(l=t.return),e=t.return;while(e)}return t.tag===3?l:null}function Ea(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Pa(e){if(wn(e)!==e)throw Error(P(188))}function Wc(e){var t=e.alternate;if(!t){if(t=wn(e),t===null)throw Error(P(188));return t!==e?null:e}for(var l=e,d=t;;){var v=l.return;if(v===null)break;var C=v.alternate;if(C===null){if(d=v.return,d!==null){l=d;continue}break}if(v.child===C.child){for(C=v.child;C;){if(C===l)return Pa(v),e;if(C===d)return Pa(v),t;C=C.sibling}throw Error(P(188))}if(l.return!==d.return)l=v,d=C;else{for(var T=!1,F=v.child;F;){if(F===l){T=!0,l=v,d=C;break}if(F===d){T=!0,d=v,l=C;break}F=F.sibling}if(!T){for(F=C.child;F;){if(F===l){T=!0,l=C,d=v;break}if(F===d){T=!0,d=C,l=v;break}F=F.sibling}if(!T)throw Error(P(189))}}if(l.alternate!==d)throw Error(P(190))}if(l.tag!==3)throw Error(P(188));return l.stateNode.current===l?e:t}function ba(e){return e=Wc(e),e!==null?Da(e):null}function Da(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Da(e);if(t!==null)return t;e=e.sibling}return null}var Ma=p.unstable_scheduleCallback,La=p.unstable_cancelCallback,Uc=p.unstable_shouldYield,Xc=p.unstable_requestPaint,Ke=p.unstable_now,Hc=p.unstable_getCurrentPriorityLevel,xs=p.unstable_ImmediatePriority,Fa=p.unstable_UserBlockingPriority,ir=p.unstable_NormalPriority,Yc=p.unstable_LowPriority,Aa=p.unstable_IdlePriority,rr=null,Bt=null;function Vc(e){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(rr,e,void 0,(e.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:Kc,Gc=Math.log,$c=Math.LN2;function Kc(e){return e>>>=0,e===0?32:31-(Gc(e)/$c|0)|0}var sr=64,or=4194304;function gi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ar(e,t){var l=e.pendingLanes;if(l===0)return 0;var d=0,v=e.suspendedLanes,C=e.pingedLanes,T=l&268435455;if(T!==0){var F=T&~v;F!==0?d=gi(F):(C&=T,C!==0&&(d=gi(C)))}else T=l&~v,T!==0?d=gi(T):C!==0&&(d=gi(C));if(d===0)return 0;if(t!==0&&t!==d&&!(t&v)&&(v=d&-d,C=t&-t,v>=C||v===16&&(C&4194240)!==0))return t;if(d&4&&(d|=l&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=d;0<t;)l=31-Mt(t),v=1<<l,d|=e[l],t&=~v;return d}function qc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qc(e,t){for(var l=e.suspendedLanes,d=e.pingedLanes,v=e.expirationTimes,C=e.pendingLanes;0<C;){var T=31-Mt(C),F=1<<T,j=v[T];j===-1?(!(F&l)||F&d)&&(v[T]=qc(F,t)):j<=t&&(e.expiredLanes|=F),C&=~F}}function Ts(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ra(){var e=sr;return sr<<=1,!(sr&4194240)&&(sr=64),e}function ks(e){for(var t=[],l=0;31>l;l++)t.push(e);return t}function pi(e,t,l){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mt(t),e[t]=l}function Jc(e,t){var l=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var d=e.eventTimes;for(e=e.expirationTimes;0<l;){var v=31-Mt(l),C=1<<v;t[v]=0,d[v]=-1,e[v]=-1,l&=~C}}function Os(e,t){var l=e.entangledLanes|=t;for(e=e.entanglements;l;){var d=31-Mt(l),v=1<<d;v&t|e[d]&t&&(e[d]|=t),l&=~v}}var Be=0;function Ia(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ja,Es,Ba,Na,za,Ps=!1,lr=[],en=null,tn=null,nn=null,mi=new Map,vi=new Map,rn=[],Zc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wa(e,t){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":mi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vi.delete(t.pointerId)}}function yi(e,t,l,d,v,C){return e===null||e.nativeEvent!==C?(e={blockedOn:t,domEventName:l,eventSystemFlags:d,nativeEvent:C,targetContainers:[v]},t!==null&&(t=Li(t),t!==null&&Es(t)),e):(e.eventSystemFlags|=d,t=e.targetContainers,v!==null&&t.indexOf(v)===-1&&t.push(v),e)}function eh(e,t,l,d,v){switch(t){case"focusin":return en=yi(en,e,t,l,d,v),!0;case"dragenter":return tn=yi(tn,e,t,l,d,v),!0;case"mouseover":return nn=yi(nn,e,t,l,d,v),!0;case"pointerover":var C=v.pointerId;return mi.set(C,yi(mi.get(C)||null,e,t,l,d,v)),!0;case"gotpointercapture":return C=v.pointerId,vi.set(C,yi(vi.get(C)||null,e,t,l,d,v)),!0}return!1}function Ua(e){var t=xn(e.target);if(t!==null){var l=wn(t);if(l!==null){if(t=l.tag,t===13){if(t=Ea(l),t!==null){e.blockedOn=t,za(e.priority,function(){Ba(l)});return}}else if(t===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ur(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var l=Ds(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(l===null){l=e.nativeEvent;var d=new l.constructor(l.type,l);vs=d,l.target.dispatchEvent(d),vs=null}else return t=Li(l),t!==null&&Es(t),e.blockedOn=l,!1;t.shift()}return!0}function Xa(e,t,l){ur(e)&&l.delete(t)}function th(){Ps=!1,en!==null&&ur(en)&&(en=null),tn!==null&&ur(tn)&&(tn=null),nn!==null&&ur(nn)&&(nn=null),mi.forEach(Xa),vi.forEach(Xa)}function _i(e,t){e.blockedOn===t&&(e.blockedOn=null,Ps||(Ps=!0,p.unstable_scheduleCallback(p.unstable_NormalPriority,th)))}function Ci(e){function t(v){return _i(v,e)}if(0<lr.length){_i(lr[0],e);for(var l=1;l<lr.length;l++){var d=lr[l];d.blockedOn===e&&(d.blockedOn=null)}}for(en!==null&&_i(en,e),tn!==null&&_i(tn,e),nn!==null&&_i(nn,e),mi.forEach(t),vi.forEach(t),l=0;l<rn.length;l++)d=rn[l],d.blockedOn===e&&(d.blockedOn=null);for(;0<rn.length&&(l=rn[0],l.blockedOn===null);)Ua(l),l.blockedOn===null&&rn.shift()}var Nn=_.ReactCurrentBatchConfig,cr=!0;function nh(e,t,l,d){var v=Be,C=Nn.transition;Nn.transition=null;try{Be=1,bs(e,t,l,d)}finally{Be=v,Nn.transition=C}}function ih(e,t,l,d){var v=Be,C=Nn.transition;Nn.transition=null;try{Be=4,bs(e,t,l,d)}finally{Be=v,Nn.transition=C}}function bs(e,t,l,d){if(cr){var v=Ds(e,t,l,d);if(v===null)Gs(e,t,d,hr,l),Wa(e,d);else if(eh(v,e,t,l,d))d.stopPropagation();else if(Wa(e,d),t&4&&-1<Zc.indexOf(e)){for(;v!==null;){var C=Li(v);if(C!==null&&ja(C),C=Ds(e,t,l,d),C===null&&Gs(e,t,d,hr,l),C===v)break;v=C}v!==null&&d.stopPropagation()}else Gs(e,t,d,null,l)}}var hr=null;function Ds(e,t,l,d){if(hr=null,e=ys(d),e=xn(e),e!==null)if(t=wn(e),t===null)e=null;else if(l=t.tag,l===13){if(e=Ea(t),e!==null)return e;e=null}else if(l===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hr=e,null}function Ha(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hc()){case xs:return 1;case Fa:return 4;case ir:case Yc:return 16;case Aa:return 536870912;default:return 16}default:return 16}}var sn=null,Ms=null,fr=null;function Ya(){if(fr)return fr;var e,t=Ms,l=t.length,d,v="value"in sn?sn.value:sn.textContent,C=v.length;for(e=0;e<l&&t[e]===v[e];e++);var T=l-e;for(d=1;d<=T&&t[l-d]===v[C-d];d++);return fr=v.slice(e,1<d?1-d:void 0)}function dr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gr(){return!0}function Va(){return!1}function _t(e){function t(l,d,v,C,T){this._reactName=l,this._targetInst=v,this.type=d,this.nativeEvent=C,this.target=T,this.currentTarget=null;for(var F in e)e.hasOwnProperty(F)&&(l=e[F],this[F]=l?l(C):C[F]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?gr:Va,this.isPropagationStopped=Va,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=gr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=gr)},persist:function(){},isPersistent:gr}),t}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ls=_t(zn),Si=M({},zn,{view:0,detail:0}),rh=_t(Si),Fs,As,wi,pr=M({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Is,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wi&&(wi&&e.type==="mousemove"?(Fs=e.screenX-wi.screenX,As=e.screenY-wi.screenY):As=Fs=0,wi=e),Fs)},movementY:function(e){return"movementY"in e?e.movementY:As}}),Ga=_t(pr),sh=M({},pr,{dataTransfer:0}),oh=_t(sh),ah=M({},Si,{relatedTarget:0}),Rs=_t(ah),lh=M({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),uh=_t(lh),ch=M({},zn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hh=_t(ch),fh=M({},zn,{data:0}),$a=_t(fh),dh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ph={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ph[e])?!!t[e]:!1}function Is(){return mh}var vh=M({},Si,{key:function(e){if(e.key){var t=dh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=dr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Is,charCode:function(e){return e.type==="keypress"?dr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yh=_t(vh),_h=M({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ka=_t(_h),Ch=M({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Is}),Sh=_t(Ch),wh=M({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),xh=_t(wh),Th=M({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kh=_t(Th),Oh=[9,13,27,32],js=g&&"CompositionEvent"in window,xi=null;g&&"documentMode"in document&&(xi=document.documentMode);var Eh=g&&"TextEvent"in window&&!xi,qa=g&&(!js||xi&&8<xi&&11>=xi),Qa=" ",Ja=!1;function Za(e,t){switch(e){case"keyup":return Oh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function el(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wn=!1;function Ph(e,t){switch(e){case"compositionend":return el(t);case"keypress":return t.which!==32?null:(Ja=!0,Qa);case"textInput":return e=t.data,e===Qa&&Ja?null:e;default:return null}}function bh(e,t){if(Wn)return e==="compositionend"||!js&&Za(e,t)?(e=Ya(),fr=Ms=sn=null,Wn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qa&&t.locale!=="ko"?null:t.data;default:return null}}var Dh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Dh[e.type]:t==="textarea"}function nl(e,t,l,d){wa(d),t=Cr(t,"onChange"),0<t.length&&(l=new Ls("onChange","change",null,l,d),e.push({event:l,listeners:t}))}var Ti=null,ki=null;function Mh(e){Cl(e,0)}function mr(e){var t=Vn(e);if(ve(t))return e}function Lh(e,t){if(e==="change")return t}var il=!1;if(g){var Bs;if(g){var Ns="oninput"in document;if(!Ns){var rl=document.createElement("div");rl.setAttribute("oninput","return;"),Ns=typeof rl.oninput=="function"}Bs=Ns}else Bs=!1;il=Bs&&(!document.documentMode||9<document.documentMode)}function sl(){Ti&&(Ti.detachEvent("onpropertychange",ol),ki=Ti=null)}function ol(e){if(e.propertyName==="value"&&mr(ki)){var t=[];nl(t,ki,e,ys(e)),Oa(Mh,t)}}function Fh(e,t,l){e==="focusin"?(sl(),Ti=t,ki=l,Ti.attachEvent("onpropertychange",ol)):e==="focusout"&&sl()}function Ah(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mr(ki)}function Rh(e,t){if(e==="click")return mr(t)}function Ih(e,t){if(e==="input"||e==="change")return mr(t)}function jh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lt=typeof Object.is=="function"?Object.is:jh;function Oi(e,t){if(Lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var l=Object.keys(e),d=Object.keys(t);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var v=l[d];if(!a.call(t,v)||!Lt(e[v],t[v]))return!1}return!0}function al(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ll(e,t){var l=al(e);e=0;for(var d;l;){if(l.nodeType===3){if(d=e+l.textContent.length,e<=t&&d>=t)return{node:l,offset:t-e};e=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=al(l)}}function ul(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ul(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cl(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var l=typeof t.contentWindow.location.href=="string"}catch{l=!1}if(l)e=t.contentWindow;else break;t=Q(e.document)}return t}function zs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Bh(e){var t=cl(),l=e.focusedElem,d=e.selectionRange;if(t!==l&&l&&l.ownerDocument&&ul(l.ownerDocument.documentElement,l)){if(d!==null&&zs(l)){if(t=d.start,e=d.end,e===void 0&&(e=t),"selectionStart"in l)l.selectionStart=t,l.selectionEnd=Math.min(e,l.value.length);else if(e=(t=l.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var v=l.textContent.length,C=Math.min(d.start,v);d=d.end===void 0?C:Math.min(d.end,v),!e.extend&&C>d&&(v=d,d=C,C=v),v=ll(l,C);var T=ll(l,d);v&&T&&(e.rangeCount!==1||e.anchorNode!==v.node||e.anchorOffset!==v.offset||e.focusNode!==T.node||e.focusOffset!==T.offset)&&(t=t.createRange(),t.setStart(v.node,v.offset),e.removeAllRanges(),C>d?(e.addRange(t),e.extend(T.node,T.offset)):(t.setEnd(T.node,T.offset),e.addRange(t)))}}for(t=[],e=l;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<t.length;l++)e=t[l],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Nh=g&&"documentMode"in document&&11>=document.documentMode,Un=null,Ws=null,Ei=null,Us=!1;function hl(e,t,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Us||Un==null||Un!==Q(d)||(d=Un,"selectionStart"in d&&zs(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ei&&Oi(Ei,d)||(Ei=d,d=Cr(Ws,"onSelect"),0<d.length&&(t=new Ls("onSelect","select",null,t,l),e.push({event:t,listeners:d}),t.target=Un)))}function vr(e,t){var l={};return l[e.toLowerCase()]=t.toLowerCase(),l["Webkit"+e]="webkit"+t,l["Moz"+e]="moz"+t,l}var Xn={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionend:vr("Transition","TransitionEnd")},Xs={},fl={};g&&(fl=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function yr(e){if(Xs[e])return Xs[e];if(!Xn[e])return e;var t=Xn[e],l;for(l in t)if(t.hasOwnProperty(l)&&l in fl)return Xs[e]=t[l];return e}var dl=yr("animationend"),gl=yr("animationiteration"),pl=yr("animationstart"),ml=yr("transitionend"),vl=new Map,yl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function on(e,t){vl.set(e,t),U(t,[e])}for(var Hs=0;Hs<yl.length;Hs++){var Ys=yl[Hs],zh=Ys.toLowerCase(),Wh=Ys[0].toUpperCase()+Ys.slice(1);on(zh,"on"+Wh)}on(dl,"onAnimationEnd"),on(gl,"onAnimationIteration"),on(pl,"onAnimationStart"),on("dblclick","onDoubleClick"),on("focusin","onFocus"),on("focusout","onBlur"),on(ml,"onTransitionEnd"),ee("onMouseEnter",["mouseout","mouseover"]),ee("onMouseLeave",["mouseout","mouseover"]),ee("onPointerEnter",["pointerout","pointerover"]),ee("onPointerLeave",["pointerout","pointerover"]),U("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),U("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),U("onBeforeInput",["compositionend","keypress","textInput","paste"]),U("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),U("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),U("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function _l(e,t,l){var d=e.type||"unknown-event";e.currentTarget=l,zc(d,t,void 0,e),e.currentTarget=null}function Cl(e,t){t=(t&4)!==0;for(var l=0;l<e.length;l++){var d=e[l],v=d.event;d=d.listeners;e:{var C=void 0;if(t)for(var T=d.length-1;0<=T;T--){var F=d[T],j=F.instance,K=F.currentTarget;if(F=F.listener,j!==C&&v.isPropagationStopped())break e;_l(v,F,K),C=j}else for(T=0;T<d.length;T++){if(F=d[T],j=F.instance,K=F.currentTarget,F=F.listener,j!==C&&v.isPropagationStopped())break e;_l(v,F,K),C=j}}}if(nr)throw e=ws,nr=!1,ws=null,e}function We(e,t){var l=t[Zs];l===void 0&&(l=t[Zs]=new Set);var d=e+"__bubble";l.has(d)||(Sl(t,e,2,!1),l.add(d))}function Vs(e,t,l){var d=0;t&&(d|=4),Sl(l,e,d,t)}var _r="_reactListening"+Math.random().toString(36).slice(2);function bi(e){if(!e[_r]){e[_r]=!0,B.forEach(function(l){l!=="selectionchange"&&(Uh.has(l)||Vs(l,!1,e),Vs(l,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_r]||(t[_r]=!0,Vs("selectionchange",!1,t))}}function Sl(e,t,l,d){switch(Ha(t)){case 1:var v=nh;break;case 4:v=ih;break;default:v=bs}l=v.bind(null,t,l,e),v=void 0,!Ss||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(v=!0),d?v!==void 0?e.addEventListener(t,l,{capture:!0,passive:v}):e.addEventListener(t,l,!0):v!==void 0?e.addEventListener(t,l,{passive:v}):e.addEventListener(t,l,!1)}function Gs(e,t,l,d,v){var C=d;if(!(t&1)&&!(t&2)&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var F=d.stateNode.containerInfo;if(F===v||F.nodeType===8&&F.parentNode===v)break;if(T===4)for(T=d.return;T!==null;){var j=T.tag;if((j===3||j===4)&&(j=T.stateNode.containerInfo,j===v||j.nodeType===8&&j.parentNode===v))return;T=T.return}for(;F!==null;){if(T=xn(F),T===null)return;if(j=T.tag,j===5||j===6){d=C=T;continue e}F=F.parentNode}}d=d.return}Oa(function(){var K=C,ce=ys(l),fe=[];e:{var ue=vl.get(e);if(ue!==void 0){var Se=Ls,Te=e;switch(e){case"keypress":if(dr(l)===0)break e;case"keydown":case"keyup":Se=yh;break;case"focusin":Te="focus",Se=Rs;break;case"focusout":Te="blur",Se=Rs;break;case"beforeblur":case"afterblur":Se=Rs;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Ga;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=oh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=Sh;break;case dl:case gl:case pl:Se=uh;break;case ml:Se=xh;break;case"scroll":Se=rh;break;case"wheel":Se=kh;break;case"copy":case"cut":case"paste":Se=hh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Ka}var ke=(t&4)!==0,qe=!ke&&e==="scroll",H=ke?ue!==null?ue+"Capture":null:ue;ke=[];for(var N=K,G;N!==null;){G=N;var pe=G.stateNode;if(G.tag===5&&pe!==null&&(G=pe,H!==null&&(pe=hi(N,H),pe!=null&&ke.push(Di(N,pe,G)))),qe)break;N=N.return}0<ke.length&&(ue=new Se(ue,Te,null,l,ce),fe.push({event:ue,listeners:ke}))}}if(!(t&7)){e:{if(ue=e==="mouseover"||e==="pointerover",Se=e==="mouseout"||e==="pointerout",ue&&l!==vs&&(Te=l.relatedTarget||l.fromElement)&&(xn(Te)||Te[Ht]))break e;if((Se||ue)&&(ue=ce.window===ce?ce:(ue=ce.ownerDocument)?ue.defaultView||ue.parentWindow:window,Se?(Te=l.relatedTarget||l.toElement,Se=K,Te=Te?xn(Te):null,Te!==null&&(qe=wn(Te),Te!==qe||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(Se=null,Te=K),Se!==Te)){if(ke=Ga,pe="onMouseLeave",H="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(ke=Ka,pe="onPointerLeave",H="onPointerEnter",N="pointer"),qe=Se==null?ue:Vn(Se),G=Te==null?ue:Vn(Te),ue=new ke(pe,N+"leave",Se,l,ce),ue.target=qe,ue.relatedTarget=G,pe=null,xn(ce)===K&&(ke=new ke(H,N+"enter",Te,l,ce),ke.target=G,ke.relatedTarget=qe,pe=ke),qe=pe,Se&&Te)t:{for(ke=Se,H=Te,N=0,G=ke;G;G=Hn(G))N++;for(G=0,pe=H;pe;pe=Hn(pe))G++;for(;0<N-G;)ke=Hn(ke),N--;for(;0<G-N;)H=Hn(H),G--;for(;N--;){if(ke===H||H!==null&&ke===H.alternate)break t;ke=Hn(ke),H=Hn(H)}ke=null}else ke=null;Se!==null&&wl(fe,ue,Se,ke,!1),Te!==null&&qe!==null&&wl(fe,qe,Te,ke,!0)}}e:{if(ue=K?Vn(K):window,Se=ue.nodeName&&ue.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ue.type==="file")var Oe=Lh;else if(tl(ue))if(il)Oe=Ih;else{Oe=Ah;var Pe=Fh}else(Se=ue.nodeName)&&Se.toLowerCase()==="input"&&(ue.type==="checkbox"||ue.type==="radio")&&(Oe=Rh);if(Oe&&(Oe=Oe(e,K))){nl(fe,Oe,l,ce);break e}Pe&&Pe(e,ue,K),e==="focusout"&&(Pe=ue._wrapperState)&&Pe.controlled&&ue.type==="number"&&ye(ue,"number",ue.value)}switch(Pe=K?Vn(K):window,e){case"focusin":(tl(Pe)||Pe.contentEditable==="true")&&(Un=Pe,Ws=K,Ei=null);break;case"focusout":Ei=Ws=Un=null;break;case"mousedown":Us=!0;break;case"contextmenu":case"mouseup":case"dragend":Us=!1,hl(fe,l,ce);break;case"selectionchange":if(Nh)break;case"keydown":case"keyup":hl(fe,l,ce)}var be;if(js)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Wn?Za(e,l)&&(Me="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Me="onCompositionStart");Me&&(qa&&l.locale!=="ko"&&(Wn||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Wn&&(be=Ya()):(sn=ce,Ms="value"in sn?sn.value:sn.textContent,Wn=!0)),Pe=Cr(K,Me),0<Pe.length&&(Me=new $a(Me,e,null,l,ce),fe.push({event:Me,listeners:Pe}),be?Me.data=be:(be=el(l),be!==null&&(Me.data=be)))),(be=Eh?Ph(e,l):bh(e,l))&&(K=Cr(K,"onBeforeInput"),0<K.length&&(ce=new $a("onBeforeInput","beforeinput",null,l,ce),fe.push({event:ce,listeners:K}),ce.data=be))}Cl(fe,t)})}function Di(e,t,l){return{instance:e,listener:t,currentTarget:l}}function Cr(e,t){for(var l=t+"Capture",d=[];e!==null;){var v=e,C=v.stateNode;v.tag===5&&C!==null&&(v=C,C=hi(e,l),C!=null&&d.unshift(Di(e,C,v)),C=hi(e,t),C!=null&&d.push(Di(e,C,v))),e=e.return}return d}function Hn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wl(e,t,l,d,v){for(var C=t._reactName,T=[];l!==null&&l!==d;){var F=l,j=F.alternate,K=F.stateNode;if(j!==null&&j===d)break;F.tag===5&&K!==null&&(F=K,v?(j=hi(l,C),j!=null&&T.unshift(Di(l,j,F))):v||(j=hi(l,C),j!=null&&T.push(Di(l,j,F)))),l=l.return}T.length!==0&&e.push({event:t,listeners:T})}var Xh=/\r\n?/g,Hh=/\u0000|\uFFFD/g;function xl(e){return(typeof e=="string"?e:""+e).replace(Xh,`
`).replace(Hh,"")}function Sr(e,t,l){if(t=xl(t),xl(e)!==t&&l)throw Error(P(425))}function wr(){}var $s=null,Ks=null;function qs(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qs=typeof setTimeout=="function"?setTimeout:void 0,Yh=typeof clearTimeout=="function"?clearTimeout:void 0,Tl=typeof Promise=="function"?Promise:void 0,Vh=typeof queueMicrotask=="function"?queueMicrotask:typeof Tl<"u"?function(e){return Tl.resolve(null).then(e).catch(Gh)}:Qs;function Gh(e){setTimeout(function(){throw e})}function Js(e,t){var l=t,d=0;do{var v=l.nextSibling;if(e.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"){if(d===0){e.removeChild(v),Ci(t);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=v}while(l);Ci(t)}function an(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"){if(t===0)return e;t--}else l==="/$"&&t++}e=e.previousSibling}return null}var Yn=Math.random().toString(36).slice(2),Nt="__reactFiber$"+Yn,Mi="__reactProps$"+Yn,Ht="__reactContainer$"+Yn,Zs="__reactEvents$"+Yn,$h="__reactListeners$"+Yn,Kh="__reactHandles$"+Yn;function xn(e){var t=e[Nt];if(t)return t;for(var l=e.parentNode;l;){if(t=l[Ht]||l[Nt]){if(l=t.alternate,t.child!==null||l!==null&&l.child!==null)for(e=kl(e);e!==null;){if(l=e[Nt])return l;e=kl(e)}return t}e=l,l=e.parentNode}return null}function Li(e){return e=e[Nt]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function xr(e){return e[Mi]||null}var eo=[],Gn=-1;function ln(e){return{current:e}}function Ue(e){0>Gn||(e.current=eo[Gn],eo[Gn]=null,Gn--)}function ze(e,t){Gn++,eo[Gn]=e.current,e.current=t}var un={},ot=ln(un),ft=ln(!1),Tn=un;function $n(e,t){var l=e.type.contextTypes;if(!l)return un;var d=e.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===t)return d.__reactInternalMemoizedMaskedChildContext;var v={},C;for(C in l)v[C]=t[C];return d&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=v),v}function dt(e){return e=e.childContextTypes,e!=null}function Tr(){Ue(ft),Ue(ot)}function Ol(e,t,l){if(ot.current!==un)throw Error(P(168));ze(ot,t),ze(ft,l)}function El(e,t,l){var d=e.stateNode;if(t=t.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var v in d)if(!(v in t))throw Error(P(108,z(e)||"Unknown",v));return M({},l,d)}function kr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||un,Tn=ot.current,ze(ot,e),ze(ft,ft.current),!0}function Pl(e,t,l){var d=e.stateNode;if(!d)throw Error(P(169));l?(e=El(e,t,Tn),d.__reactInternalMemoizedMergedChildContext=e,Ue(ft),Ue(ot),ze(ot,e)):Ue(ft),ze(ft,l)}var Yt=null,Or=!1,to=!1;function bl(e){Yt===null?Yt=[e]:Yt.push(e)}function qh(e){Or=!0,bl(e)}function cn(){if(!to&&Yt!==null){to=!0;var e=0,t=Be;try{var l=Yt;for(Be=1;e<l.length;e++){var d=l[e];do d=d(!0);while(d!==null)}Yt=null,Or=!1}catch(v){throw Yt!==null&&(Yt=Yt.slice(e+1)),Ma(xs,cn),v}finally{Be=t,to=!1}}return null}var Kn=[],qn=0,Er=null,Pr=0,Tt=[],kt=0,kn=null,Vt=1,Gt="";function On(e,t){Kn[qn++]=Pr,Kn[qn++]=Er,Er=e,Pr=t}function Dl(e,t,l){Tt[kt++]=Vt,Tt[kt++]=Gt,Tt[kt++]=kn,kn=e;var d=Vt;e=Gt;var v=32-Mt(d)-1;d&=~(1<<v),l+=1;var C=32-Mt(t)+v;if(30<C){var T=v-v%5;C=(d&(1<<T)-1).toString(32),d>>=T,v-=T,Vt=1<<32-Mt(t)+v|l<<v|d,Gt=C+e}else Vt=1<<C|l<<v|d,Gt=e}function no(e){e.return!==null&&(On(e,1),Dl(e,1,0))}function io(e){for(;e===Er;)Er=Kn[--qn],Kn[qn]=null,Pr=Kn[--qn],Kn[qn]=null;for(;e===kn;)kn=Tt[--kt],Tt[kt]=null,Gt=Tt[--kt],Tt[kt]=null,Vt=Tt[--kt],Tt[kt]=null}var Ct=null,St=null,Xe=!1,Ft=null;function Ml(e,t){var l=bt(5,null,null,0);l.elementType="DELETED",l.stateNode=t,l.return=e,t=e.deletions,t===null?(e.deletions=[l],e.flags|=16):t.push(l)}function Ll(e,t){switch(e.tag){case 5:var l=e.type;return t=t.nodeType!==1||l.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ct=e,St=an(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ct=e,St=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(l=kn!==null?{id:Vt,overflow:Gt}:null,e.memoizedState={dehydrated:t,treeContext:l,retryLane:1073741824},l=bt(18,null,null,0),l.stateNode=t,l.return=e,e.child=l,Ct=e,St=null,!0):!1;default:return!1}}function ro(e){return(e.mode&1)!==0&&(e.flags&128)===0}function so(e){if(Xe){var t=St;if(t){var l=t;if(!Ll(e,t)){if(ro(e))throw Error(P(418));t=an(l.nextSibling);var d=Ct;t&&Ll(e,t)?Ml(d,l):(e.flags=e.flags&-4097|2,Xe=!1,Ct=e)}}else{if(ro(e))throw Error(P(418));e.flags=e.flags&-4097|2,Xe=!1,Ct=e}}}function Fl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ct=e}function br(e){if(e!==Ct)return!1;if(!Xe)return Fl(e),Xe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qs(e.type,e.memoizedProps)),t&&(t=St)){if(ro(e))throw Al(),Error(P(418));for(;t;)Ml(e,t),t=an(t.nextSibling)}if(Fl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"){if(t===0){St=an(e.nextSibling);break e}t--}else l!=="$"&&l!=="$!"&&l!=="$?"||t++}e=e.nextSibling}St=null}}else St=Ct?an(e.stateNode.nextSibling):null;return!0}function Al(){for(var e=St;e;)e=an(e.nextSibling)}function Qn(){St=Ct=null,Xe=!1}function oo(e){Ft===null?Ft=[e]:Ft.push(e)}var Qh=_.ReactCurrentBatchConfig;function Fi(e,t,l){if(e=l.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(P(309));var d=l.stateNode}if(!d)throw Error(P(147,e));var v=d,C=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===C?t.ref:(t=function(T){var F=v.refs;T===null?delete F[C]:F[C]=T},t._stringRef=C,t)}if(typeof e!="string")throw Error(P(284));if(!l._owner)throw Error(P(290,e))}return e}function Dr(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rl(e){var t=e._init;return t(e._payload)}function Il(e){function t(H,N){if(e){var G=H.deletions;G===null?(H.deletions=[N],H.flags|=16):G.push(N)}}function l(H,N){if(!e)return null;for(;N!==null;)t(H,N),N=N.sibling;return null}function d(H,N){for(H=new Map;N!==null;)N.key!==null?H.set(N.key,N):H.set(N.index,N),N=N.sibling;return H}function v(H,N){return H=yn(H,N),H.index=0,H.sibling=null,H}function C(H,N,G){return H.index=G,e?(G=H.alternate,G!==null?(G=G.index,G<N?(H.flags|=2,N):G):(H.flags|=2,N)):(H.flags|=1048576,N)}function T(H){return e&&H.alternate===null&&(H.flags|=2),H}function F(H,N,G,pe){return N===null||N.tag!==6?(N=Jo(G,H.mode,pe),N.return=H,N):(N=v(N,G),N.return=H,N)}function j(H,N,G,pe){var Oe=G.type;return Oe===D?ce(H,N,G.props.children,pe,G.key):N!==null&&(N.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===Ce&&Rl(Oe)===N.type)?(pe=v(N,G.props),pe.ref=Fi(H,N,G),pe.return=H,pe):(pe=es(G.type,G.key,G.props,null,H.mode,pe),pe.ref=Fi(H,N,G),pe.return=H,pe)}function K(H,N,G,pe){return N===null||N.tag!==4||N.stateNode.containerInfo!==G.containerInfo||N.stateNode.implementation!==G.implementation?(N=Zo(G,H.mode,pe),N.return=H,N):(N=v(N,G.children||[]),N.return=H,N)}function ce(H,N,G,pe,Oe){return N===null||N.tag!==7?(N=An(G,H.mode,pe,Oe),N.return=H,N):(N=v(N,G),N.return=H,N)}function fe(H,N,G){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Jo(""+N,H.mode,G),N.return=H,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case S:return G=es(N.type,N.key,N.props,null,H.mode,G),G.ref=Fi(H,null,N),G.return=H,G;case O:return N=Zo(N,H.mode,G),N.return=H,N;case Ce:var pe=N._init;return fe(H,pe(N._payload),G)}if(De(N)||k(N))return N=An(N,H.mode,G,null),N.return=H,N;Dr(H,N)}return null}function ue(H,N,G,pe){var Oe=N!==null?N.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return Oe!==null?null:F(H,N,""+G,pe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case S:return G.key===Oe?j(H,N,G,pe):null;case O:return G.key===Oe?K(H,N,G,pe):null;case Ce:return Oe=G._init,ue(H,N,Oe(G._payload),pe)}if(De(G)||k(G))return Oe!==null?null:ce(H,N,G,pe,null);Dr(H,G)}return null}function Se(H,N,G,pe,Oe){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return H=H.get(G)||null,F(N,H,""+pe,Oe);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case S:return H=H.get(pe.key===null?G:pe.key)||null,j(N,H,pe,Oe);case O:return H=H.get(pe.key===null?G:pe.key)||null,K(N,H,pe,Oe);case Ce:var Pe=pe._init;return Se(H,N,G,Pe(pe._payload),Oe)}if(De(pe)||k(pe))return H=H.get(G)||null,ce(N,H,pe,Oe,null);Dr(N,pe)}return null}function Te(H,N,G,pe){for(var Oe=null,Pe=null,be=N,Me=N=0,it=null;be!==null&&Me<G.length;Me++){be.index>Me?(it=be,be=null):it=be.sibling;var je=ue(H,be,G[Me],pe);if(je===null){be===null&&(be=it);break}e&&be&&je.alternate===null&&t(H,be),N=C(je,N,Me),Pe===null?Oe=je:Pe.sibling=je,Pe=je,be=it}if(Me===G.length)return l(H,be),Xe&&On(H,Me),Oe;if(be===null){for(;Me<G.length;Me++)be=fe(H,G[Me],pe),be!==null&&(N=C(be,N,Me),Pe===null?Oe=be:Pe.sibling=be,Pe=be);return Xe&&On(H,Me),Oe}for(be=d(H,be);Me<G.length;Me++)it=Se(be,H,Me,G[Me],pe),it!==null&&(e&&it.alternate!==null&&be.delete(it.key===null?Me:it.key),N=C(it,N,Me),Pe===null?Oe=it:Pe.sibling=it,Pe=it);return e&&be.forEach(function(_n){return t(H,_n)}),Xe&&On(H,Me),Oe}function ke(H,N,G,pe){var Oe=k(G);if(typeof Oe!="function")throw Error(P(150));if(G=Oe.call(G),G==null)throw Error(P(151));for(var Pe=Oe=null,be=N,Me=N=0,it=null,je=G.next();be!==null&&!je.done;Me++,je=G.next()){be.index>Me?(it=be,be=null):it=be.sibling;var _n=ue(H,be,je.value,pe);if(_n===null){be===null&&(be=it);break}e&&be&&_n.alternate===null&&t(H,be),N=C(_n,N,Me),Pe===null?Oe=_n:Pe.sibling=_n,Pe=_n,be=it}if(je.done)return l(H,be),Xe&&On(H,Me),Oe;if(be===null){for(;!je.done;Me++,je=G.next())je=fe(H,je.value,pe),je!==null&&(N=C(je,N,Me),Pe===null?Oe=je:Pe.sibling=je,Pe=je);return Xe&&On(H,Me),Oe}for(be=d(H,be);!je.done;Me++,je=G.next())je=Se(be,H,Me,je.value,pe),je!==null&&(e&&je.alternate!==null&&be.delete(je.key===null?Me:je.key),N=C(je,N,Me),Pe===null?Oe=je:Pe.sibling=je,Pe=je);return e&&be.forEach(function(Mf){return t(H,Mf)}),Xe&&On(H,Me),Oe}function qe(H,N,G,pe){if(typeof G=="object"&&G!==null&&G.type===D&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case S:e:{for(var Oe=G.key,Pe=N;Pe!==null;){if(Pe.key===Oe){if(Oe=G.type,Oe===D){if(Pe.tag===7){l(H,Pe.sibling),N=v(Pe,G.props.children),N.return=H,H=N;break e}}else if(Pe.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===Ce&&Rl(Oe)===Pe.type){l(H,Pe.sibling),N=v(Pe,G.props),N.ref=Fi(H,Pe,G),N.return=H,H=N;break e}l(H,Pe);break}else t(H,Pe);Pe=Pe.sibling}G.type===D?(N=An(G.props.children,H.mode,pe,G.key),N.return=H,H=N):(pe=es(G.type,G.key,G.props,null,H.mode,pe),pe.ref=Fi(H,N,G),pe.return=H,H=pe)}return T(H);case O:e:{for(Pe=G.key;N!==null;){if(N.key===Pe)if(N.tag===4&&N.stateNode.containerInfo===G.containerInfo&&N.stateNode.implementation===G.implementation){l(H,N.sibling),N=v(N,G.children||[]),N.return=H,H=N;break e}else{l(H,N);break}else t(H,N);N=N.sibling}N=Zo(G,H.mode,pe),N.return=H,H=N}return T(H);case Ce:return Pe=G._init,qe(H,N,Pe(G._payload),pe)}if(De(G))return Te(H,N,G,pe);if(k(G))return ke(H,N,G,pe);Dr(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,N!==null&&N.tag===6?(l(H,N.sibling),N=v(N,G),N.return=H,H=N):(l(H,N),N=Jo(G,H.mode,pe),N.return=H,H=N),T(H)):l(H,N)}return qe}var Jn=Il(!0),jl=Il(!1),Mr=ln(null),Lr=null,Zn=null,ao=null;function lo(){ao=Zn=Lr=null}function uo(e){var t=Mr.current;Ue(Mr),e._currentValue=t}function co(e,t,l){for(;e!==null;){var d=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,d!==null&&(d.childLanes|=t)):d!==null&&(d.childLanes&t)!==t&&(d.childLanes|=t),e===l)break;e=e.return}}function ei(e,t){Lr=e,ao=Zn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gt=!0),e.firstContext=null)}function Ot(e){var t=e._currentValue;if(ao!==e)if(e={context:e,memoizedValue:t,next:null},Zn===null){if(Lr===null)throw Error(P(308));Zn=e,Lr.dependencies={lanes:0,firstContext:e}}else Zn=Zn.next=e;return t}var En=null;function ho(e){En===null?En=[e]:En.push(e)}function Bl(e,t,l,d){var v=t.interleaved;return v===null?(l.next=l,ho(t)):(l.next=v.next,v.next=l),t.interleaved=l,$t(e,d)}function $t(e,t){e.lanes|=t;var l=e.alternate;for(l!==null&&(l.lanes|=t),l=e,e=e.return;e!==null;)e.childLanes|=t,l=e.alternate,l!==null&&(l.childLanes|=t),l=e,e=e.return;return l.tag===3?l.stateNode:null}var hn=!1;function fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fn(e,t,l){var d=e.updateQueue;if(d===null)return null;if(d=d.shared,Ie&2){var v=d.pending;return v===null?t.next=t:(t.next=v.next,v.next=t),d.pending=t,$t(e,l)}return v=d.interleaved,v===null?(t.next=t,ho(d)):(t.next=v.next,v.next=t),d.interleaved=t,$t(e,l)}function Fr(e,t,l){if(t=t.updateQueue,t!==null&&(t=t.shared,(l&4194240)!==0)){var d=t.lanes;d&=e.pendingLanes,l|=d,t.lanes=l,Os(e,l)}}function zl(e,t){var l=e.updateQueue,d=e.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var v=null,C=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};C===null?v=C=T:C=C.next=T,l=l.next}while(l!==null);C===null?v=C=t:C=C.next=t}else v=C=t;l={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:C,shared:d.shared,effects:d.effects},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=t:e.next=t,l.lastBaseUpdate=t}function Ar(e,t,l,d){var v=e.updateQueue;hn=!1;var C=v.firstBaseUpdate,T=v.lastBaseUpdate,F=v.shared.pending;if(F!==null){v.shared.pending=null;var j=F,K=j.next;j.next=null,T===null?C=K:T.next=K,T=j;var ce=e.alternate;ce!==null&&(ce=ce.updateQueue,F=ce.lastBaseUpdate,F!==T&&(F===null?ce.firstBaseUpdate=K:F.next=K,ce.lastBaseUpdate=j))}if(C!==null){var fe=v.baseState;T=0,ce=K=j=null,F=C;do{var ue=F.lane,Se=F.eventTime;if((d&ue)===ue){ce!==null&&(ce=ce.next={eventTime:Se,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Te=e,ke=F;switch(ue=t,Se=l,ke.tag){case 1:if(Te=ke.payload,typeof Te=="function"){fe=Te.call(Se,fe,ue);break e}fe=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=ke.payload,ue=typeof Te=="function"?Te.call(Se,fe,ue):Te,ue==null)break e;fe=M({},fe,ue);break e;case 2:hn=!0}}F.callback!==null&&F.lane!==0&&(e.flags|=64,ue=v.effects,ue===null?v.effects=[F]:ue.push(F))}else Se={eventTime:Se,lane:ue,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ce===null?(K=ce=Se,j=fe):ce=ce.next=Se,T|=ue;if(F=F.next,F===null){if(F=v.shared.pending,F===null)break;ue=F,F=ue.next,ue.next=null,v.lastBaseUpdate=ue,v.shared.pending=null}}while(!0);if(ce===null&&(j=fe),v.baseState=j,v.firstBaseUpdate=K,v.lastBaseUpdate=ce,t=v.shared.interleaved,t!==null){v=t;do T|=v.lane,v=v.next;while(v!==t)}else C===null&&(v.shared.lanes=0);Dn|=T,e.lanes=T,e.memoizedState=fe}}function Wl(e,t,l){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var d=e[t],v=d.callback;if(v!==null){if(d.callback=null,d=l,typeof v!="function")throw Error(P(191,v));v.call(d)}}}var Ai={},zt=ln(Ai),Ri=ln(Ai),Ii=ln(Ai);function Pn(e){if(e===Ai)throw Error(P(174));return e}function go(e,t){switch(ze(Ii,t),ze(Ri,e),ze(zt,Ai),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Re(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Re(t,e)}Ue(zt),ze(zt,t)}function ti(){Ue(zt),Ue(Ri),Ue(Ii)}function Ul(e){Pn(Ii.current);var t=Pn(zt.current),l=Re(t,e.type);t!==l&&(ze(Ri,e),ze(zt,l))}function po(e){Ri.current===e&&(Ue(zt),Ue(Ri))}var Ye=ln(0);function Rr(e){for(var t=e;t!==null;){if(t.tag===13){var l=t.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mo=[];function vo(){for(var e=0;e<mo.length;e++)mo[e]._workInProgressVersionPrimary=null;mo.length=0}var Ir=_.ReactCurrentDispatcher,yo=_.ReactCurrentBatchConfig,bn=0,Ve=null,Ze=null,tt=null,jr=!1,ji=!1,Bi=0,Jh=0;function at(){throw Error(P(321))}function _o(e,t){if(t===null)return!1;for(var l=0;l<t.length&&l<e.length;l++)if(!Lt(e[l],t[l]))return!1;return!0}function Co(e,t,l,d,v,C){if(bn=C,Ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ir.current=e===null||e.memoizedState===null?nf:rf,e=l(d,v),ji){C=0;do{if(ji=!1,Bi=0,25<=C)throw Error(P(301));C+=1,tt=Ze=null,t.updateQueue=null,Ir.current=sf,e=l(d,v)}while(ji)}if(Ir.current=zr,t=Ze!==null&&Ze.next!==null,bn=0,tt=Ze=Ve=null,jr=!1,t)throw Error(P(300));return e}function So(){var e=Bi!==0;return Bi=0,e}function Wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ve.memoizedState=tt=e:tt=tt.next=e,tt}function Et(){if(Ze===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=tt===null?Ve.memoizedState:tt.next;if(t!==null)tt=t,Ze=e;else{if(e===null)throw Error(P(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},tt===null?Ve.memoizedState=tt=e:tt=tt.next=e}return tt}function Ni(e,t){return typeof t=="function"?t(e):t}function wo(e){var t=Et(),l=t.queue;if(l===null)throw Error(P(311));l.lastRenderedReducer=e;var d=Ze,v=d.baseQueue,C=l.pending;if(C!==null){if(v!==null){var T=v.next;v.next=C.next,C.next=T}d.baseQueue=v=C,l.pending=null}if(v!==null){C=v.next,d=d.baseState;var F=T=null,j=null,K=C;do{var ce=K.lane;if((bn&ce)===ce)j!==null&&(j=j.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),d=K.hasEagerState?K.eagerState:e(d,K.action);else{var fe={lane:ce,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};j===null?(F=j=fe,T=d):j=j.next=fe,Ve.lanes|=ce,Dn|=ce}K=K.next}while(K!==null&&K!==C);j===null?T=d:j.next=F,Lt(d,t.memoizedState)||(gt=!0),t.memoizedState=d,t.baseState=T,t.baseQueue=j,l.lastRenderedState=d}if(e=l.interleaved,e!==null){v=e;do C=v.lane,Ve.lanes|=C,Dn|=C,v=v.next;while(v!==e)}else v===null&&(l.lanes=0);return[t.memoizedState,l.dispatch]}function xo(e){var t=Et(),l=t.queue;if(l===null)throw Error(P(311));l.lastRenderedReducer=e;var d=l.dispatch,v=l.pending,C=t.memoizedState;if(v!==null){l.pending=null;var T=v=v.next;do C=e(C,T.action),T=T.next;while(T!==v);Lt(C,t.memoizedState)||(gt=!0),t.memoizedState=C,t.baseQueue===null&&(t.baseState=C),l.lastRenderedState=C}return[C,d]}function Xl(){}function Hl(e,t){var l=Ve,d=Et(),v=t(),C=!Lt(d.memoizedState,v);if(C&&(d.memoizedState=v,gt=!0),d=d.queue,To(Gl.bind(null,l,d,e),[e]),d.getSnapshot!==t||C||tt!==null&&tt.memoizedState.tag&1){if(l.flags|=2048,zi(9,Vl.bind(null,l,d,v,t),void 0,null),nt===null)throw Error(P(349));bn&30||Yl(l,t,v)}return v}function Yl(e,t,l){e.flags|=16384,e={getSnapshot:t,value:l},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.stores=[e]):(l=t.stores,l===null?t.stores=[e]:l.push(e))}function Vl(e,t,l,d){t.value=l,t.getSnapshot=d,$l(t)&&Kl(e)}function Gl(e,t,l){return l(function(){$l(t)&&Kl(e)})}function $l(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!Lt(e,l)}catch{return!0}}function Kl(e){var t=$t(e,1);t!==null&&jt(t,e,1,-1)}function ql(e){var t=Wt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:e},t.queue=e,e=e.dispatch=tf.bind(null,Ve,e),[t.memoizedState,e]}function zi(e,t,l,d){return e={tag:e,create:t,destroy:l,deps:d,next:null},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.lastEffect=e.next=e):(l=t.lastEffect,l===null?t.lastEffect=e.next=e:(d=l.next,l.next=e,e.next=d,t.lastEffect=e)),e}function Ql(){return Et().memoizedState}function Br(e,t,l,d){var v=Wt();Ve.flags|=e,v.memoizedState=zi(1|t,l,void 0,d===void 0?null:d)}function Nr(e,t,l,d){var v=Et();d=d===void 0?null:d;var C=void 0;if(Ze!==null){var T=Ze.memoizedState;if(C=T.destroy,d!==null&&_o(d,T.deps)){v.memoizedState=zi(t,l,C,d);return}}Ve.flags|=e,v.memoizedState=zi(1|t,l,C,d)}function Jl(e,t){return Br(8390656,8,e,t)}function To(e,t){return Nr(2048,8,e,t)}function Zl(e,t){return Nr(4,2,e,t)}function eu(e,t){return Nr(4,4,e,t)}function tu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nu(e,t,l){return l=l!=null?l.concat([e]):null,Nr(4,4,tu.bind(null,t,e),l)}function ko(){}function iu(e,t){var l=Et();t=t===void 0?null:t;var d=l.memoizedState;return d!==null&&t!==null&&_o(t,d[1])?d[0]:(l.memoizedState=[e,t],e)}function ru(e,t){var l=Et();t=t===void 0?null:t;var d=l.memoizedState;return d!==null&&t!==null&&_o(t,d[1])?d[0]:(e=e(),l.memoizedState=[e,t],e)}function su(e,t,l){return bn&21?(Lt(l,t)||(l=Ra(),Ve.lanes|=l,Dn|=l,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=l)}function Zh(e,t){var l=Be;Be=l!==0&&4>l?l:4,e(!0);var d=yo.transition;yo.transition={};try{e(!1),t()}finally{Be=l,yo.transition=d}}function ou(){return Et().memoizedState}function ef(e,t,l){var d=mn(e);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},au(e))lu(t,l);else if(l=Bl(e,t,l,d),l!==null){var v=ht();jt(l,e,d,v),uu(l,t,d)}}function tf(e,t,l){var d=mn(e),v={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(au(e))lu(t,v);else{var C=e.alternate;if(e.lanes===0&&(C===null||C.lanes===0)&&(C=t.lastRenderedReducer,C!==null))try{var T=t.lastRenderedState,F=C(T,l);if(v.hasEagerState=!0,v.eagerState=F,Lt(F,T)){var j=t.interleaved;j===null?(v.next=v,ho(t)):(v.next=j.next,j.next=v),t.interleaved=v;return}}catch{}finally{}l=Bl(e,t,v,d),l!==null&&(v=ht(),jt(l,e,d,v),uu(l,t,d))}}function au(e){var t=e.alternate;return e===Ve||t!==null&&t===Ve}function lu(e,t){ji=jr=!0;var l=e.pending;l===null?t.next=t:(t.next=l.next,l.next=t),e.pending=t}function uu(e,t,l){if(l&4194240){var d=t.lanes;d&=e.pendingLanes,l|=d,t.lanes=l,Os(e,l)}}var zr={readContext:Ot,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},nf={readContext:Ot,useCallback:function(e,t){return Wt().memoizedState=[e,t===void 0?null:t],e},useContext:Ot,useEffect:Jl,useImperativeHandle:function(e,t,l){return l=l!=null?l.concat([e]):null,Br(4194308,4,tu.bind(null,t,e),l)},useLayoutEffect:function(e,t){return Br(4194308,4,e,t)},useInsertionEffect:function(e,t){return Br(4,2,e,t)},useMemo:function(e,t){var l=Wt();return t=t===void 0?null:t,e=e(),l.memoizedState=[e,t],e},useReducer:function(e,t,l){var d=Wt();return t=l!==void 0?l(t):t,d.memoizedState=d.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},d.queue=e,e=e.dispatch=ef.bind(null,Ve,e),[d.memoizedState,e]},useRef:function(e){var t=Wt();return e={current:e},t.memoizedState=e},useState:ql,useDebugValue:ko,useDeferredValue:function(e){return Wt().memoizedState=e},useTransition:function(){var e=ql(!1),t=e[0];return e=Zh.bind(null,e[1]),Wt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,l){var d=Ve,v=Wt();if(Xe){if(l===void 0)throw Error(P(407));l=l()}else{if(l=t(),nt===null)throw Error(P(349));bn&30||Yl(d,t,l)}v.memoizedState=l;var C={value:l,getSnapshot:t};return v.queue=C,Jl(Gl.bind(null,d,C,e),[e]),d.flags|=2048,zi(9,Vl.bind(null,d,C,l,t),void 0,null),l},useId:function(){var e=Wt(),t=nt.identifierPrefix;if(Xe){var l=Gt,d=Vt;l=(d&~(1<<32-Mt(d)-1)).toString(32)+l,t=":"+t+"R"+l,l=Bi++,0<l&&(t+="H"+l.toString(32)),t+=":"}else l=Jh++,t=":"+t+"r"+l.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rf={readContext:Ot,useCallback:iu,useContext:Ot,useEffect:To,useImperativeHandle:nu,useInsertionEffect:Zl,useLayoutEffect:eu,useMemo:ru,useReducer:wo,useRef:Ql,useState:function(){return wo(Ni)},useDebugValue:ko,useDeferredValue:function(e){var t=Et();return su(t,Ze.memoizedState,e)},useTransition:function(){var e=wo(Ni)[0],t=Et().memoizedState;return[e,t]},useMutableSource:Xl,useSyncExternalStore:Hl,useId:ou,unstable_isNewReconciler:!1},sf={readContext:Ot,useCallback:iu,useContext:Ot,useEffect:To,useImperativeHandle:nu,useInsertionEffect:Zl,useLayoutEffect:eu,useMemo:ru,useReducer:xo,useRef:Ql,useState:function(){return xo(Ni)},useDebugValue:ko,useDeferredValue:function(e){var t=Et();return Ze===null?t.memoizedState=e:su(t,Ze.memoizedState,e)},useTransition:function(){var e=xo(Ni)[0],t=Et().memoizedState;return[e,t]},useMutableSource:Xl,useSyncExternalStore:Hl,useId:ou,unstable_isNewReconciler:!1};function At(e,t){if(e&&e.defaultProps){t=M({},t),e=e.defaultProps;for(var l in e)t[l]===void 0&&(t[l]=e[l]);return t}return t}function Oo(e,t,l,d){t=e.memoizedState,l=l(d,t),l=l==null?t:M({},t,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Wr={isMounted:function(e){return(e=e._reactInternals)?wn(e)===e:!1},enqueueSetState:function(e,t,l){e=e._reactInternals;var d=ht(),v=mn(e),C=Kt(d,v);C.payload=t,l!=null&&(C.callback=l),t=fn(e,C,v),t!==null&&(jt(t,e,v,d),Fr(t,e,v))},enqueueReplaceState:function(e,t,l){e=e._reactInternals;var d=ht(),v=mn(e),C=Kt(d,v);C.tag=1,C.payload=t,l!=null&&(C.callback=l),t=fn(e,C,v),t!==null&&(jt(t,e,v,d),Fr(t,e,v))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var l=ht(),d=mn(e),v=Kt(l,d);v.tag=2,t!=null&&(v.callback=t),t=fn(e,v,d),t!==null&&(jt(t,e,d,l),Fr(t,e,d))}};function cu(e,t,l,d,v,C,T){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(d,C,T):t.prototype&&t.prototype.isPureReactComponent?!Oi(l,d)||!Oi(v,C):!0}function hu(e,t,l){var d=!1,v=un,C=t.contextType;return typeof C=="object"&&C!==null?C=Ot(C):(v=dt(t)?Tn:ot.current,d=t.contextTypes,C=(d=d!=null)?$n(e,v):un),t=new t(l,C),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wr,e.stateNode=t,t._reactInternals=e,d&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=v,e.__reactInternalMemoizedMaskedChildContext=C),t}function fu(e,t,l,d){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(l,d),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(l,d),t.state!==e&&Wr.enqueueReplaceState(t,t.state,null)}function Eo(e,t,l,d){var v=e.stateNode;v.props=l,v.state=e.memoizedState,v.refs={},fo(e);var C=t.contextType;typeof C=="object"&&C!==null?v.context=Ot(C):(C=dt(t)?Tn:ot.current,v.context=$n(e,C)),v.state=e.memoizedState,C=t.getDerivedStateFromProps,typeof C=="function"&&(Oo(e,t,C,l),v.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(t=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),t!==v.state&&Wr.enqueueReplaceState(v,v.state,null),Ar(e,l,v,d),v.state=e.memoizedState),typeof v.componentDidMount=="function"&&(e.flags|=4194308)}function ni(e,t){try{var l="",d=t;do l+=E(d),d=d.return;while(d);var v=l}catch(C){v=`
Error generating stack: `+C.message+`
`+C.stack}return{value:e,source:t,stack:v,digest:null}}function Po(e,t,l){return{value:e,source:null,stack:l??null,digest:t??null}}function bo(e,t){try{console.error(t.value)}catch(l){setTimeout(function(){throw l})}}var of=typeof WeakMap=="function"?WeakMap:Map;function du(e,t,l){l=Kt(-1,l),l.tag=3,l.payload={element:null};var d=t.value;return l.callback=function(){$r||($r=!0,Ho=d),bo(e,t)},l}function gu(e,t,l){l=Kt(-1,l),l.tag=3;var d=e.type.getDerivedStateFromError;if(typeof d=="function"){var v=t.value;l.payload=function(){return d(v)},l.callback=function(){bo(e,t)}}var C=e.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(l.callback=function(){bo(e,t),typeof d!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var T=t.stack;this.componentDidCatch(t.value,{componentStack:T!==null?T:""})}),l}function pu(e,t,l){var d=e.pingCache;if(d===null){d=e.pingCache=new of;var v=new Set;d.set(t,v)}else v=d.get(t),v===void 0&&(v=new Set,d.set(t,v));v.has(l)||(v.add(l),e=Cf.bind(null,e,t,l),t.then(e,e))}function mu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vu(e,t,l,d,v){return e.mode&1?(e.flags|=65536,e.lanes=v,e):(e===t?e.flags|=65536:(e.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(t=Kt(-1,1),t.tag=2,fn(l,t,1))),l.lanes|=1),e)}var af=_.ReactCurrentOwner,gt=!1;function ct(e,t,l,d){t.child=e===null?jl(t,null,l,d):Jn(t,e.child,l,d)}function yu(e,t,l,d,v){l=l.render;var C=t.ref;return ei(t,v),d=Co(e,t,l,d,C,v),l=So(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~v,qt(e,t,v)):(Xe&&l&&no(t),t.flags|=1,ct(e,t,d,v),t.child)}function _u(e,t,l,d,v){if(e===null){var C=l.type;return typeof C=="function"&&!Qo(C)&&C.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(t.tag=15,t.type=C,Cu(e,t,C,d,v)):(e=es(l.type,null,d,t,t.mode,v),e.ref=t.ref,e.return=t,t.child=e)}if(C=e.child,!(e.lanes&v)){var T=C.memoizedProps;if(l=l.compare,l=l!==null?l:Oi,l(T,d)&&e.ref===t.ref)return qt(e,t,v)}return t.flags|=1,e=yn(C,d),e.ref=t.ref,e.return=t,t.child=e}function Cu(e,t,l,d,v){if(e!==null){var C=e.memoizedProps;if(Oi(C,d)&&e.ref===t.ref)if(gt=!1,t.pendingProps=d=C,(e.lanes&v)!==0)e.flags&131072&&(gt=!0);else return t.lanes=e.lanes,qt(e,t,v)}return Do(e,t,l,d,v)}function Su(e,t,l){var d=t.pendingProps,v=d.children,C=e!==null?e.memoizedState:null;if(d.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(ri,wt),wt|=l;else{if(!(l&1073741824))return e=C!==null?C.baseLanes|l:l,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(ri,wt),wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=C!==null?C.baseLanes:l,ze(ri,wt),wt|=d}else C!==null?(d=C.baseLanes|l,t.memoizedState=null):d=l,ze(ri,wt),wt|=d;return ct(e,t,v,l),t.child}function wu(e,t){var l=t.ref;(e===null&&l!==null||e!==null&&e.ref!==l)&&(t.flags|=512,t.flags|=2097152)}function Do(e,t,l,d,v){var C=dt(l)?Tn:ot.current;return C=$n(t,C),ei(t,v),l=Co(e,t,l,d,C,v),d=So(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~v,qt(e,t,v)):(Xe&&d&&no(t),t.flags|=1,ct(e,t,l,v),t.child)}function xu(e,t,l,d,v){if(dt(l)){var C=!0;kr(t)}else C=!1;if(ei(t,v),t.stateNode===null)Xr(e,t),hu(t,l,d),Eo(t,l,d,v),d=!0;else if(e===null){var T=t.stateNode,F=t.memoizedProps;T.props=F;var j=T.context,K=l.contextType;typeof K=="object"&&K!==null?K=Ot(K):(K=dt(l)?Tn:ot.current,K=$n(t,K));var ce=l.getDerivedStateFromProps,fe=typeof ce=="function"||typeof T.getSnapshotBeforeUpdate=="function";fe||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(F!==d||j!==K)&&fu(t,T,d,K),hn=!1;var ue=t.memoizedState;T.state=ue,Ar(t,d,T,v),j=t.memoizedState,F!==d||ue!==j||ft.current||hn?(typeof ce=="function"&&(Oo(t,l,ce,d),j=t.memoizedState),(F=hn||cu(t,l,F,d,ue,j,K))?(fe||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(t.flags|=4194308)):(typeof T.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=d,t.memoizedState=j),T.props=d,T.state=j,T.context=K,d=F):(typeof T.componentDidMount=="function"&&(t.flags|=4194308),d=!1)}else{T=t.stateNode,Nl(e,t),F=t.memoizedProps,K=t.type===t.elementType?F:At(t.type,F),T.props=K,fe=t.pendingProps,ue=T.context,j=l.contextType,typeof j=="object"&&j!==null?j=Ot(j):(j=dt(l)?Tn:ot.current,j=$n(t,j));var Se=l.getDerivedStateFromProps;(ce=typeof Se=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(F!==fe||ue!==j)&&fu(t,T,d,j),hn=!1,ue=t.memoizedState,T.state=ue,Ar(t,d,T,v);var Te=t.memoizedState;F!==fe||ue!==Te||ft.current||hn?(typeof Se=="function"&&(Oo(t,l,Se,d),Te=t.memoizedState),(K=hn||cu(t,l,K,d,ue,Te,j)||!1)?(ce||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,Te,j),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,Te,j)),typeof T.componentDidUpdate=="function"&&(t.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof T.componentDidUpdate!="function"||F===e.memoizedProps&&ue===e.memoizedState||(t.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&ue===e.memoizedState||(t.flags|=1024),t.memoizedProps=d,t.memoizedState=Te),T.props=d,T.state=Te,T.context=j,d=K):(typeof T.componentDidUpdate!="function"||F===e.memoizedProps&&ue===e.memoizedState||(t.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&ue===e.memoizedState||(t.flags|=1024),d=!1)}return Mo(e,t,l,d,C,v)}function Mo(e,t,l,d,v,C){wu(e,t);var T=(t.flags&128)!==0;if(!d&&!T)return v&&Pl(t,l,!1),qt(e,t,C);d=t.stateNode,af.current=t;var F=T&&typeof l.getDerivedStateFromError!="function"?null:d.render();return t.flags|=1,e!==null&&T?(t.child=Jn(t,e.child,null,C),t.child=Jn(t,null,F,C)):ct(e,t,F,C),t.memoizedState=d.state,v&&Pl(t,l,!0),t.child}function Tu(e){var t=e.stateNode;t.pendingContext?Ol(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ol(e,t.context,!1),go(e,t.containerInfo)}function ku(e,t,l,d,v){return Qn(),oo(v),t.flags|=256,ct(e,t,l,d),t.child}var Lo={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ou(e,t,l){var d=t.pendingProps,v=Ye.current,C=!1,T=(t.flags&128)!==0,F;if((F=T)||(F=e!==null&&e.memoizedState===null?!1:(v&2)!==0),F?(C=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(v|=1),ze(Ye,v&1),e===null)return so(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(T=d.children,e=d.fallback,C?(d=t.mode,C=t.child,T={mode:"hidden",children:T},!(d&1)&&C!==null?(C.childLanes=0,C.pendingProps=T):C=ts(T,d,0,null),e=An(e,d,l,null),C.return=t,e.return=t,C.sibling=e,t.child=C,t.child.memoizedState=Fo(l),t.memoizedState=Lo,e):Ao(t,T));if(v=e.memoizedState,v!==null&&(F=v.dehydrated,F!==null))return lf(e,t,T,d,F,v,l);if(C){C=d.fallback,T=t.mode,v=e.child,F=v.sibling;var j={mode:"hidden",children:d.children};return!(T&1)&&t.child!==v?(d=t.child,d.childLanes=0,d.pendingProps=j,t.deletions=null):(d=yn(v,j),d.subtreeFlags=v.subtreeFlags&14680064),F!==null?C=yn(F,C):(C=An(C,T,l,null),C.flags|=2),C.return=t,d.return=t,d.sibling=C,t.child=d,d=C,C=t.child,T=e.child.memoizedState,T=T===null?Fo(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},C.memoizedState=T,C.childLanes=e.childLanes&~l,t.memoizedState=Lo,d}return C=e.child,e=C.sibling,d=yn(C,{mode:"visible",children:d.children}),!(t.mode&1)&&(d.lanes=l),d.return=t,d.sibling=null,e!==null&&(l=t.deletions,l===null?(t.deletions=[e],t.flags|=16):l.push(e)),t.child=d,t.memoizedState=null,d}function Ao(e,t){return t=ts({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ur(e,t,l,d){return d!==null&&oo(d),Jn(t,e.child,null,l),e=Ao(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lf(e,t,l,d,v,C,T){if(l)return t.flags&256?(t.flags&=-257,d=Po(Error(P(422))),Ur(e,t,T,d)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(C=d.fallback,v=t.mode,d=ts({mode:"visible",children:d.children},v,0,null),C=An(C,v,T,null),C.flags|=2,d.return=t,C.return=t,d.sibling=C,t.child=d,t.mode&1&&Jn(t,e.child,null,T),t.child.memoizedState=Fo(T),t.memoizedState=Lo,C);if(!(t.mode&1))return Ur(e,t,T,null);if(v.data==="$!"){if(d=v.nextSibling&&v.nextSibling.dataset,d)var F=d.dgst;return d=F,C=Error(P(419)),d=Po(C,d,void 0),Ur(e,t,T,d)}if(F=(T&e.childLanes)!==0,gt||F){if(d=nt,d!==null){switch(T&-T){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=v&(d.suspendedLanes|T)?0:v,v!==0&&v!==C.retryLane&&(C.retryLane=v,$t(e,v),jt(d,e,v,-1))}return qo(),d=Po(Error(P(421))),Ur(e,t,T,d)}return v.data==="$?"?(t.flags|=128,t.child=e.child,t=Sf.bind(null,e),v._reactRetry=t,null):(e=C.treeContext,St=an(v.nextSibling),Ct=t,Xe=!0,Ft=null,e!==null&&(Tt[kt++]=Vt,Tt[kt++]=Gt,Tt[kt++]=kn,Vt=e.id,Gt=e.overflow,kn=t),t=Ao(t,d.children),t.flags|=4096,t)}function Eu(e,t,l){e.lanes|=t;var d=e.alternate;d!==null&&(d.lanes|=t),co(e.return,t,l)}function Ro(e,t,l,d,v){var C=e.memoizedState;C===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:v}:(C.isBackwards=t,C.rendering=null,C.renderingStartTime=0,C.last=d,C.tail=l,C.tailMode=v)}function Pu(e,t,l){var d=t.pendingProps,v=d.revealOrder,C=d.tail;if(ct(e,t,d.children,l),d=Ye.current,d&2)d=d&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Eu(e,l,t);else if(e.tag===19)Eu(e,l,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}d&=1}if(ze(Ye,d),!(t.mode&1))t.memoizedState=null;else switch(v){case"forwards":for(l=t.child,v=null;l!==null;)e=l.alternate,e!==null&&Rr(e)===null&&(v=l),l=l.sibling;l=v,l===null?(v=t.child,t.child=null):(v=l.sibling,l.sibling=null),Ro(t,!1,v,l,C);break;case"backwards":for(l=null,v=t.child,t.child=null;v!==null;){if(e=v.alternate,e!==null&&Rr(e)===null){t.child=v;break}e=v.sibling,v.sibling=l,l=v,v=e}Ro(t,!0,l,null,C);break;case"together":Ro(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xr(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qt(e,t,l){if(e!==null&&(t.dependencies=e.dependencies),Dn|=t.lanes,!(l&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,l=yn(e,e.pendingProps),t.child=l,l.return=t;e.sibling!==null;)e=e.sibling,l=l.sibling=yn(e,e.pendingProps),l.return=t;l.sibling=null}return t.child}function uf(e,t,l){switch(t.tag){case 3:Tu(t),Qn();break;case 5:Ul(t);break;case 1:dt(t.type)&&kr(t);break;case 4:go(t,t.stateNode.containerInfo);break;case 10:var d=t.type._context,v=t.memoizedProps.value;ze(Mr,d._currentValue),d._currentValue=v;break;case 13:if(d=t.memoizedState,d!==null)return d.dehydrated!==null?(ze(Ye,Ye.current&1),t.flags|=128,null):l&t.child.childLanes?Ou(e,t,l):(ze(Ye,Ye.current&1),e=qt(e,t,l),e!==null?e.sibling:null);ze(Ye,Ye.current&1);break;case 19:if(d=(l&t.childLanes)!==0,e.flags&128){if(d)return Pu(e,t,l);t.flags|=128}if(v=t.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ze(Ye,Ye.current),d)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,l)}return qt(e,t,l)}var bu,Io,Du,Mu;bu=function(e,t){for(var l=t.child;l!==null;){if(l.tag===5||l.tag===6)e.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===t)break;for(;l.sibling===null;){if(l.return===null||l.return===t)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Io=function(){},Du=function(e,t,l,d){var v=e.memoizedProps;if(v!==d){e=t.stateNode,Pn(zt.current);var C=null;switch(l){case"input":v=X(e,v),d=X(e,d),C=[];break;case"select":v=M({},v,{value:void 0}),d=M({},d,{value:void 0}),C=[];break;case"textarea":v=ne(e,v),d=ne(e,d),C=[];break;default:typeof v.onClick!="function"&&typeof d.onClick=="function"&&(e.onclick=wr)}ci(l,d);var T;l=null;for(K in v)if(!d.hasOwnProperty(K)&&v.hasOwnProperty(K)&&v[K]!=null)if(K==="style"){var F=v[K];for(T in F)F.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(R.hasOwnProperty(K)?C||(C=[]):(C=C||[]).push(K,null));for(K in d){var j=d[K];if(F=v!=null?v[K]:void 0,d.hasOwnProperty(K)&&j!==F&&(j!=null||F!=null))if(K==="style")if(F){for(T in F)!F.hasOwnProperty(T)||j&&j.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in j)j.hasOwnProperty(T)&&F[T]!==j[T]&&(l||(l={}),l[T]=j[T])}else l||(C||(C=[]),C.push(K,l)),l=j;else K==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,F=F?F.__html:void 0,j!=null&&F!==j&&(C=C||[]).push(K,j)):K==="children"?typeof j!="string"&&typeof j!="number"||(C=C||[]).push(K,""+j):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(R.hasOwnProperty(K)?(j!=null&&K==="onScroll"&&We("scroll",e),C||F===j||(C=[])):(C=C||[]).push(K,j))}l&&(C=C||[]).push("style",l);var K=C;(t.updateQueue=K)&&(t.flags|=4)}},Mu=function(e,t,l,d){l!==d&&(t.flags|=4)};function Wi(e,t){if(!Xe)switch(e.tailMode){case"hidden":t=e.tail;for(var l=null;t!==null;)t.alternate!==null&&(l=t),t=t.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:d.sibling=null}}function lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,l=0,d=0;if(t)for(var v=e.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags&14680064,d|=v.flags&14680064,v.return=e,v=v.sibling;else for(v=e.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=e,v=v.sibling;return e.subtreeFlags|=d,e.childLanes=l,t}function cf(e,t,l){var d=t.pendingProps;switch(io(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(t),null;case 1:return dt(t.type)&&Tr(),lt(t),null;case 3:return d=t.stateNode,ti(),Ue(ft),Ue(ot),vo(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(e===null||e.child===null)&&(br(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ft!==null&&(Go(Ft),Ft=null))),Io(e,t),lt(t),null;case 5:po(t);var v=Pn(Ii.current);if(l=t.type,e!==null&&t.stateNode!=null)Du(e,t,l,d,v),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!d){if(t.stateNode===null)throw Error(P(166));return lt(t),null}if(e=Pn(zt.current),br(t)){d=t.stateNode,l=t.type;var C=t.memoizedProps;switch(d[Nt]=t,d[Mi]=C,e=(t.mode&1)!==0,l){case"dialog":We("cancel",d),We("close",d);break;case"iframe":case"object":case"embed":We("load",d);break;case"video":case"audio":for(v=0;v<Pi.length;v++)We(Pi[v],d);break;case"source":We("error",d);break;case"img":case"image":case"link":We("error",d),We("load",d);break;case"details":We("toggle",d);break;case"input":ie(d,C),We("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!C.multiple},We("invalid",d);break;case"textarea":Ee(d,C),We("invalid",d)}ci(l,C),v=null;for(var T in C)if(C.hasOwnProperty(T)){var F=C[T];T==="children"?typeof F=="string"?d.textContent!==F&&(C.suppressHydrationWarning!==!0&&Sr(d.textContent,F,e),v=["children",F]):typeof F=="number"&&d.textContent!==""+F&&(C.suppressHydrationWarning!==!0&&Sr(d.textContent,F,e),v=["children",""+F]):R.hasOwnProperty(T)&&F!=null&&T==="onScroll"&&We("scroll",d)}switch(l){case"input":le(d),se(d,C,!0);break;case"textarea":le(d),Ae(d);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(d.onclick=wr)}d=v,t.updateQueue=d,d!==null&&(t.flags|=4)}else{T=v.nodeType===9?v:v.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ne(l)),e==="http://www.w3.org/1999/xhtml"?l==="script"?(e=T.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof d.is=="string"?e=T.createElement(l,{is:d.is}):(e=T.createElement(l),l==="select"&&(T=e,d.multiple?T.multiple=!0:d.size&&(T.size=d.size))):e=T.createElementNS(e,l),e[Nt]=t,e[Mi]=d,bu(e,t,!1,!1),t.stateNode=e;e:{switch(T=ms(l,d),l){case"dialog":We("cancel",e),We("close",e),v=d;break;case"iframe":case"object":case"embed":We("load",e),v=d;break;case"video":case"audio":for(v=0;v<Pi.length;v++)We(Pi[v],e);v=d;break;case"source":We("error",e),v=d;break;case"img":case"image":case"link":We("error",e),We("load",e),v=d;break;case"details":We("toggle",e),v=d;break;case"input":ie(e,d),v=X(e,d),We("invalid",e);break;case"option":v=d;break;case"select":e._wrapperState={wasMultiple:!!d.multiple},v=M({},d,{value:void 0}),We("invalid",e);break;case"textarea":Ee(e,d),v=ne(e,d),We("invalid",e);break;default:v=d}ci(l,v),F=v;for(C in F)if(F.hasOwnProperty(C)){var j=F[C];C==="style"?ui(e,j):C==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&He(e,j)):C==="children"?typeof j=="string"?(l!=="textarea"||j!=="")&&yt(e,j):typeof j=="number"&&yt(e,""+j):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(R.hasOwnProperty(C)?j!=null&&C==="onScroll"&&We("scroll",e):j!=null&&y(e,C,j,T))}switch(l){case"input":le(e),se(e,d,!1);break;case"textarea":le(e),Ae(e);break;case"option":d.value!=null&&e.setAttribute("value",""+$(d.value));break;case"select":e.multiple=!!d.multiple,C=d.value,C!=null?xe(e,!!d.multiple,C,!1):d.defaultValue!=null&&xe(e,!!d.multiple,d.defaultValue,!0);break;default:typeof v.onClick=="function"&&(e.onclick=wr)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lt(t),null;case 6:if(e&&t.stateNode!=null)Mu(e,t,e.memoizedProps,d);else{if(typeof d!="string"&&t.stateNode===null)throw Error(P(166));if(l=Pn(Ii.current),Pn(zt.current),br(t)){if(d=t.stateNode,l=t.memoizedProps,d[Nt]=t,(C=d.nodeValue!==l)&&(e=Ct,e!==null))switch(e.tag){case 3:Sr(d.nodeValue,l,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sr(d.nodeValue,l,(e.mode&1)!==0)}C&&(t.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[Nt]=t,t.stateNode=d}return lt(t),null;case 13:if(Ue(Ye),d=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Xe&&St!==null&&t.mode&1&&!(t.flags&128))Al(),Qn(),t.flags|=98560,C=!1;else if(C=br(t),d!==null&&d.dehydrated!==null){if(e===null){if(!C)throw Error(P(318));if(C=t.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(P(317));C[Nt]=t}else Qn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lt(t),C=!1}else Ft!==null&&(Go(Ft),Ft=null),C=!0;if(!C)return t.flags&65536?t:null}return t.flags&128?(t.lanes=l,t):(d=d!==null,d!==(e!==null&&e.memoizedState!==null)&&d&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?et===0&&(et=3):qo())),t.updateQueue!==null&&(t.flags|=4),lt(t),null);case 4:return ti(),Io(e,t),e===null&&bi(t.stateNode.containerInfo),lt(t),null;case 10:return uo(t.type._context),lt(t),null;case 17:return dt(t.type)&&Tr(),lt(t),null;case 19:if(Ue(Ye),C=t.memoizedState,C===null)return lt(t),null;if(d=(t.flags&128)!==0,T=C.rendering,T===null)if(d)Wi(C,!1);else{if(et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(T=Rr(e),T!==null){for(t.flags|=128,Wi(C,!1),d=T.updateQueue,d!==null&&(t.updateQueue=d,t.flags|=4),t.subtreeFlags=0,d=l,l=t.child;l!==null;)C=l,e=d,C.flags&=14680066,T=C.alternate,T===null?(C.childLanes=0,C.lanes=e,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=T.childLanes,C.lanes=T.lanes,C.child=T.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=T.memoizedProps,C.memoizedState=T.memoizedState,C.updateQueue=T.updateQueue,C.type=T.type,e=T.dependencies,C.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),l=l.sibling;return ze(Ye,Ye.current&1|2),t.child}e=e.sibling}C.tail!==null&&Ke()>si&&(t.flags|=128,d=!0,Wi(C,!1),t.lanes=4194304)}else{if(!d)if(e=Rr(T),e!==null){if(t.flags|=128,d=!0,l=e.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),Wi(C,!0),C.tail===null&&C.tailMode==="hidden"&&!T.alternate&&!Xe)return lt(t),null}else 2*Ke()-C.renderingStartTime>si&&l!==1073741824&&(t.flags|=128,d=!0,Wi(C,!1),t.lanes=4194304);C.isBackwards?(T.sibling=t.child,t.child=T):(l=C.last,l!==null?l.sibling=T:t.child=T,C.last=T)}return C.tail!==null?(t=C.tail,C.rendering=t,C.tail=t.sibling,C.renderingStartTime=Ke(),t.sibling=null,l=Ye.current,ze(Ye,d?l&1|2:l&1),t):(lt(t),null);case 22:case 23:return Ko(),d=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==d&&(t.flags|=8192),d&&t.mode&1?wt&1073741824&&(lt(t),t.subtreeFlags&6&&(t.flags|=8192)):lt(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function hf(e,t){switch(io(t),t.tag){case 1:return dt(t.type)&&Tr(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ti(),Ue(ft),Ue(ot),vo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return po(t),null;case 13:if(Ue(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));Qn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(Ye),null;case 4:return ti(),null;case 10:return uo(t.type._context),null;case 22:case 23:return Ko(),null;case 24:return null;default:return null}}var Hr=!1,ut=!1,ff=typeof WeakSet=="function"?WeakSet:Set,we=null;function ii(e,t){var l=e.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){$e(e,t,d)}else l.current=null}function jo(e,t,l){try{l()}catch(d){$e(e,t,d)}}var Lu=!1;function df(e,t){if($s=cr,e=cl(),zs(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var v=d.anchorOffset,C=d.focusNode;d=d.focusOffset;try{l.nodeType,C.nodeType}catch{l=null;break e}var T=0,F=-1,j=-1,K=0,ce=0,fe=e,ue=null;t:for(;;){for(var Se;fe!==l||v!==0&&fe.nodeType!==3||(F=T+v),fe!==C||d!==0&&fe.nodeType!==3||(j=T+d),fe.nodeType===3&&(T+=fe.nodeValue.length),(Se=fe.firstChild)!==null;)ue=fe,fe=Se;for(;;){if(fe===e)break t;if(ue===l&&++K===v&&(F=T),ue===C&&++ce===d&&(j=T),(Se=fe.nextSibling)!==null)break;fe=ue,ue=fe.parentNode}fe=Se}l=F===-1||j===-1?null:{start:F,end:j}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ks={focusedElem:e,selectionRange:l},cr=!1,we=t;we!==null;)if(t=we,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,we=e;else for(;we!==null;){t=we;try{var Te=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var ke=Te.memoizedProps,qe=Te.memoizedState,H=t.stateNode,N=H.getSnapshotBeforeUpdate(t.elementType===t.type?ke:At(t.type,ke),qe);H.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(pe){$e(t,t.return,pe)}if(e=t.sibling,e!==null){e.return=t.return,we=e;break}we=t.return}return Te=Lu,Lu=!1,Te}function Ui(e,t,l){var d=t.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var v=d=d.next;do{if((v.tag&e)===e){var C=v.destroy;v.destroy=void 0,C!==void 0&&jo(t,l,C)}v=v.next}while(v!==d)}}function Yr(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var l=t=t.next;do{if((l.tag&e)===e){var d=l.create;l.destroy=d()}l=l.next}while(l!==t)}}function Bo(e){var t=e.ref;if(t!==null){var l=e.stateNode;switch(e.tag){case 5:e=l;break;default:e=l}typeof t=="function"?t(e):t.current=e}}function Fu(e){var t=e.alternate;t!==null&&(e.alternate=null,Fu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nt],delete t[Mi],delete t[Zs],delete t[$h],delete t[Kh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Au(e){return e.tag===5||e.tag===3||e.tag===4}function Ru(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function No(e,t,l){var d=e.tag;if(d===5||d===6)e=e.stateNode,t?l.nodeType===8?l.parentNode.insertBefore(e,t):l.insertBefore(e,t):(l.nodeType===8?(t=l.parentNode,t.insertBefore(e,l)):(t=l,t.appendChild(e)),l=l._reactRootContainer,l!=null||t.onclick!==null||(t.onclick=wr));else if(d!==4&&(e=e.child,e!==null))for(No(e,t,l),e=e.sibling;e!==null;)No(e,t,l),e=e.sibling}function zo(e,t,l){var d=e.tag;if(d===5||d===6)e=e.stateNode,t?l.insertBefore(e,t):l.appendChild(e);else if(d!==4&&(e=e.child,e!==null))for(zo(e,t,l),e=e.sibling;e!==null;)zo(e,t,l),e=e.sibling}var rt=null,Rt=!1;function dn(e,t,l){for(l=l.child;l!==null;)Iu(e,t,l),l=l.sibling}function Iu(e,t,l){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(rr,l)}catch{}switch(l.tag){case 5:ut||ii(l,t);case 6:var d=rt,v=Rt;rt=null,dn(e,t,l),rt=d,Rt=v,rt!==null&&(Rt?(e=rt,l=l.stateNode,e.nodeType===8?e.parentNode.removeChild(l):e.removeChild(l)):rt.removeChild(l.stateNode));break;case 18:rt!==null&&(Rt?(e=rt,l=l.stateNode,e.nodeType===8?Js(e.parentNode,l):e.nodeType===1&&Js(e,l),Ci(e)):Js(rt,l.stateNode));break;case 4:d=rt,v=Rt,rt=l.stateNode.containerInfo,Rt=!0,dn(e,t,l),rt=d,Rt=v;break;case 0:case 11:case 14:case 15:if(!ut&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){v=d=d.next;do{var C=v,T=C.destroy;C=C.tag,T!==void 0&&(C&2||C&4)&&jo(l,t,T),v=v.next}while(v!==d)}dn(e,t,l);break;case 1:if(!ut&&(ii(l,t),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(F){$e(l,t,F)}dn(e,t,l);break;case 21:dn(e,t,l);break;case 22:l.mode&1?(ut=(d=ut)||l.memoizedState!==null,dn(e,t,l),ut=d):dn(e,t,l);break;default:dn(e,t,l)}}function ju(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var l=e.stateNode;l===null&&(l=e.stateNode=new ff),t.forEach(function(d){var v=wf.bind(null,e,d);l.has(d)||(l.add(d),d.then(v,v))})}}function It(e,t){var l=t.deletions;if(l!==null)for(var d=0;d<l.length;d++){var v=l[d];try{var C=e,T=t,F=T;e:for(;F!==null;){switch(F.tag){case 5:rt=F.stateNode,Rt=!1;break e;case 3:rt=F.stateNode.containerInfo,Rt=!0;break e;case 4:rt=F.stateNode.containerInfo,Rt=!0;break e}F=F.return}if(rt===null)throw Error(P(160));Iu(C,T,v),rt=null,Rt=!1;var j=v.alternate;j!==null&&(j.return=null),v.return=null}catch(K){$e(v,t,K)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Bu(t,e),t=t.sibling}function Bu(e,t){var l=e.alternate,d=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(t,e),Ut(e),d&4){try{Ui(3,e,e.return),Yr(3,e)}catch(ke){$e(e,e.return,ke)}try{Ui(5,e,e.return)}catch(ke){$e(e,e.return,ke)}}break;case 1:It(t,e),Ut(e),d&512&&l!==null&&ii(l,l.return);break;case 5:if(It(t,e),Ut(e),d&512&&l!==null&&ii(l,l.return),e.flags&32){var v=e.stateNode;try{yt(v,"")}catch(ke){$e(e,e.return,ke)}}if(d&4&&(v=e.stateNode,v!=null)){var C=e.memoizedProps,T=l!==null?l.memoizedProps:C,F=e.type,j=e.updateQueue;if(e.updateQueue=null,j!==null)try{F==="input"&&C.type==="radio"&&C.name!=null&&re(v,C),ms(F,T);var K=ms(F,C);for(T=0;T<j.length;T+=2){var ce=j[T],fe=j[T+1];ce==="style"?ui(v,fe):ce==="dangerouslySetInnerHTML"?He(v,fe):ce==="children"?yt(v,fe):y(v,ce,fe,K)}switch(F){case"input":J(v,C);break;case"textarea":Le(v,C);break;case"select":var ue=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!C.multiple;var Se=C.value;Se!=null?xe(v,!!C.multiple,Se,!1):ue!==!!C.multiple&&(C.defaultValue!=null?xe(v,!!C.multiple,C.defaultValue,!0):xe(v,!!C.multiple,C.multiple?[]:"",!1))}v[Mi]=C}catch(ke){$e(e,e.return,ke)}}break;case 6:if(It(t,e),Ut(e),d&4){if(e.stateNode===null)throw Error(P(162));v=e.stateNode,C=e.memoizedProps;try{v.nodeValue=C}catch(ke){$e(e,e.return,ke)}}break;case 3:if(It(t,e),Ut(e),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Ci(t.containerInfo)}catch(ke){$e(e,e.return,ke)}break;case 4:It(t,e),Ut(e);break;case 13:It(t,e),Ut(e),v=e.child,v.flags&8192&&(C=v.memoizedState!==null,v.stateNode.isHidden=C,!C||v.alternate!==null&&v.alternate.memoizedState!==null||(Xo=Ke())),d&4&&ju(e);break;case 22:if(ce=l!==null&&l.memoizedState!==null,e.mode&1?(ut=(K=ut)||ce,It(t,e),ut=K):It(t,e),Ut(e),d&8192){if(K=e.memoizedState!==null,(e.stateNode.isHidden=K)&&!ce&&e.mode&1)for(we=e,ce=e.child;ce!==null;){for(fe=we=ce;we!==null;){switch(ue=we,Se=ue.child,ue.tag){case 0:case 11:case 14:case 15:Ui(4,ue,ue.return);break;case 1:ii(ue,ue.return);var Te=ue.stateNode;if(typeof Te.componentWillUnmount=="function"){d=ue,l=ue.return;try{t=d,Te.props=t.memoizedProps,Te.state=t.memoizedState,Te.componentWillUnmount()}catch(ke){$e(d,l,ke)}}break;case 5:ii(ue,ue.return);break;case 22:if(ue.memoizedState!==null){Wu(fe);continue}}Se!==null?(Se.return=ue,we=Se):Wu(fe)}ce=ce.sibling}e:for(ce=null,fe=e;;){if(fe.tag===5){if(ce===null){ce=fe;try{v=fe.stateNode,K?(C=v.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(F=fe.stateNode,j=fe.memoizedProps.style,T=j!=null&&j.hasOwnProperty("display")?j.display:null,F.style.display=er("display",T))}catch(ke){$e(e,e.return,ke)}}}else if(fe.tag===6){if(ce===null)try{fe.stateNode.nodeValue=K?"":fe.memoizedProps}catch(ke){$e(e,e.return,ke)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===e)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===e)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===e)break e;ce===fe&&(ce=null),fe=fe.return}ce===fe&&(ce=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:It(t,e),Ut(e),d&4&&ju(e);break;case 21:break;default:It(t,e),Ut(e)}}function Ut(e){var t=e.flags;if(t&2){try{e:{for(var l=e.return;l!==null;){if(Au(l)){var d=l;break e}l=l.return}throw Error(P(160))}switch(d.tag){case 5:var v=d.stateNode;d.flags&32&&(yt(v,""),d.flags&=-33);var C=Ru(e);zo(e,C,v);break;case 3:case 4:var T=d.stateNode.containerInfo,F=Ru(e);No(e,F,T);break;default:throw Error(P(161))}}catch(j){$e(e,e.return,j)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gf(e,t,l){we=e,Nu(e)}function Nu(e,t,l){for(var d=(e.mode&1)!==0;we!==null;){var v=we,C=v.child;if(v.tag===22&&d){var T=v.memoizedState!==null||Hr;if(!T){var F=v.alternate,j=F!==null&&F.memoizedState!==null||ut;F=Hr;var K=ut;if(Hr=T,(ut=j)&&!K)for(we=v;we!==null;)T=we,j=T.child,T.tag===22&&T.memoizedState!==null?Uu(v):j!==null?(j.return=T,we=j):Uu(v);for(;C!==null;)we=C,Nu(C),C=C.sibling;we=v,Hr=F,ut=K}zu(e)}else v.subtreeFlags&8772&&C!==null?(C.return=v,we=C):zu(e)}}function zu(e){for(;we!==null;){var t=we;if(t.flags&8772){var l=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ut||Yr(5,t);break;case 1:var d=t.stateNode;if(t.flags&4&&!ut)if(l===null)d.componentDidMount();else{var v=t.elementType===t.type?l.memoizedProps:At(t.type,l.memoizedProps);d.componentDidUpdate(v,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var C=t.updateQueue;C!==null&&Wl(t,C,d);break;case 3:var T=t.updateQueue;if(T!==null){if(l=null,t.child!==null)switch(t.child.tag){case 5:l=t.child.stateNode;break;case 1:l=t.child.stateNode}Wl(t,T,l)}break;case 5:var F=t.stateNode;if(l===null&&t.flags&4){l=F;var j=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&l.focus();break;case"img":j.src&&(l.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var K=t.alternate;if(K!==null){var ce=K.memoizedState;if(ce!==null){var fe=ce.dehydrated;fe!==null&&Ci(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}ut||t.flags&512&&Bo(t)}catch(ue){$e(t,t.return,ue)}}if(t===e){we=null;break}if(l=t.sibling,l!==null){l.return=t.return,we=l;break}we=t.return}}function Wu(e){for(;we!==null;){var t=we;if(t===e){we=null;break}var l=t.sibling;if(l!==null){l.return=t.return,we=l;break}we=t.return}}function Uu(e){for(;we!==null;){var t=we;try{switch(t.tag){case 0:case 11:case 15:var l=t.return;try{Yr(4,t)}catch(j){$e(t,l,j)}break;case 1:var d=t.stateNode;if(typeof d.componentDidMount=="function"){var v=t.return;try{d.componentDidMount()}catch(j){$e(t,v,j)}}var C=t.return;try{Bo(t)}catch(j){$e(t,C,j)}break;case 5:var T=t.return;try{Bo(t)}catch(j){$e(t,T,j)}}}catch(j){$e(t,t.return,j)}if(t===e){we=null;break}var F=t.sibling;if(F!==null){F.return=t.return,we=F;break}we=t.return}}var pf=Math.ceil,Vr=_.ReactCurrentDispatcher,Wo=_.ReactCurrentOwner,Pt=_.ReactCurrentBatchConfig,Ie=0,nt=null,Je=null,st=0,wt=0,ri=ln(0),et=0,Xi=null,Dn=0,Gr=0,Uo=0,Hi=null,pt=null,Xo=0,si=1/0,Qt=null,$r=!1,Ho=null,gn=null,Kr=!1,pn=null,qr=0,Yi=0,Yo=null,Qr=-1,Jr=0;function ht(){return Ie&6?Ke():Qr!==-1?Qr:Qr=Ke()}function mn(e){return e.mode&1?Ie&2&&st!==0?st&-st:Qh.transition!==null?(Jr===0&&(Jr=Ra()),Jr):(e=Be,e!==0||(e=window.event,e=e===void 0?16:Ha(e.type)),e):1}function jt(e,t,l,d){if(50<Yi)throw Yi=0,Yo=null,Error(P(185));pi(e,l,d),(!(Ie&2)||e!==nt)&&(e===nt&&(!(Ie&2)&&(Gr|=l),et===4&&vn(e,st)),mt(e,d),l===1&&Ie===0&&!(t.mode&1)&&(si=Ke()+500,Or&&cn()))}function mt(e,t){var l=e.callbackNode;Qc(e,t);var d=ar(e,e===nt?st:0);if(d===0)l!==null&&La(l),e.callbackNode=null,e.callbackPriority=0;else if(t=d&-d,e.callbackPriority!==t){if(l!=null&&La(l),t===1)e.tag===0?qh(Hu.bind(null,e)):bl(Hu.bind(null,e)),Vh(function(){!(Ie&6)&&cn()}),l=null;else{switch(Ia(d)){case 1:l=xs;break;case 4:l=Fa;break;case 16:l=ir;break;case 536870912:l=Aa;break;default:l=ir}l=Ju(l,Xu.bind(null,e))}e.callbackPriority=t,e.callbackNode=l}}function Xu(e,t){if(Qr=-1,Jr=0,Ie&6)throw Error(P(327));var l=e.callbackNode;if(oi()&&e.callbackNode!==l)return null;var d=ar(e,e===nt?st:0);if(d===0)return null;if(d&30||d&e.expiredLanes||t)t=Zr(e,d);else{t=d;var v=Ie;Ie|=2;var C=Vu();(nt!==e||st!==t)&&(Qt=null,si=Ke()+500,Ln(e,t));do try{yf();break}catch(F){Yu(e,F)}while(!0);lo(),Vr.current=C,Ie=v,Je!==null?t=0:(nt=null,st=0,t=et)}if(t!==0){if(t===2&&(v=Ts(e),v!==0&&(d=v,t=Vo(e,v))),t===1)throw l=Xi,Ln(e,0),vn(e,d),mt(e,Ke()),l;if(t===6)vn(e,d);else{if(v=e.current.alternate,!(d&30)&&!mf(v)&&(t=Zr(e,d),t===2&&(C=Ts(e),C!==0&&(d=C,t=Vo(e,C))),t===1))throw l=Xi,Ln(e,0),vn(e,d),mt(e,Ke()),l;switch(e.finishedWork=v,e.finishedLanes=d,t){case 0:case 1:throw Error(P(345));case 2:Fn(e,pt,Qt);break;case 3:if(vn(e,d),(d&130023424)===d&&(t=Xo+500-Ke(),10<t)){if(ar(e,0)!==0)break;if(v=e.suspendedLanes,(v&d)!==d){ht(),e.pingedLanes|=e.suspendedLanes&v;break}e.timeoutHandle=Qs(Fn.bind(null,e,pt,Qt),t);break}Fn(e,pt,Qt);break;case 4:if(vn(e,d),(d&4194240)===d)break;for(t=e.eventTimes,v=-1;0<d;){var T=31-Mt(d);C=1<<T,T=t[T],T>v&&(v=T),d&=~C}if(d=v,d=Ke()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*pf(d/1960))-d,10<d){e.timeoutHandle=Qs(Fn.bind(null,e,pt,Qt),d);break}Fn(e,pt,Qt);break;case 5:Fn(e,pt,Qt);break;default:throw Error(P(329))}}}return mt(e,Ke()),e.callbackNode===l?Xu.bind(null,e):null}function Vo(e,t){var l=Hi;return e.current.memoizedState.isDehydrated&&(Ln(e,t).flags|=256),e=Zr(e,t),e!==2&&(t=pt,pt=l,t!==null&&Go(t)),e}function Go(e){pt===null?pt=e:pt.push.apply(pt,e)}function mf(e){for(var t=e;;){if(t.flags&16384){var l=t.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var v=l[d],C=v.getSnapshot;v=v.value;try{if(!Lt(C(),v))return!1}catch{return!1}}}if(l=t.child,t.subtreeFlags&16384&&l!==null)l.return=t,t=l;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vn(e,t){for(t&=~Uo,t&=~Gr,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var l=31-Mt(t),d=1<<l;e[l]=-1,t&=~d}}function Hu(e){if(Ie&6)throw Error(P(327));oi();var t=ar(e,0);if(!(t&1))return mt(e,Ke()),null;var l=Zr(e,t);if(e.tag!==0&&l===2){var d=Ts(e);d!==0&&(t=d,l=Vo(e,d))}if(l===1)throw l=Xi,Ln(e,0),vn(e,t),mt(e,Ke()),l;if(l===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fn(e,pt,Qt),mt(e,Ke()),null}function $o(e,t){var l=Ie;Ie|=1;try{return e(t)}finally{Ie=l,Ie===0&&(si=Ke()+500,Or&&cn())}}function Mn(e){pn!==null&&pn.tag===0&&!(Ie&6)&&oi();var t=Ie;Ie|=1;var l=Pt.transition,d=Be;try{if(Pt.transition=null,Be=1,e)return e()}finally{Be=d,Pt.transition=l,Ie=t,!(Ie&6)&&cn()}}function Ko(){wt=ri.current,Ue(ri)}function Ln(e,t){e.finishedWork=null,e.finishedLanes=0;var l=e.timeoutHandle;if(l!==-1&&(e.timeoutHandle=-1,Yh(l)),Je!==null)for(l=Je.return;l!==null;){var d=l;switch(io(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Tr();break;case 3:ti(),Ue(ft),Ue(ot),vo();break;case 5:po(d);break;case 4:ti();break;case 13:Ue(Ye);break;case 19:Ue(Ye);break;case 10:uo(d.type._context);break;case 22:case 23:Ko()}l=l.return}if(nt=e,Je=e=yn(e.current,null),st=wt=t,et=0,Xi=null,Uo=Gr=Dn=0,pt=Hi=null,En!==null){for(t=0;t<En.length;t++)if(l=En[t],d=l.interleaved,d!==null){l.interleaved=null;var v=d.next,C=l.pending;if(C!==null){var T=C.next;C.next=v,d.next=T}l.pending=d}En=null}return e}function Yu(e,t){do{var l=Je;try{if(lo(),Ir.current=zr,jr){for(var d=Ve.memoizedState;d!==null;){var v=d.queue;v!==null&&(v.pending=null),d=d.next}jr=!1}if(bn=0,tt=Ze=Ve=null,ji=!1,Bi=0,Wo.current=null,l===null||l.return===null){et=1,Xi=t,Je=null;break}e:{var C=e,T=l.return,F=l,j=t;if(t=st,F.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var K=j,ce=F,fe=ce.tag;if(!(ce.mode&1)&&(fe===0||fe===11||fe===15)){var ue=ce.alternate;ue?(ce.updateQueue=ue.updateQueue,ce.memoizedState=ue.memoizedState,ce.lanes=ue.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var Se=mu(T);if(Se!==null){Se.flags&=-257,vu(Se,T,F,C,t),Se.mode&1&&pu(C,K,t),t=Se,j=K;var Te=t.updateQueue;if(Te===null){var ke=new Set;ke.add(j),t.updateQueue=ke}else Te.add(j);break e}else{if(!(t&1)){pu(C,K,t),qo();break e}j=Error(P(426))}}else if(Xe&&F.mode&1){var qe=mu(T);if(qe!==null){!(qe.flags&65536)&&(qe.flags|=256),vu(qe,T,F,C,t),oo(ni(j,F));break e}}C=j=ni(j,F),et!==4&&(et=2),Hi===null?Hi=[C]:Hi.push(C),C=T;do{switch(C.tag){case 3:C.flags|=65536,t&=-t,C.lanes|=t;var H=du(C,j,t);zl(C,H);break e;case 1:F=j;var N=C.type,G=C.stateNode;if(!(C.flags&128)&&(typeof N.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(gn===null||!gn.has(G)))){C.flags|=65536,t&=-t,C.lanes|=t;var pe=gu(C,F,t);zl(C,pe);break e}}C=C.return}while(C!==null)}$u(l)}catch(Oe){t=Oe,Je===l&&l!==null&&(Je=l=l.return);continue}break}while(!0)}function Vu(){var e=Vr.current;return Vr.current=zr,e===null?zr:e}function qo(){(et===0||et===3||et===2)&&(et=4),nt===null||!(Dn&268435455)&&!(Gr&268435455)||vn(nt,st)}function Zr(e,t){var l=Ie;Ie|=2;var d=Vu();(nt!==e||st!==t)&&(Qt=null,Ln(e,t));do try{vf();break}catch(v){Yu(e,v)}while(!0);if(lo(),Ie=l,Vr.current=d,Je!==null)throw Error(P(261));return nt=null,st=0,et}function vf(){for(;Je!==null;)Gu(Je)}function yf(){for(;Je!==null&&!Uc();)Gu(Je)}function Gu(e){var t=Qu(e.alternate,e,wt);e.memoizedProps=e.pendingProps,t===null?$u(e):Je=t,Wo.current=null}function $u(e){var t=e;do{var l=t.alternate;if(e=t.return,t.flags&32768){if(l=hf(l,t),l!==null){l.flags&=32767,Je=l;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Je=null;return}}else if(l=cf(l,t,wt),l!==null){Je=l;return}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);et===0&&(et=5)}function Fn(e,t,l){var d=Be,v=Pt.transition;try{Pt.transition=null,Be=1,_f(e,t,l,d)}finally{Pt.transition=v,Be=d}return null}function _f(e,t,l,d){do oi();while(pn!==null);if(Ie&6)throw Error(P(327));l=e.finishedWork;var v=e.finishedLanes;if(l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var C=l.lanes|l.childLanes;if(Jc(e,C),e===nt&&(Je=nt=null,st=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Kr||(Kr=!0,Ju(ir,function(){return oi(),null})),C=(l.flags&15990)!==0,l.subtreeFlags&15990||C){C=Pt.transition,Pt.transition=null;var T=Be;Be=1;var F=Ie;Ie|=4,Wo.current=null,df(e,l),Bu(l,e),Bh(Ks),cr=!!$s,Ks=$s=null,e.current=l,gf(l),Xc(),Ie=F,Be=T,Pt.transition=C}else e.current=l;if(Kr&&(Kr=!1,pn=e,qr=v),C=e.pendingLanes,C===0&&(gn=null),Vc(l.stateNode),mt(e,Ke()),t!==null)for(d=e.onRecoverableError,l=0;l<t.length;l++)v=t[l],d(v.value,{componentStack:v.stack,digest:v.digest});if($r)throw $r=!1,e=Ho,Ho=null,e;return qr&1&&e.tag!==0&&oi(),C=e.pendingLanes,C&1?e===Yo?Yi++:(Yi=0,Yo=e):Yi=0,cn(),null}function oi(){if(pn!==null){var e=Ia(qr),t=Pt.transition,l=Be;try{if(Pt.transition=null,Be=16>e?16:e,pn===null)var d=!1;else{if(e=pn,pn=null,qr=0,Ie&6)throw Error(P(331));var v=Ie;for(Ie|=4,we=e.current;we!==null;){var C=we,T=C.child;if(we.flags&16){var F=C.deletions;if(F!==null){for(var j=0;j<F.length;j++){var K=F[j];for(we=K;we!==null;){var ce=we;switch(ce.tag){case 0:case 11:case 15:Ui(8,ce,C)}var fe=ce.child;if(fe!==null)fe.return=ce,we=fe;else for(;we!==null;){ce=we;var ue=ce.sibling,Se=ce.return;if(Fu(ce),ce===K){we=null;break}if(ue!==null){ue.return=Se,we=ue;break}we=Se}}}var Te=C.alternate;if(Te!==null){var ke=Te.child;if(ke!==null){Te.child=null;do{var qe=ke.sibling;ke.sibling=null,ke=qe}while(ke!==null)}}we=C}}if(C.subtreeFlags&2064&&T!==null)T.return=C,we=T;else e:for(;we!==null;){if(C=we,C.flags&2048)switch(C.tag){case 0:case 11:case 15:Ui(9,C,C.return)}var H=C.sibling;if(H!==null){H.return=C.return,we=H;break e}we=C.return}}var N=e.current;for(we=N;we!==null;){T=we;var G=T.child;if(T.subtreeFlags&2064&&G!==null)G.return=T,we=G;else e:for(T=N;we!==null;){if(F=we,F.flags&2048)try{switch(F.tag){case 0:case 11:case 15:Yr(9,F)}}catch(Oe){$e(F,F.return,Oe)}if(F===T){we=null;break e}var pe=F.sibling;if(pe!==null){pe.return=F.return,we=pe;break e}we=F.return}}if(Ie=v,cn(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(rr,e)}catch{}d=!0}return d}finally{Be=l,Pt.transition=t}}return!1}function Ku(e,t,l){t=ni(l,t),t=du(e,t,1),e=fn(e,t,1),t=ht(),e!==null&&(pi(e,1,t),mt(e,t))}function $e(e,t,l){if(e.tag===3)Ku(e,e,l);else for(;t!==null;){if(t.tag===3){Ku(t,e,l);break}else if(t.tag===1){var d=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(gn===null||!gn.has(d))){e=ni(l,e),e=gu(t,e,1),t=fn(t,e,1),e=ht(),t!==null&&(pi(t,1,e),mt(t,e));break}}t=t.return}}function Cf(e,t,l){var d=e.pingCache;d!==null&&d.delete(t),t=ht(),e.pingedLanes|=e.suspendedLanes&l,nt===e&&(st&l)===l&&(et===4||et===3&&(st&130023424)===st&&500>Ke()-Xo?Ln(e,0):Uo|=l),mt(e,t)}function qu(e,t){t===0&&(e.mode&1?(t=or,or<<=1,!(or&130023424)&&(or=4194304)):t=1);var l=ht();e=$t(e,t),e!==null&&(pi(e,t,l),mt(e,l))}function Sf(e){var t=e.memoizedState,l=0;t!==null&&(l=t.retryLane),qu(e,l)}function wf(e,t){var l=0;switch(e.tag){case 13:var d=e.stateNode,v=e.memoizedState;v!==null&&(l=v.retryLane);break;case 19:d=e.stateNode;break;default:throw Error(P(314))}d!==null&&d.delete(t),qu(e,l)}var Qu;Qu=function(e,t,l){if(e!==null)if(e.memoizedProps!==t.pendingProps||ft.current)gt=!0;else{if(!(e.lanes&l)&&!(t.flags&128))return gt=!1,uf(e,t,l);gt=!!(e.flags&131072)}else gt=!1,Xe&&t.flags&1048576&&Dl(t,Pr,t.index);switch(t.lanes=0,t.tag){case 2:var d=t.type;Xr(e,t),e=t.pendingProps;var v=$n(t,ot.current);ei(t,l),v=Co(null,t,d,e,v,l);var C=So();return t.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(d)?(C=!0,kr(t)):C=!1,t.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,fo(t),v.updater=Wr,t.stateNode=v,v._reactInternals=t,Eo(t,d,e,l),t=Mo(null,t,d,!0,C,l)):(t.tag=0,Xe&&C&&no(t),ct(null,t,v,l),t=t.child),t;case 16:d=t.elementType;e:{switch(Xr(e,t),e=t.pendingProps,v=d._init,d=v(d._payload),t.type=d,v=t.tag=Tf(d),e=At(d,e),v){case 0:t=Do(null,t,d,e,l);break e;case 1:t=xu(null,t,d,e,l);break e;case 11:t=yu(null,t,d,e,l);break e;case 14:t=_u(null,t,d,At(d.type,e),l);break e}throw Error(P(306,d,""))}return t;case 0:return d=t.type,v=t.pendingProps,v=t.elementType===d?v:At(d,v),Do(e,t,d,v,l);case 1:return d=t.type,v=t.pendingProps,v=t.elementType===d?v:At(d,v),xu(e,t,d,v,l);case 3:e:{if(Tu(t),e===null)throw Error(P(387));d=t.pendingProps,C=t.memoizedState,v=C.element,Nl(e,t),Ar(t,d,null,l);var T=t.memoizedState;if(d=T.element,C.isDehydrated)if(C={element:d,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},t.updateQueue.baseState=C,t.memoizedState=C,t.flags&256){v=ni(Error(P(423)),t),t=ku(e,t,d,l,v);break e}else if(d!==v){v=ni(Error(P(424)),t),t=ku(e,t,d,l,v);break e}else for(St=an(t.stateNode.containerInfo.firstChild),Ct=t,Xe=!0,Ft=null,l=jl(t,null,d,l),t.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Qn(),d===v){t=qt(e,t,l);break e}ct(e,t,d,l)}t=t.child}return t;case 5:return Ul(t),e===null&&so(t),d=t.type,v=t.pendingProps,C=e!==null?e.memoizedProps:null,T=v.children,qs(d,v)?T=null:C!==null&&qs(d,C)&&(t.flags|=32),wu(e,t),ct(e,t,T,l),t.child;case 6:return e===null&&so(t),null;case 13:return Ou(e,t,l);case 4:return go(t,t.stateNode.containerInfo),d=t.pendingProps,e===null?t.child=Jn(t,null,d,l):ct(e,t,d,l),t.child;case 11:return d=t.type,v=t.pendingProps,v=t.elementType===d?v:At(d,v),yu(e,t,d,v,l);case 7:return ct(e,t,t.pendingProps,l),t.child;case 8:return ct(e,t,t.pendingProps.children,l),t.child;case 12:return ct(e,t,t.pendingProps.children,l),t.child;case 10:e:{if(d=t.type._context,v=t.pendingProps,C=t.memoizedProps,T=v.value,ze(Mr,d._currentValue),d._currentValue=T,C!==null)if(Lt(C.value,T)){if(C.children===v.children&&!ft.current){t=qt(e,t,l);break e}}else for(C=t.child,C!==null&&(C.return=t);C!==null;){var F=C.dependencies;if(F!==null){T=C.child;for(var j=F.firstContext;j!==null;){if(j.context===d){if(C.tag===1){j=Kt(-1,l&-l),j.tag=2;var K=C.updateQueue;if(K!==null){K=K.shared;var ce=K.pending;ce===null?j.next=j:(j.next=ce.next,ce.next=j),K.pending=j}}C.lanes|=l,j=C.alternate,j!==null&&(j.lanes|=l),co(C.return,l,t),F.lanes|=l;break}j=j.next}}else if(C.tag===10)T=C.type===t.type?null:C.child;else if(C.tag===18){if(T=C.return,T===null)throw Error(P(341));T.lanes|=l,F=T.alternate,F!==null&&(F.lanes|=l),co(T,l,t),T=C.sibling}else T=C.child;if(T!==null)T.return=C;else for(T=C;T!==null;){if(T===t){T=null;break}if(C=T.sibling,C!==null){C.return=T.return,T=C;break}T=T.return}C=T}ct(e,t,v.children,l),t=t.child}return t;case 9:return v=t.type,d=t.pendingProps.children,ei(t,l),v=Ot(v),d=d(v),t.flags|=1,ct(e,t,d,l),t.child;case 14:return d=t.type,v=At(d,t.pendingProps),v=At(d.type,v),_u(e,t,d,v,l);case 15:return Cu(e,t,t.type,t.pendingProps,l);case 17:return d=t.type,v=t.pendingProps,v=t.elementType===d?v:At(d,v),Xr(e,t),t.tag=1,dt(d)?(e=!0,kr(t)):e=!1,ei(t,l),hu(t,d,v),Eo(t,d,v,l),Mo(null,t,d,!0,e,l);case 19:return Pu(e,t,l);case 22:return Su(e,t,l)}throw Error(P(156,t.tag))};function Ju(e,t){return Ma(e,t)}function xf(e,t,l,d){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,l,d){return new xf(e,t,l,d)}function Qo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tf(e){if(typeof e=="function")return Qo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ge)return 11;if(e===de)return 14}return 2}function yn(e,t){var l=e.alternate;return l===null?(l=bt(e.tag,t,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=t,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&14680064,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,t=e.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l}function es(e,t,l,d,v,C){var T=2;if(d=e,typeof e=="function")Qo(e)&&(T=1);else if(typeof e=="string")T=5;else e:switch(e){case D:return An(l.children,v,C,t);case A:T=8,v|=8;break;case V:return e=bt(12,l,t,v|2),e.elementType=V,e.lanes=C,e;case me:return e=bt(13,l,t,v),e.elementType=me,e.lanes=C,e;case he:return e=bt(19,l,t,v),e.elementType=he,e.lanes=C,e;case _e:return ts(l,v,C,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:T=10;break e;case oe:T=9;break e;case ge:T=11;break e;case de:T=14;break e;case Ce:T=16,d=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=bt(T,l,t,v),t.elementType=e,t.type=d,t.lanes=C,t}function An(e,t,l,d){return e=bt(7,e,d,t),e.lanes=l,e}function ts(e,t,l,d){return e=bt(22,e,d,t),e.elementType=_e,e.lanes=l,e.stateNode={isHidden:!1},e}function Jo(e,t,l){return e=bt(6,e,null,t),e.lanes=l,e}function Zo(e,t,l){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=l,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kf(e,t,l,d,v){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ks(0),this.expirationTimes=ks(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ks(0),this.identifierPrefix=d,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function ea(e,t,l,d,v,C,T,F,j){return e=new kf(e,t,l,F,j),t===1?(t=1,C===!0&&(t|=8)):t=0,C=bt(3,null,null,t),e.current=C,C.stateNode=e,C.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},fo(C),e}function Of(e,t,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:d==null?null:""+d,children:e,containerInfo:t,implementation:l}}function Zu(e){if(!e)return un;e=e._reactInternals;e:{if(wn(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var l=e.type;if(dt(l))return El(e,l,t)}return t}function ec(e,t,l,d,v,C,T,F,j){return e=ea(l,d,!0,e,v,C,T,F,j),e.context=Zu(null),l=e.current,d=ht(),v=mn(l),C=Kt(d,v),C.callback=t??null,fn(l,C,v),e.current.lanes=v,pi(e,v,d),mt(e,d),e}function ns(e,t,l,d){var v=t.current,C=ht(),T=mn(v);return l=Zu(l),t.context===null?t.context=l:t.pendingContext=l,t=Kt(C,T),t.payload={element:e},d=d===void 0?null:d,d!==null&&(t.callback=d),e=fn(v,t,T),e!==null&&(jt(e,v,T,C),Fr(e,v,T)),T}function is(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<t?l:t}}function ta(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function Ef(){return null}var nc=typeof reportError=="function"?reportError:function(e){console.error(e)};function na(e){this._internalRoot=e}rs.prototype.render=na.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));ns(e,t,null,null)},rs.prototype.unmount=na.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mn(function(){ns(null,e,null,null)}),t[Ht]=null}};function rs(e){this._internalRoot=e}rs.prototype.unstable_scheduleHydration=function(e){if(e){var t=Na();e={blockedOn:null,target:e,priority:t};for(var l=0;l<rn.length&&t!==0&&t<rn[l].priority;l++);rn.splice(l,0,e),l===0&&Ua(e)}};function ia(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ss(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ic(){}function Pf(e,t,l,d,v){if(v){if(typeof d=="function"){var C=d;d=function(){var K=is(T);C.call(K)}}var T=ec(t,d,e,0,null,!1,!1,"",ic);return e._reactRootContainer=T,e[Ht]=T.current,bi(e.nodeType===8?e.parentNode:e),Mn(),T}for(;v=e.lastChild;)e.removeChild(v);if(typeof d=="function"){var F=d;d=function(){var K=is(j);F.call(K)}}var j=ea(e,0,!1,null,null,!1,!1,"",ic);return e._reactRootContainer=j,e[Ht]=j.current,bi(e.nodeType===8?e.parentNode:e),Mn(function(){ns(t,j,l,d)}),j}function os(e,t,l,d,v){var C=l._reactRootContainer;if(C){var T=C;if(typeof v=="function"){var F=v;v=function(){var j=is(T);F.call(j)}}ns(t,T,e,v)}else T=Pf(l,t,e,v,d);return is(T)}ja=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var l=gi(t.pendingLanes);l!==0&&(Os(t,l|1),mt(t,Ke()),!(Ie&6)&&(si=Ke()+500,cn()))}break;case 13:Mn(function(){var d=$t(e,1);if(d!==null){var v=ht();jt(d,e,1,v)}}),ta(e,1)}},Es=function(e){if(e.tag===13){var t=$t(e,134217728);if(t!==null){var l=ht();jt(t,e,134217728,l)}ta(e,134217728)}},Ba=function(e){if(e.tag===13){var t=mn(e),l=$t(e,t);if(l!==null){var d=ht();jt(l,e,t,d)}ta(e,t)}},Na=function(){return Be},za=function(e,t){var l=Be;try{return Be=e,t()}finally{Be=l}},_s=function(e,t,l){switch(t){case"input":if(J(e,l),t=l.name,l.type==="radio"&&t!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<l.length;t++){var d=l[t];if(d!==e&&d.form===e.form){var v=xr(d);if(!v)throw Error(P(90));ve(d),J(d,v)}}}break;case"textarea":Le(e,l);break;case"select":t=l.value,t!=null&&xe(e,!!l.multiple,t,!1)}},Ta=$o,ka=Mn;var bf={usingClientEntryPoint:!1,Events:[Li,Vn,xr,wa,xa,$o]},Vi={findFiberByHostInstance:xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Df={bundleType:Vi.bundleType,version:Vi.version,rendererPackageName:Vi.rendererPackageName,rendererConfig:Vi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ba(e),e===null?null:e.stateNode},findFiberByHostInstance:Vi.findFiberByHostInstance||Ef,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var as=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!as.isDisabled&&as.supportsFiber)try{rr=as.inject(Df),Bt=as}catch{}}return vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bf,vt.createPortal=function(e,t){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ia(t))throw Error(P(200));return Of(e,t,null,l)},vt.createRoot=function(e,t){if(!ia(e))throw Error(P(299));var l=!1,d="",v=nc;return t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(d=t.identifierPrefix),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=ea(e,1,!1,null,null,l,!1,d,v),e[Ht]=t.current,bi(e.nodeType===8?e.parentNode:e),new na(t)},vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=ba(t),e=e===null?null:e.stateNode,e},vt.flushSync=function(e){return Mn(e)},vt.hydrate=function(e,t,l){if(!ss(t))throw Error(P(200));return os(null,e,t,!0,l)},vt.hydrateRoot=function(e,t,l){if(!ia(e))throw Error(P(405));var d=l!=null&&l.hydratedSources||null,v=!1,C="",T=nc;if(l!=null&&(l.unstable_strictMode===!0&&(v=!0),l.identifierPrefix!==void 0&&(C=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),t=ec(t,null,e,1,l??null,v,!1,C,T),e[Ht]=t.current,bi(e),d)for(e=0;e<d.length;e++)l=d[e],v=l._getVersion,v=v(l._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[l,v]:t.mutableSourceEagerHydrationData.push(l,v);return new rs(t)},vt.render=function(e,t,l){if(!ss(t))throw Error(P(200));return os(null,e,t,!1,l)},vt.unmountComponentAtNode=function(e){if(!ss(e))throw Error(P(40));return e._reactRootContainer?(Mn(function(){os(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1},vt.unstable_batchedUpdates=$o,vt.unstable_renderSubtreeIntoContainer=function(e,t,l,d){if(!ss(l))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return os(e,t,l,!1,d)},vt.version="18.3.1-next-f1338f8080-20240426",vt}var hc;function Nf(){if(hc)return oa.exports;hc=1;function w(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w)}catch(p){console.error(p)}}return w(),oa.exports=Bf(),oa.exports}var fc;function zf(){if(fc)return ls;fc=1;var w=Nf();return ls.createRoot=w.createRoot,ls.hydrateRoot=w.hydrateRoot,ls}var Wf=zf(),ae=pa(),$i={},dc;function Uf(){if(dc)return $i;dc=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.parse=ee,$i.serialize=u;const w=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,p=/^[\u0021-\u003A\u003C-\u007E]*$/,P=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,B=/^[\u0020-\u003A\u003D-\u007E]*$/,R=Object.prototype.toString,U=(()=>{const r=function(){};return r.prototype=Object.create(null),r})();function ee(r,n){const o=new U,c=r.length;if(c<2)return o;const s=(n==null?void 0:n.decode)||h;let f=0;do{const m=r.indexOf("=",f);if(m===-1)break;const y=r.indexOf(";",f),_=y===-1?c:y;if(m>_){f=r.lastIndexOf(";",m-1)+1;continue}const S=g(r,f,m),O=a(r,m,S),D=r.slice(S,O);if(o[D]===void 0){let A=g(r,m+1,_),V=a(r,_,A);const q=s(r.slice(A,V));o[D]=q}f=_+1}while(f<c);return o}function g(r,n,o){do{const c=r.charCodeAt(n);if(c!==32&&c!==9)return n}while(++n<o);return o}function a(r,n,o){for(;n>o;){const c=r.charCodeAt(--n);if(c!==32&&c!==9)return n+1}return o}function u(r,n,o){const c=(o==null?void 0:o.encode)||encodeURIComponent;if(!w.test(r))throw new TypeError(`argument name is invalid: ${r}`);const s=c(n);if(!p.test(s))throw new TypeError(`argument val is invalid: ${n}`);let f=r+"="+s;if(!o)return f;if(o.maxAge!==void 0){if(!Number.isInteger(o.maxAge))throw new TypeError(`option maxAge is invalid: ${o.maxAge}`);f+="; Max-Age="+o.maxAge}if(o.domain){if(!P.test(o.domain))throw new TypeError(`option domain is invalid: ${o.domain}`);f+="; Domain="+o.domain}if(o.path){if(!B.test(o.path))throw new TypeError(`option path is invalid: ${o.path}`);f+="; Path="+o.path}if(o.expires){if(!i(o.expires)||!Number.isFinite(o.expires.valueOf()))throw new TypeError(`option expires is invalid: ${o.expires}`);f+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(f+="; HttpOnly"),o.secure&&(f+="; Secure"),o.partitioned&&(f+="; Partitioned"),o.priority)switch(typeof o.priority=="string"?o.priority.toLowerCase():void 0){case"low":f+="; Priority=Low";break;case"medium":f+="; Priority=Medium";break;case"high":f+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${o.priority}`)}if(o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":f+="; SameSite=Strict";break;case"lax":f+="; SameSite=Lax";break;case"none":f+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${o.sameSite}`)}return f}function h(r){if(r.indexOf("%")===-1)return r;try{return decodeURIComponent(r)}catch{return r}}function i(r){return R.call(r)==="[object Date]"}return $i}Uf();/**
 * react-router v7.0.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var gc="popstate";function Xf(w={}){function p(B,R){let{pathname:U,search:ee,hash:g}=B.location;return da("",{pathname:U,search:ee,hash:g},R.state&&R.state.usr||null,R.state&&R.state.key||"default")}function P(B,R){return typeof R=="string"?R:qi(R)}return Yf(p,P,null,w)}function Ge(w,p){if(w===!1||w===null||typeof w>"u")throw new Error(p)}function Sn(w,p){if(!w){typeof console<"u"&&console.warn(p);try{throw new Error(p)}catch{}}}function Hf(){return Math.random().toString(36).substring(2,10)}function pc(w,p){return{usr:w.state,key:w.key,idx:p}}function da(w,p,P=null,B){return{pathname:typeof w=="string"?w:w.pathname,search:"",hash:"",...typeof p=="string"?ai(p):p,state:P,key:p&&p.key||B||Hf()}}function qi({pathname:w="/",search:p="",hash:P=""}){return p&&p!=="?"&&(w+=p.charAt(0)==="?"?p:"?"+p),P&&P!=="#"&&(w+=P.charAt(0)==="#"?P:"#"+P),w}function ai(w){let p={};if(w){let P=w.indexOf("#");P>=0&&(p.hash=w.substring(P),w=w.substring(0,P));let B=w.indexOf("?");B>=0&&(p.search=w.substring(B),w=w.substring(0,B)),w&&(p.pathname=w)}return p}function Yf(w,p,P,B={}){let{window:R=document.defaultView,v5Compat:U=!1}=B,ee=R.history,g="POP",a=null,u=h();u==null&&(u=0,ee.replaceState({...ee.state,idx:u},""));function h(){return(ee.state||{idx:null}).idx}function i(){g="POP";let s=h(),f=s==null?null:s-u;u=s,a&&a({action:g,location:c.location,delta:f})}function r(s,f){g="PUSH";let m=da(c.location,s,f);u=h()+1;let y=pc(m,u),_=c.createHref(m);try{ee.pushState(y,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;R.location.assign(_)}U&&a&&a({action:g,location:c.location,delta:1})}function n(s,f){g="REPLACE";let m=da(c.location,s,f);u=h();let y=pc(m,u),_=c.createHref(m);ee.replaceState(y,"",_),U&&a&&a({action:g,location:c.location,delta:0})}function o(s){let f=R.location.origin!=="null"?R.location.origin:R.location.href,m=typeof s=="string"?s:qi(s);return m=m.replace(/ $/,"%20"),Ge(f,`No window.location.(origin|href) available to create URL for href: ${m}`),new URL(m,f)}let c={get action(){return g},get location(){return w(R,ee)},listen(s){if(a)throw new Error("A history only accepts one active listener");return R.addEventListener(gc,i),a=s,()=>{R.removeEventListener(gc,i),a=null}},createHref(s){return p(R,s)},createURL:o,encodeLocation(s){let f=o(s);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:r,replace:n,go(s){return ee.go(s)}};return c}function Sc(w,p,P="/"){return Vf(w,p,P,!1)}function Vf(w,p,P,B){let R=typeof p=="string"?ai(p):p,U=Cn(R.pathname||"/",P);if(U==null)return null;let ee=wc(w);Gf(ee);let g=null;for(let a=0;g==null&&a<ee.length;++a){let u=rd(U);g=nd(ee[a],u,B)}return g}function wc(w,p=[],P=[],B=""){let R=(U,ee,g)=>{let a={relativePath:g===void 0?U.path||"":g,caseSensitive:U.caseSensitive===!0,childrenIndex:ee,route:U};a.relativePath.startsWith("/")&&(Ge(a.relativePath.startsWith(B),`Absolute route path "${a.relativePath}" nested under path "${B}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(B.length));let u=Jt([B,a.relativePath]),h=P.concat(a);U.children&&U.children.length>0&&(Ge(U.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),wc(U.children,p,h,u)),!(U.path==null&&!U.index)&&p.push({path:u,score:ed(u,U.index),routesMeta:h})};return w.forEach((U,ee)=>{var g;if(U.path===""||!((g=U.path)!=null&&g.includes("?")))R(U,ee);else for(let a of xc(U.path))R(U,ee,a)}),p}function xc(w){let p=w.split("/");if(p.length===0)return[];let[P,...B]=p,R=P.endsWith("?"),U=P.replace(/\?$/,"");if(B.length===0)return R?[U,""]:[U];let ee=xc(B.join("/")),g=[];return g.push(...ee.map(a=>a===""?U:[U,a].join("/"))),R&&g.push(...ee),g.map(a=>w.startsWith("/")&&a===""?"/":a)}function Gf(w){w.sort((p,P)=>p.score!==P.score?P.score-p.score:td(p.routesMeta.map(B=>B.childrenIndex),P.routesMeta.map(B=>B.childrenIndex)))}var $f=/^:[\w-]+$/,Kf=3,qf=2,Qf=1,Jf=10,Zf=-2,mc=w=>w==="*";function ed(w,p){let P=w.split("/"),B=P.length;return P.some(mc)&&(B+=Zf),p&&(B+=qf),P.filter(R=>!mc(R)).reduce((R,U)=>R+($f.test(U)?Kf:U===""?Qf:Jf),B)}function td(w,p){return w.length===p.length&&w.slice(0,-1).every((B,R)=>B===p[R])?w[w.length-1]-p[p.length-1]:0}function nd(w,p,P=!1){let{routesMeta:B}=w,R={},U="/",ee=[];for(let g=0;g<B.length;++g){let a=B[g],u=g===B.length-1,h=U==="/"?p:p.slice(U.length)||"/",i=fs({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},h),r=a.route;if(!i&&u&&P&&!B[B.length-1].route.index&&(i=fs({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},h)),!i)return null;Object.assign(R,i.params),ee.push({params:R,pathname:Jt([U,i.pathname]),pathnameBase:ld(Jt([U,i.pathnameBase])),route:r}),i.pathnameBase!=="/"&&(U=Jt([U,i.pathnameBase]))}return ee}function fs(w,p){typeof w=="string"&&(w={path:w,caseSensitive:!1,end:!0});let[P,B]=id(w.path,w.caseSensitive,w.end),R=p.match(P);if(!R)return null;let U=R[0],ee=U.replace(/(.)\/+$/,"$1"),g=R.slice(1);return{params:B.reduce((u,{paramName:h,isOptional:i},r)=>{if(h==="*"){let o=g[r]||"";ee=U.slice(0,U.length-o.length).replace(/(.)\/+$/,"$1")}const n=g[r];return i&&!n?u[h]=void 0:u[h]=(n||"").replace(/%2F/g,"/"),u},{}),pathname:U,pathnameBase:ee,pattern:w}}function id(w,p=!1,P=!0){Sn(w==="*"||!w.endsWith("*")||w.endsWith("/*"),`Route path "${w}" will be treated as if it were "${w.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${w.replace(/\*$/,"/*")}".`);let B=[],R="^"+w.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(ee,g,a)=>(B.push({paramName:g,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return w.endsWith("*")?(B.push({paramName:"*"}),R+=w==="*"||w==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):P?R+="\\/*$":w!==""&&w!=="/"&&(R+="(?:(?=\\/|$))"),[new RegExp(R,p?void 0:"i"),B]}function rd(w){try{return w.split("/").map(p=>decodeURIComponent(p).replace(/\//g,"%2F")).join("/")}catch(p){return Sn(!1,`The URL path "${w}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${p}).`),w}}function Cn(w,p){if(p==="/")return w;if(!w.toLowerCase().startsWith(p.toLowerCase()))return null;let P=p.endsWith("/")?p.length-1:p.length,B=w.charAt(P);return B&&B!=="/"?null:w.slice(P)||"/"}function sd(w,p="/"){let{pathname:P,search:B="",hash:R=""}=typeof w=="string"?ai(w):w;return{pathname:P?P.startsWith("/")?P:od(P,p):p,search:ud(B),hash:cd(R)}}function od(w,p){let P=p.replace(/\/+$/,"").split("/");return w.split("/").forEach(R=>{R===".."?P.length>1&&P.pop():R!=="."&&P.push(R)}),P.length>1?P.join("/"):"/"}function ua(w,p,P,B){return`Cannot include a '${w}' character in a manually specified \`to.${p}\` field [${JSON.stringify(B)}].  Please separate it out to the \`to.${P}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ad(w){return w.filter((p,P)=>P===0||p.route.path&&p.route.path.length>0)}function Tc(w){let p=ad(w);return p.map((P,B)=>B===p.length-1?P.pathname:P.pathnameBase)}function kc(w,p,P,B=!1){let R;typeof w=="string"?R=ai(w):(R={...w},Ge(!R.pathname||!R.pathname.includes("?"),ua("?","pathname","search",R)),Ge(!R.pathname||!R.pathname.includes("#"),ua("#","pathname","hash",R)),Ge(!R.search||!R.search.includes("#"),ua("#","search","hash",R)));let U=w===""||R.pathname==="",ee=U?"/":R.pathname,g;if(ee==null)g=P;else{let i=p.length-1;if(!B&&ee.startsWith("..")){let r=ee.split("/");for(;r[0]==="..";)r.shift(),i-=1;R.pathname=r.join("/")}g=i>=0?p[i]:"/"}let a=sd(R,g),u=ee&&ee!=="/"&&ee.endsWith("/"),h=(U||ee===".")&&P.endsWith("/");return!a.pathname.endsWith("/")&&(u||h)&&(a.pathname+="/"),a}var Jt=w=>w.join("/").replace(/\/\/+/g,"/"),ld=w=>w.replace(/\/+$/,"").replace(/^\/*/,"/"),ud=w=>!w||w==="?"?"":w.startsWith("?")?w:"?"+w,cd=w=>!w||w==="#"?"":w.startsWith("#")?w:"#"+w;function hd(w){return w!=null&&typeof w.status=="number"&&typeof w.statusText=="string"&&typeof w.internal=="boolean"&&"data"in w}var Oc=["POST","PUT","PATCH","DELETE"];new Set(Oc);var fd=["GET",...Oc];new Set(fd);var li=ae.createContext(null);li.displayName="DataRouter";var ds=ae.createContext(null);ds.displayName="DataRouterState";var Ec=ae.createContext({isTransitioning:!1});Ec.displayName="ViewTransition";var dd=ae.createContext(new Map);dd.displayName="Fetchers";var gd=ae.createContext(null);gd.displayName="Await";var Xt=ae.createContext(null);Xt.displayName="Navigation";var Qi=ae.createContext(null);Qi.displayName="Location";var Zt=ae.createContext({outlet:null,matches:[],isDataRoute:!1});Zt.displayName="Route";var ma=ae.createContext(null);ma.displayName="RouteError";function pd(w,{relative:p}={}){Ge(Ji(),"useHref() may be used only in the context of a <Router> component.");let{basename:P,navigator:B}=ae.useContext(Xt),{hash:R,pathname:U,search:ee}=Zi(w,{relative:p}),g=U;return P!=="/"&&(g=U==="/"?P:Jt([P,U])),B.createHref({pathname:g,search:ee,hash:R})}function Ji(){return ae.useContext(Qi)!=null}function In(){return Ge(Ji(),"useLocation() may be used only in the context of a <Router> component."),ae.useContext(Qi).location}var Pc="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bc(w){ae.useContext(Xt).static||ae.useLayoutEffect(w)}function md(){let{isDataRoute:w}=ae.useContext(Zt);return w?bd():vd()}function vd(){Ge(Ji(),"useNavigate() may be used only in the context of a <Router> component.");let w=ae.useContext(li),{basename:p,navigator:P}=ae.useContext(Xt),{matches:B}=ae.useContext(Zt),{pathname:R}=In(),U=JSON.stringify(Tc(B)),ee=ae.useRef(!1);return bc(()=>{ee.current=!0}),ae.useCallback((a,u={})=>{if(Sn(ee.current,Pc),!ee.current)return;if(typeof a=="number"){P.go(a);return}let h=kc(a,JSON.parse(U),R,u.relative==="path");w==null&&p!=="/"&&(h.pathname=h.pathname==="/"?p:Jt([p,h.pathname])),(u.replace?P.replace:P.push)(h,u.state,u)},[p,P,U,R,w])}ae.createContext(null);function Zi(w,{relative:p}={}){let{matches:P}=ae.useContext(Zt),{pathname:B}=In(),R=JSON.stringify(Tc(P));return ae.useMemo(()=>kc(w,JSON.parse(R),B,p==="path"),[w,R,B,p])}function yd(w,p){return Dc(w,p)}function Dc(w,p,P,B){var c;Ge(Ji(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:R}=ae.useContext(Xt),{matches:U}=ae.useContext(Zt),ee=U[U.length-1],g=ee?ee.params:{};ee&&ee.pathname;let a=ee?ee.pathnameBase:"/";ee&&ee.route;let u=In(),h;if(p){let s=typeof p=="string"?ai(p):p;Ge(a==="/"||((c=s.pathname)==null?void 0:c.startsWith(a)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${a}" but pathname "${s.pathname}" was given in the \`location\` prop.`),h=s}else h=u;let i=h.pathname||"/",r=i;if(a!=="/"){let s=a.replace(/^\//,"").split("/");r="/"+i.replace(/^\//,"").split("/").slice(s.length).join("/")}let n=Sc(w,{pathname:r}),o=xd(n&&n.map(s=>Object.assign({},s,{params:Object.assign({},g,s.params),pathname:Jt([a,R.encodeLocation?R.encodeLocation(s.pathname).pathname:s.pathname]),pathnameBase:s.pathnameBase==="/"?a:Jt([a,R.encodeLocation?R.encodeLocation(s.pathnameBase).pathname:s.pathnameBase])})),U,P,B);return p&&o?ae.createElement(Qi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},o):o}function _d(){let w=Pd(),p=hd(w)?`${w.status} ${w.statusText}`:w instanceof Error?w.message:JSON.stringify(w),P=w instanceof Error?w.stack:null,R={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ae.createElement(ae.Fragment,null,ae.createElement("h2",null,"Unexpected Application Error!"),ae.createElement("h3",{style:{fontStyle:"italic"}},p),P?ae.createElement("pre",{style:R},P):null,null)}var Cd=ae.createElement(_d,null),Sd=class extends ae.Component{constructor(w){super(w),this.state={location:w.location,revalidation:w.revalidation,error:w.error}}static getDerivedStateFromError(w){return{error:w}}static getDerivedStateFromProps(w,p){return p.location!==w.location||p.revalidation!=="idle"&&w.revalidation==="idle"?{error:w.error,location:w.location,revalidation:w.revalidation}:{error:w.error!==void 0?w.error:p.error,location:p.location,revalidation:w.revalidation||p.revalidation}}componentDidCatch(w,p){console.error("React Router caught the following error during render",w,p)}render(){return this.state.error!==void 0?ae.createElement(Zt.Provider,{value:this.props.routeContext},ae.createElement(ma.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wd({routeContext:w,match:p,children:P}){let B=ae.useContext(li);return B&&B.static&&B.staticContext&&(p.route.errorElement||p.route.ErrorBoundary)&&(B.staticContext._deepestRenderedBoundaryId=p.route.id),ae.createElement(Zt.Provider,{value:w},P)}function xd(w,p=[],P=null,B=null){if(w==null){if(!P)return null;if(P.errors)w=P.matches;else if(p.length===0&&!P.initialized&&P.matches.length>0)w=P.matches;else return null}let R=w,U=P==null?void 0:P.errors;if(U!=null){let a=R.findIndex(u=>u.route.id&&(U==null?void 0:U[u.route.id])!==void 0);Ge(a>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(U).join(",")}`),R=R.slice(0,Math.min(R.length,a+1))}let ee=!1,g=-1;if(P)for(let a=0;a<R.length;a++){let u=R[a];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(g=a),u.route.id){let{loaderData:h,errors:i}=P,r=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!i||i[u.route.id]===void 0);if(u.route.lazy||r){ee=!0,g>=0?R=R.slice(0,g+1):R=[R[0]];break}}}return R.reduceRight((a,u,h)=>{let i,r=!1,n=null,o=null;P&&(i=U&&u.route.id?U[u.route.id]:void 0,n=u.route.errorElement||Cd,ee&&(g<0&&h===0?(Dd("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),r=!0,o=null):g===h&&(r=!0,o=u.route.hydrateFallbackElement||null)));let c=p.concat(R.slice(0,h+1)),s=()=>{let f;return i?f=n:r?f=o:u.route.Component?f=ae.createElement(u.route.Component,null):u.route.element?f=u.route.element:f=a,ae.createElement(wd,{match:u,routeContext:{outlet:a,matches:c,isDataRoute:P!=null},children:f})};return P&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?ae.createElement(Sd,{location:P.location,revalidation:P.revalidation,component:n,error:i,children:s(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):s()},null)}function va(w){return`${w} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Td(w){let p=ae.useContext(li);return Ge(p,va(w)),p}function kd(w){let p=ae.useContext(ds);return Ge(p,va(w)),p}function Od(w){let p=ae.useContext(Zt);return Ge(p,va(w)),p}function ya(w){let p=Od(w),P=p.matches[p.matches.length-1];return Ge(P.route.id,`${w} can only be used on routes that contain a unique "id"`),P.route.id}function Ed(){return ya("useRouteId")}function Pd(){var B;let w=ae.useContext(ma),p=kd("useRouteError"),P=ya("useRouteError");return w!==void 0?w:(B=p.errors)==null?void 0:B[P]}function bd(){let{router:w}=Td("useNavigate"),p=ya("useNavigate"),P=ae.useRef(!1);return bc(()=>{P.current=!0}),ae.useCallback(async(R,U={})=>{Sn(P.current,Pc),P.current&&(typeof R=="number"?w.navigate(R):await w.navigate(R,{fromRouteId:p,...U}))},[w,p])}var vc={};function Dd(w,p,P){vc[w]||(vc[w]=!0,Sn(!1,P))}ae.memo(Md);function Md({routes:w,future:p,state:P}){return Dc(w,void 0,P,p)}function Mc(w){Ge(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ld({basename:w="/",children:p=null,location:P,navigationType:B="POP",navigator:R,static:U=!1}){Ge(!Ji(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let ee=w.replace(/^\/*/,"/"),g=ae.useMemo(()=>({basename:ee,navigator:R,static:U,future:{}}),[ee,R,U]);typeof P=="string"&&(P=ai(P));let{pathname:a="/",search:u="",hash:h="",state:i=null,key:r="default"}=P,n=ae.useMemo(()=>{let o=Cn(a,ee);return o==null?null:{location:{pathname:o,search:u,hash:h,state:i,key:r},navigationType:B}},[ee,a,u,h,i,r,B]);return Sn(n!=null,`<Router basename="${ee}"> is not able to match the URL "${a}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),n==null?null:ae.createElement(Xt.Provider,{value:g},ae.createElement(Qi.Provider,{children:p,value:n}))}function Fd({children:w,location:p}){return yd(ga(w),p)}function ga(w,p=[]){let P=[];return ae.Children.forEach(w,(B,R)=>{if(!ae.isValidElement(B))return;let U=[...p,R];if(B.type===ae.Fragment){P.push.apply(P,ga(B.props.children,U));return}Ge(B.type===Mc,`[${typeof B.type=="string"?B.type:B.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ge(!B.props.index||!B.props.children,"An index route cannot have child routes.");let ee={id:B.props.id||U.join("-"),caseSensitive:B.props.caseSensitive,element:B.props.element,Component:B.props.Component,index:B.props.index,path:B.props.path,loader:B.props.loader,action:B.props.action,hydrateFallbackElement:B.props.hydrateFallbackElement,HydrateFallback:B.props.HydrateFallback,errorElement:B.props.errorElement,ErrorBoundary:B.props.ErrorBoundary,hasErrorBoundary:B.props.hasErrorBoundary===!0||B.props.ErrorBoundary!=null||B.props.errorElement!=null,shouldRevalidate:B.props.shouldRevalidate,handle:B.props.handle,lazy:B.props.lazy};B.props.children&&(ee.children=ga(B.props.children,U)),P.push(ee)}),P}var cs="get",hs="application/x-www-form-urlencoded";function gs(w){return w!=null&&typeof w.tagName=="string"}function Ad(w){return gs(w)&&w.tagName.toLowerCase()==="button"}function Rd(w){return gs(w)&&w.tagName.toLowerCase()==="form"}function Id(w){return gs(w)&&w.tagName.toLowerCase()==="input"}function jd(w){return!!(w.metaKey||w.altKey||w.ctrlKey||w.shiftKey)}function Bd(w,p){return w.button===0&&(!p||p==="_self")&&!jd(w)}var us=null;function Nd(){if(us===null)try{new FormData(document.createElement("form"),0),us=!1}catch{us=!0}return us}var zd=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ca(w){return w!=null&&!zd.has(w)?(Sn(!1,`"${w}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hs}"`),null):w}function Wd(w,p){let P,B,R,U,ee;if(Rd(w)){let g=w.getAttribute("action");B=g?Cn(g,p):null,P=w.getAttribute("method")||cs,R=ca(w.getAttribute("enctype"))||hs,U=new FormData(w)}else if(Ad(w)||Id(w)&&(w.type==="submit"||w.type==="image")){let g=w.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=w.getAttribute("formaction")||g.getAttribute("action");if(B=a?Cn(a,p):null,P=w.getAttribute("formmethod")||g.getAttribute("method")||cs,R=ca(w.getAttribute("formenctype"))||ca(g.getAttribute("enctype"))||hs,U=new FormData(g,w),!Nd()){let{name:u,type:h,value:i}=w;if(h==="image"){let r=u?`${u}.`:"";U.append(`${r}x`,"0"),U.append(`${r}y`,"0")}else u&&U.append(u,i)}}else{if(gs(w))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');P=cs,B=null,R=hs,ee=w}return U&&R==="text/plain"&&(ee=U,U=void 0),{action:B,method:P.toLowerCase(),encType:R,formData:U,body:ee}}function _a(w,p){if(w===!1||w===null||typeof w>"u")throw new Error(p)}async function Ud(w,p){if(w.id in p)return p[w.id];try{let P=await import(w.module);return p[w.id]=P,P}catch(P){return console.error(`Error loading route module \`${w.module}\`, reloading page...`),console.error(P),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xd(w){return w==null?!1:w.href==null?w.rel==="preload"&&typeof w.imageSrcSet=="string"&&typeof w.imageSizes=="string":typeof w.rel=="string"&&typeof w.href=="string"}async function Hd(w,p,P){let B=await Promise.all(w.map(async R=>{let U=p.routes[R.route.id];if(U){let ee=await Ud(U,P);return ee.links?ee.links():[]}return[]}));return $d(B.flat(1).filter(Xd).filter(R=>R.rel==="stylesheet"||R.rel==="preload").map(R=>R.rel==="stylesheet"?{...R,rel:"prefetch",as:"style"}:{...R,rel:"prefetch"}))}function yc(w,p,P,B,R,U){let ee=(a,u)=>P[u]?a.route.id!==P[u].route.id:!0,g=(a,u)=>{var h;return P[u].pathname!==a.pathname||((h=P[u].route.path)==null?void 0:h.endsWith("*"))&&P[u].params["*"]!==a.params["*"]};return U==="assets"?p.filter((a,u)=>ee(a,u)||g(a,u)):U==="data"?p.filter((a,u)=>{var i;let h=B.routes[a.route.id];if(!h||!h.hasLoader)return!1;if(ee(a,u)||g(a,u))return!0;if(a.route.shouldRevalidate){let r=a.route.shouldRevalidate({currentUrl:new URL(R.pathname+R.search+R.hash,window.origin),currentParams:((i=P[0])==null?void 0:i.params)||{},nextUrl:new URL(w,window.origin),nextParams:a.params,defaultShouldRevalidate:!0});if(typeof r=="boolean")return r}return!0}):[]}function Yd(w,p){return Vd(w.map(P=>{let B=p.routes[P.route.id];if(!B)return[];let R=[B.module];return B.imports&&(R=R.concat(B.imports)),R}).flat(1))}function Vd(w){return[...new Set(w)]}function Gd(w){let p={},P=Object.keys(w).sort();for(let B of P)p[B]=w[B];return p}function $d(w,p){let P=new Set;return new Set(p),w.reduce((B,R)=>{let U=JSON.stringify(Gd(R));return P.has(U)||(P.add(U),B.push({key:U,link:R})),B},[])}function Kd(w){let p=typeof w=="string"?new URL(w,typeof window>"u"?"server://singlefetch/":window.location.origin):w;return p.pathname==="/"?p.pathname="_root.data":p.pathname=`${p.pathname.replace(/\/$/,"")}.data`,p}function qd(){let w=ae.useContext(li);return _a(w,"You must render this element inside a <DataRouterContext.Provider> element"),w}function Qd(){let w=ae.useContext(ds);return _a(w,"You must render this element inside a <DataRouterStateContext.Provider> element"),w}var Ca=ae.createContext(void 0);Ca.displayName="FrameworkContext";function Lc(){let w=ae.useContext(Ca);return _a(w,"You must render this element inside a <HydratedRouter> element"),w}function Jd(w,p){let P=ae.useContext(Ca),[B,R]=ae.useState(!1),[U,ee]=ae.useState(!1),{onFocus:g,onBlur:a,onMouseEnter:u,onMouseLeave:h,onTouchStart:i}=p,r=ae.useRef(null);ae.useEffect(()=>{if(w==="render"&&ee(!0),w==="viewport"){let c=f=>{f.forEach(m=>{ee(m.isIntersecting)})},s=new IntersectionObserver(c,{threshold:.5});return r.current&&s.observe(r.current),()=>{s.disconnect()}}},[w]),ae.useEffect(()=>{if(B){let c=setTimeout(()=>{ee(!0)},100);return()=>{clearTimeout(c)}}},[B]);let n=()=>{R(!0)},o=()=>{R(!1),ee(!1)};return P?w!=="intent"?[U,r,{}]:[U,r,{onFocus:Ki(g,n),onBlur:Ki(a,o),onMouseEnter:Ki(u,n),onMouseLeave:Ki(h,o),onTouchStart:Ki(i,n)}]:[!1,r,{}]}function Ki(w,p){return P=>{w&&w(P),P.defaultPrevented||p(P)}}function Zd({page:w,...p}){let{router:P}=qd(),B=ae.useMemo(()=>Sc(P.routes,w,P.basename),[P.routes,w,P.basename]);return B?ae.createElement(tg,{page:w,matches:B,...p}):(console.warn(`Tried to prefetch ${w} but no routes matched.`),null)}function eg(w){let{manifest:p,routeModules:P}=Lc(),[B,R]=ae.useState([]);return ae.useEffect(()=>{let U=!1;return Hd(w,p,P).then(ee=>{U||R(ee)}),()=>{U=!0}},[w,p,P]),B}function tg({page:w,matches:p,...P}){let B=In(),{manifest:R,routeModules:U}=Lc(),{loaderData:ee,matches:g}=Qd(),a=ae.useMemo(()=>yc(w,p,g,R,B,"data"),[w,p,g,R,B]),u=ae.useMemo(()=>yc(w,p,g,R,B,"assets"),[w,p,g,R,B]),h=ae.useMemo(()=>{if(w===B.pathname+B.search+B.hash)return[];let n=new Set,o=!1;if(p.forEach(s=>{var m;let f=R.routes[s.route.id];!f||!f.hasLoader||(!a.some(y=>y.route.id===s.route.id)&&s.route.id in ee&&((m=U[s.route.id])!=null&&m.shouldRevalidate)||f.hasClientLoader?o=!0:n.add(s.route.id))}),n.size===0)return[];let c=Kd(w);return o&&n.size>0&&c.searchParams.set("_routes",p.filter(s=>n.has(s.route.id)).map(s=>s.route.id).join(",")),[c.pathname+c.search]},[ee,B,R,a,p,w,U]),i=ae.useMemo(()=>Yd(u,R),[u,R]),r=eg(u);return ae.createElement(ae.Fragment,null,h.map(n=>ae.createElement("link",{key:n,rel:"prefetch",as:"fetch",href:n,...P})),i.map(n=>ae.createElement("link",{key:n,rel:"modulepreload",href:n,...P})),r.map(({key:n,link:o})=>ae.createElement("link",{key:n,...o})))}function ng(...w){return p=>{w.forEach(P=>{typeof P=="function"?P(p):P!=null&&(P.current=p)})}}var Fc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Fc&&(window.__reactRouterVersion="7.0.1")}catch{}function ig({basename:w,children:p,window:P}){let B=ae.useRef();B.current==null&&(B.current=Xf({window:P,v5Compat:!0}));let R=B.current,[U,ee]=ae.useState({action:R.action,location:R.location}),g=ae.useCallback(a=>{ae.startTransition(()=>ee(a))},[ee]);return ae.useLayoutEffect(()=>R.listen(g),[R,g]),ae.createElement(Ld,{basename:w,children:p,location:U.location,navigationType:U.action,navigator:R})}var Ac=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rc=ae.forwardRef(function({onClick:p,discover:P="render",prefetch:B="none",relative:R,reloadDocument:U,replace:ee,state:g,target:a,to:u,preventScrollReset:h,viewTransition:i,...r},n){let{basename:o}=ae.useContext(Xt),c=typeof u=="string"&&Ac.test(u),s,f=!1;if(typeof u=="string"&&c&&(s=u,Fc))try{let V=new URL(window.location.href),q=u.startsWith("//")?new URL(V.protocol+u):new URL(u),oe=Cn(q.pathname,o);q.origin===V.origin&&oe!=null?u=oe+q.search+q.hash:f=!0}catch{Sn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let m=pd(u,{relative:R}),[y,_,S]=Jd(B,r),O=ag(u,{replace:ee,state:g,target:a,preventScrollReset:h,relative:R,viewTransition:i});function D(V){p&&p(V),V.defaultPrevented||O(V)}let A=ae.createElement("a",{...r,...S,href:s||m,onClick:f||U?p:D,ref:ng(n,_),target:a,"data-discover":!c&&P==="render"?"true":void 0});return y&&!c?ae.createElement(ae.Fragment,null,A,ae.createElement(Zd,{page:m})):A});Rc.displayName="Link";var rg=ae.forwardRef(function({"aria-current":p="page",caseSensitive:P=!1,className:B="",end:R=!1,style:U,to:ee,viewTransition:g,children:a,...u},h){let i=Zi(ee,{relative:u.relative}),r=In(),n=ae.useContext(ds),{navigator:o,basename:c}=ae.useContext(Xt),s=n!=null&&fg(i)&&g===!0,f=o.encodeLocation?o.encodeLocation(i).pathname:i.pathname,m=r.pathname,y=n&&n.navigation&&n.navigation.location?n.navigation.location.pathname:null;P||(m=m.toLowerCase(),y=y?y.toLowerCase():null,f=f.toLowerCase()),y&&c&&(y=Cn(y,c)||y);const _=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let S=m===f||!R&&m.startsWith(f)&&m.charAt(_)==="/",O=y!=null&&(y===f||!R&&y.startsWith(f)&&y.charAt(f.length)==="/"),D={isActive:S,isPending:O,isTransitioning:s},A=S?p:void 0,V;typeof B=="function"?V=B(D):V=[B,S?"active":null,O?"pending":null,s?"transitioning":null].filter(Boolean).join(" ");let q=typeof U=="function"?U(D):U;return ae.createElement(Rc,{...u,"aria-current":A,className:V,ref:h,style:q,to:ee,viewTransition:g},typeof a=="function"?a(D):a)});rg.displayName="NavLink";var sg=ae.forwardRef(({discover:w="render",fetcherKey:p,navigate:P,reloadDocument:B,replace:R,state:U,method:ee=cs,action:g,onSubmit:a,relative:u,preventScrollReset:h,viewTransition:i,...r},n)=>{let o=cg(),c=hg(g,{relative:u}),s=ee.toLowerCase()==="get"?"get":"post",f=typeof g=="string"&&Ac.test(g),m=y=>{if(a&&a(y),y.defaultPrevented)return;y.preventDefault();let _=y.nativeEvent.submitter,S=(_==null?void 0:_.getAttribute("formmethod"))||ee;o(_||y.currentTarget,{fetcherKey:p,method:S,navigate:P,replace:R,state:U,relative:u,preventScrollReset:h,viewTransition:i})};return ae.createElement("form",{ref:n,method:s,action:c,onSubmit:B?a:m,...r,"data-discover":!f&&w==="render"?"true":void 0})});sg.displayName="Form";function og(w){return`${w} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ic(w){let p=ae.useContext(li);return Ge(p,og(w)),p}function ag(w,{target:p,replace:P,state:B,preventScrollReset:R,relative:U,viewTransition:ee}={}){let g=md(),a=In(),u=Zi(w,{relative:U});return ae.useCallback(h=>{if(Bd(h,p)){h.preventDefault();let i=P!==void 0?P:qi(a)===qi(u);g(w,{replace:i,state:B,preventScrollReset:R,relative:U,viewTransition:ee})}},[a,g,u,P,B,p,w,R,U,ee])}var lg=0,ug=()=>`__${String(++lg)}__`;function cg(){let{router:w}=Ic("useSubmit"),{basename:p}=ae.useContext(Xt),P=Ed();return ae.useCallback(async(B,R={})=>{let{action:U,method:ee,encType:g,formData:a,body:u}=Wd(B,p);if(R.navigate===!1){let h=R.fetcherKey||ug();await w.fetch(h,P,R.action||U,{preventScrollReset:R.preventScrollReset,formData:a,body:u,formMethod:R.method||ee,formEncType:R.encType||g,flushSync:R.flushSync})}else await w.navigate(R.action||U,{preventScrollReset:R.preventScrollReset,formData:a,body:u,formMethod:R.method||ee,formEncType:R.encType||g,replace:R.replace,state:R.state,fromRouteId:P,flushSync:R.flushSync,viewTransition:R.viewTransition})},[w,p,P])}function hg(w,{relative:p}={}){let{basename:P}=ae.useContext(Xt),B=ae.useContext(Zt);Ge(B,"useFormAction must be used inside a RouteContext");let[R]=B.matches.slice(-1),U={...Zi(w||".",{relative:p})},ee=In();if(w==null){U.search=ee.search;let g=new URLSearchParams(U.search),a=g.getAll("index");if(a.some(h=>h==="")){g.delete("index"),a.filter(i=>i).forEach(i=>g.append("index",i));let h=g.toString();U.search=h?`?${h}`:""}}return(!w||w===".")&&R.route.index&&(U.search=U.search?U.search.replace(/^\?/,"?index&"):"?index"),P!=="/"&&(U.pathname=U.pathname==="/"?P:Jt([P,U.pathname])),qi(U)}function fg(w,p={}){let P=ae.useContext(Ec);Ge(P!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:B}=Ic("useViewTransitionState"),R=Zi(w,{relative:p.relative});if(!P.isTransitioning)return!1;let U=Cn(P.currentLocation.pathname,B)||P.currentLocation.pathname,ee=Cn(P.nextLocation.pathname,B)||P.nextLocation.pathname;return fs(R.pathname,ee)!=null||fs(R.pathname,U)!=null}new TextEncoder;var ha={};const dg={},gg=Object.freeze(Object.defineProperty({__proto__:null,default:dg},Symbol.toStringTag,{value:"Module"})),fa=Lf(gg);var _c;function pg(){return _c||(_c=1,function(w){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var p=p||{version:"5.4.2"};if(w.fabric=p,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?p.document=document:p.document=document.implementation.createHTMLDocument(""),p.window=window;else{var P=fa,B=new P.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;p.document=B.document,p.jsdomImplForWrapper=fa.implForWrapper,p.nodeCanvas=fa.Canvas,p.window=B,DOMParser=p.window.DOMParser}p.isTouchSupported="ontouchstart"in p.window||"ontouchstart"in p.document||p.window&&p.window.navigator&&p.window.navigator.maxTouchPoints>0,p.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",p.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],p.DPI=96,p.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",p.commaWsp="(?:\\s+,?\\s*|,\\s*)",p.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,p.reNonWord=/[ \n\.,;!\?\-]/,p.fontPaths={},p.iMatrix=[1,0,0,1,0,0],p.svgNS="http://www.w3.org/2000/svg",p.perfLimitSizeTotal=2097152,p.maxCacheSideLimit=4096,p.minCacheSideLimit=256,p.charWidthsCache={},p.textureSize=2048,p.disableStyleCopyPaste=!1,p.enableGLFiltering=!0,p.devicePixelRatio=p.window.devicePixelRatio||p.window.webkitDevicePixelRatio||p.window.mozDevicePixelRatio||1,p.browserShadowBlurConstant=1,p.arcToSegmentsCache={},p.boundsOfCurveCache={},p.cachesBoundsOfCurve=!0,p.forceGLPutImageData=!1,p.initFilterBackend=function(){if(p.enableGLFiltering&&p.isWebglSupported&&p.isWebglSupported(p.textureSize))return console.log("max texture size: "+p.maxTextureSize),new p.WebglFilterBackend({tileSize:p.textureSize});if(p.Canvas2dFilterBackend)return new p.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=p),function(){function g(n,o){if(this.__eventListeners[n]){var c=this.__eventListeners[n];o?c[c.indexOf(o)]=!1:p.util.array.fill(c,!1)}}function a(n,o){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var c in n)this.on(c,n[c]);else this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(o);return this}function u(n,o){var c=(function(){o.apply(this,arguments),this.off(n,c)}).bind(this);this.on(n,c)}function h(n,o){if(arguments.length===1)for(var c in n)u.call(this,c,n[c]);else u.call(this,n,o);return this}function i(n,o){if(!this.__eventListeners)return this;if(arguments.length===0)for(n in this.__eventListeners)g.call(this,n);else if(arguments.length===1&&typeof arguments[0]=="object")for(var c in n)g.call(this,c,n[c]);else g.call(this,n,o);return this}function r(n,o){if(!this.__eventListeners)return this;var c=this.__eventListeners[n];if(!c)return this;for(var s=0,f=c.length;s<f;s++)c[s]&&c[s].call(this,o||{});return this.__eventListeners[n]=c.filter(function(m){return m!==!1}),this}p.Observable={fire:r,on:a,once:h,off:i}}(),p.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var g=0,a=arguments.length;g<a;g++)this._onObjectAdded(arguments[g]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(g,a,u){var h=this._objects;return u?h[a]=g:h.splice(a,0,g),this._onObjectAdded&&this._onObjectAdded(g),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var g=this._objects,a,u=!1,h=0,i=arguments.length;h<i;h++)a=g.indexOf(arguments[h]),a!==-1&&(u=!0,g.splice(a,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[h]));return this.renderOnAddRemove&&u&&this.requestRenderAll(),this},forEachObject:function(g,a){for(var u=this.getObjects(),h=0,i=u.length;h<i;h++)g.call(a,u[h],h,u);return this},getObjects:function(g){return typeof g>"u"?this._objects.concat():this._objects.filter(function(a){return a.type===g})},item:function(g){return this._objects[g]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(g,a){return this._objects.indexOf(g)>-1?!0:a?this._objects.some(function(u){return typeof u.contains=="function"&&u.contains(g,!0)}):!1},complexity:function(){return this._objects.reduce(function(g,a){return g+=a.complexity?a.complexity():0,g},0)}},p.CommonMethods={_setOptions:function(g){for(var a in g)this.set(a,g[a])},_initGradient:function(g,a){g&&g.colorStops&&!(g instanceof p.Gradient)&&this.set(a,new p.Gradient(g))},_initPattern:function(g,a,u){g&&g.source&&!(g instanceof p.Pattern)?this.set(a,new p.Pattern(g,u)):u&&u()},_setObject:function(g){for(var a in g)this._set(a,g[a])},set:function(g,a){return typeof g=="object"?this._setObject(g):this._set(g,a),this},_set:function(g,a){this[g]=a},toggle:function(g){var a=this.get(g);return typeof a=="boolean"&&this.set(g,!a),this},get:function(g){return this[g]}},function(g){var a=Math.sqrt,u=Math.atan2,h=Math.pow,i=Math.PI/180,r=Math.PI/2;p.util={cos:function(n){if(n===0)return 1;n<0&&(n=-n);var o=n/r;switch(o){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},sin:function(n){if(n===0)return 0;var o=n/r,c=1;switch(n<0&&(c=-1),o){case 1:return c;case 2:return 0;case 3:return-c}return Math.sin(n)},removeFromArray:function(n,o){var c=n.indexOf(o);return c!==-1&&n.splice(c,1),n},getRandomInt:function(n,o){return Math.floor(Math.random()*(o-n+1))+n},degreesToRadians:function(n){return n*i},radiansToDegrees:function(n){return n/i},rotatePoint:function(n,o,c){var s=new p.Point(n.x-o.x,n.y-o.y),f=p.util.rotateVector(s,c);return new p.Point(f.x,f.y).addEquals(o)},rotateVector:function(n,o){var c=p.util.sin(o),s=p.util.cos(o),f=n.x*s-n.y*c,m=n.x*c+n.y*s;return{x:f,y:m}},createVector:function(n,o){return new p.Point(o.x-n.x,o.y-n.y)},calcAngleBetweenVectors:function(n,o){return Math.acos((n.x*o.x+n.y*o.y)/(Math.hypot(n.x,n.y)*Math.hypot(o.x,o.y)))},getHatVector:function(n){return new p.Point(n.x,n.y).multiply(1/Math.hypot(n.x,n.y))},getBisector:function(n,o,c){var s=p.util.createVector(n,o),f=p.util.createVector(n,c),m=p.util.calcAngleBetweenVectors(s,f),y=p.util.calcAngleBetweenVectors(p.util.rotateVector(s,m),f),_=m*(y===0?1:-1)/2;return{vector:p.util.getHatVector(p.util.rotateVector(s,_)),angle:m}},projectStrokeOnPoints:function(n,o,c){var s=[],f=o.strokeWidth/2,m=o.strokeUniform?new p.Point(1/o.scaleX,1/o.scaleY):new p.Point(1,1),y=function(_){var S=f/Math.hypot(_.x,_.y);return new p.Point(_.x*S*m.x,_.y*S*m.y)};return n.length<=1||n.forEach(function(_,S){var O=new p.Point(_.x,_.y),D,A;S===0?(A=n[S+1],D=c?y(p.util.createVector(A,O)).addEquals(O):n[n.length-1]):S===n.length-1?(D=n[S-1],A=c?y(p.util.createVector(D,O)).addEquals(O):n[0]):(D=n[S-1],A=n[S+1]);var V=p.util.getBisector(O,D,A),q=V.vector,oe=V.angle,ge,me;if(o.strokeLineJoin==="miter"&&(ge=-f/Math.sin(oe/2),me=new p.Point(q.x*ge*m.x,q.y*ge*m.y),Math.hypot(me.x,me.y)/f<=o.strokeMiterLimit)){s.push(O.add(me)),s.push(O.subtract(me));return}ge=-f*Math.SQRT2,me=new p.Point(q.x*ge*m.x,q.y*ge*m.y),s.push(O.add(me)),s.push(O.subtract(me))}),s},transformPoint:function(n,o,c){return c?new p.Point(o[0]*n.x+o[2]*n.y,o[1]*n.x+o[3]*n.y):new p.Point(o[0]*n.x+o[2]*n.y+o[4],o[1]*n.x+o[3]*n.y+o[5])},makeBoundingBoxFromPoints:function(n,o){if(o)for(var c=0;c<n.length;c++)n[c]=p.util.transformPoint(n[c],o);var s=[n[0].x,n[1].x,n[2].x,n[3].x],f=p.util.array.min(s),m=p.util.array.max(s),y=m-f,_=[n[0].y,n[1].y,n[2].y,n[3].y],S=p.util.array.min(_),O=p.util.array.max(_),D=O-S;return{left:f,top:S,width:y,height:D}},invertTransform:function(n){var o=1/(n[0]*n[3]-n[1]*n[2]),c=[o*n[3],-o*n[1],-o*n[2],o*n[0]],s=p.util.transformPoint({x:n[4],y:n[5]},c,!0);return c[4]=-s.x,c[5]=-s.y,c},toFixed:function(n,o){return parseFloat(Number(n).toFixed(o))},parseUnit:function(n,o){var c=/\D{0,2}$/.exec(n),s=parseFloat(n);switch(o||(o=p.Text.DEFAULT_SVG_FONT_SIZE),c[0]){case"mm":return s*p.DPI/25.4;case"cm":return s*p.DPI/2.54;case"in":return s*p.DPI;case"pt":return s*p.DPI/72;case"pc":return s*p.DPI/72*12;case"em":return s*o;default:return s}},falseFunction:function(){return!1},getKlass:function(n,o){return n=p.util.string.camelize(n.charAt(0).toUpperCase()+n.slice(1)),p.util.resolveNamespace(o)[n]},getSvgAttributes:function(n){var o=["instantiated_by_use","style","id","class"];switch(n){case"linearGradient":o=o.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":o=o.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":o=o.concat(["offset","stop-color","stop-opacity"]);break}return o},resolveNamespace:function(n){if(!n)return p;var o=n.split("."),c=o.length,s,f=g||p.window;for(s=0;s<c;++s)f=f[o[s]];return f},loadImage:function(n,o,c,s){if(!n){o&&o.call(c,n);return}var f=p.util.createImage(),m=function(){o&&o.call(c,f,!1),f=f.onload=f.onerror=null};f.onload=m,f.onerror=function(){p.log("Error loading "+f.src),o&&o.call(c,null,!0),f=f.onload=f.onerror=null},n.indexOf("data")!==0&&s!==void 0&&s!==null&&(f.crossOrigin=s),n.substring(0,14)==="data:image/svg"&&(f.onload=null,p.util.loadImageInDom(f,m)),f.src=n},loadImageInDom:function(n,o){var c=p.document.createElement("div");c.style.width=c.style.height="1px",c.style.left=c.style.top="-100%",c.style.position="absolute",c.appendChild(n),p.document.querySelector("body").appendChild(c),n.onload=function(){o(),c.parentNode.removeChild(c),c=null}},enlivenObjects:function(n,o,c,s){n=n||[];var f=[],m=0,y=n.length;function _(){++m===y&&o&&o(f.filter(function(S){return S}))}if(!y){o&&o(f);return}n.forEach(function(S,O){if(!S||!S.type){_();return}var D=p.util.getKlass(S.type,c);D.fromObject(S,function(A,V){V||(f[O]=A),s&&s(S,A,V),_()})})},enlivenObjectEnlivables:function(n,o,c){var s=p.Object.ENLIVEN_PROPS.filter(function(f){return!!n[f]});p.util.enlivenObjects(s.map(function(f){return n[f]}),function(f){var m={};s.forEach(function(y,_){m[y]=f[_],o&&(o[y]=f[_])}),c&&c(m)})},enlivenPatterns:function(n,o){n=n||[];function c(){++f===m&&o&&o(s)}var s=[],f=0,m=n.length;if(!m){o&&o(s);return}n.forEach(function(y,_){y&&y.source?new p.Pattern(y,function(S){s[_]=S,c()}):(s[_]=y,c())})},groupSVGElements:function(n,o,c){var s;return n&&n.length===1?(typeof c<"u"&&(n[0].sourcePath=c),n[0]):(o&&(o.width&&o.height?o.centerPoint={x:o.width/2,y:o.height/2}:(delete o.width,delete o.height)),s=new p.Group(n,o),typeof c<"u"&&(s.sourcePath=c),s)},populateWithProperties:function(n,o,c){if(c&&Array.isArray(c))for(var s=0,f=c.length;s<f;s++)c[s]in n&&(o[c[s]]=n[c[s]])},createCanvasElement:function(){return p.document.createElement("canvas")},copyCanvasElement:function(n){var o=p.util.createCanvasElement();return o.width=n.width,o.height=n.height,o.getContext("2d").drawImage(n,0,0),o},toDataURL:function(n,o,c){return n.toDataURL("image/"+o,c)},createImage:function(){return p.document.createElement("img")},multiplyTransformMatrices:function(n,o,c){return[n[0]*o[0]+n[2]*o[1],n[1]*o[0]+n[3]*o[1],n[0]*o[2]+n[2]*o[3],n[1]*o[2]+n[3]*o[3],c?0:n[0]*o[4]+n[2]*o[5]+n[4],c?0:n[1]*o[4]+n[3]*o[5]+n[5]]},qrDecompose:function(n){var o=u(n[1],n[0]),c=h(n[0],2)+h(n[1],2),s=a(c),f=(n[0]*n[3]-n[2]*n[1])/s,m=u(n[0]*n[2]+n[1]*n[3],c);return{angle:o/i,scaleX:s,scaleY:f,skewX:m/i,skewY:0,translateX:n[4],translateY:n[5]}},calcRotateMatrix:function(n){if(!n.angle)return p.iMatrix.concat();var o=p.util.degreesToRadians(n.angle),c=p.util.cos(o),s=p.util.sin(o);return[c,s,-s,c,0,0]},calcDimensionsMatrix:function(n){var o=typeof n.scaleX>"u"?1:n.scaleX,c=typeof n.scaleY>"u"?1:n.scaleY,s=[n.flipX?-o:o,0,0,n.flipY?-c:c,0,0],f=p.util.multiplyTransformMatrices,m=p.util.degreesToRadians;return n.skewX&&(s=f(s,[1,0,Math.tan(m(n.skewX)),1],!0)),n.skewY&&(s=f(s,[1,Math.tan(m(n.skewY)),0,1],!0)),s},composeMatrix:function(n){var o=[1,0,0,1,n.translateX||0,n.translateY||0],c=p.util.multiplyTransformMatrices;return n.angle&&(o=c(o,p.util.calcRotateMatrix(n))),(n.scaleX!==1||n.scaleY!==1||n.skewX||n.skewY||n.flipX||n.flipY)&&(o=c(o,p.util.calcDimensionsMatrix(n))),o},resetObjectTransform:function(n){n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},saveObjectTransform:function(n){return{scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}},isTransparent:function(n,o,c,s){s>0&&(o>s?o-=s:o=0,c>s?c-=s:c=0);var f=!0,m,y,_=n.getImageData(o,c,s*2||1,s*2||1),S=_.data.length;for(m=3;m<S&&(y=_.data[m],f=y<=0,f!==!1);m+=4);return _=null,f},parsePreserveAspectRatioAttribute:function(n){var o="meet",c="Mid",s="Mid",f=n.split(" "),m;return f&&f.length&&(o=f.pop(),o!=="meet"&&o!=="slice"?(m=o,o="meet"):f.length&&(m=f.pop())),c=m!=="none"?m.slice(1,4):"none",s=m!=="none"?m.slice(5,8):"none",{meetOrSlice:o,alignX:c,alignY:s}},clearFabricFontCache:function(n){n=(n||"").toLowerCase(),n?p.charWidthsCache[n]&&delete p.charWidthsCache[n]:p.charWidthsCache={}},limitDimsByArea:function(n,o){var c=Math.sqrt(o*n),s=Math.floor(o/c);return{x:Math.floor(c),y:s}},capValue:function(n,o,c){return Math.max(n,Math.min(o,c))},findScaleToFit:function(n,o){return Math.min(o.width/n.width,o.height/n.height)},findScaleToCover:function(n,o){return Math.max(o.width/n.width,o.height/n.height)},matrixToSVG:function(n){return"matrix("+n.map(function(o){return p.util.toFixed(o,p.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(n,o){var c=p.util.invertTransform(o),s=p.util.multiplyTransformMatrices(c,n.calcOwnMatrix());p.util.applyTransformToObject(n,s)},addTransformToObject:function(n,o){p.util.applyTransformToObject(n,p.util.multiplyTransformMatrices(o,n.calcOwnMatrix()))},applyTransformToObject:function(n,o){var c=p.util.qrDecompose(o),s=new p.Point(c.translateX,c.translateY);n.flipX=!1,n.flipY=!1,n.set("scaleX",c.scaleX),n.set("scaleY",c.scaleY),n.skewX=c.skewX,n.skewY=c.skewY,n.angle=c.angle,n.setPositionByOrigin(s,"center","center")},sizeAfterTransform:function(n,o,c){var s=n/2,f=o/2,m=[{x:-s,y:-f},{x:s,y:-f},{x:-s,y:f},{x:s,y:f}],y=p.util.calcDimensionsMatrix(c),_=p.util.makeBoundingBoxFromPoints(m,y);return{x:_.width,y:_.height}},mergeClipPaths:function(n,o){var c=n,s=o;c.inverted&&!s.inverted&&(c=o,s=n),p.util.applyTransformToObject(s,p.util.multiplyTransformMatrices(p.util.invertTransform(c.calcTransformMatrix()),s.calcTransformMatrix()));var f=c.inverted&&s.inverted;return f&&(c.inverted=s.inverted=!1),new p.Group([c],{clipPath:s,inverted:f})},hasStyleChanged:function(n,o,c){return c=c||!1,n.fill!==o.fill||n.stroke!==o.stroke||n.strokeWidth!==o.strokeWidth||n.fontSize!==o.fontSize||n.fontFamily!==o.fontFamily||n.fontWeight!==o.fontWeight||n.fontStyle!==o.fontStyle||n.textBackgroundColor!==o.textBackgroundColor||n.deltaY!==o.deltaY||c&&(n.overline!==o.overline||n.underline!==o.underline||n.linethrough!==o.linethrough)},stylesToArray:function(c,o){for(var c=p.util.object.clone(c,!0),s=o.split(`
`),f=-1,m={},y=[],_=0;_<s.length;_++){if(!c[_]){f+=s[_].length;continue}for(var S=0;S<s[_].length;S++){f++;var O=c[_][S];if(O&&Object.keys(O).length>0){var D=p.util.hasStyleChanged(m,O,!0);D?y.push({start:f,end:f+1,style:O}):y[y.length-1].end++}m=O||{}}}return y},stylesFromArray:function(n,o){if(!Array.isArray(n))return n;for(var c=o.split(`
`),s=-1,f=0,m={},y=0;y<c.length;y++)for(var _=0;_<c[y].length;_++)s++,n[f]&&n[f].start<=s&&s<n[f].end&&(m[y]=m[y]||{},m[y][_]=Object.assign({},n[f].style),s===n[f].end-1&&f++);return m}}}(w),function(){var g=Array.prototype.join,a={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},u={m:"l",M:"L"};function h(k,M,x,b,W,L,E,I,z,$,Y){var te=p.util.cos(k),le=p.util.sin(k),ve=p.util.cos(M),Q=p.util.sin(M),X=x*W*ve-b*L*Q+E,ie=b*W*ve+x*L*Q+I,re=$+z*(-x*W*le-b*L*te),J=Y+z*(-b*W*le+x*L*te),se=X+z*(x*W*Q+b*L*ve),ye=ie+z*(b*W*Q-x*L*ve);return["C",re,J,se,ye,X,ie]}function i(k,M,x,b,W,L,E){var I=Math.PI,z=E*I/180,$=p.util.sin(z),Y=p.util.cos(z),te=0,le=0;x=Math.abs(x),b=Math.abs(b);var ve=-Y*k*.5-$*M*.5,Q=-Y*M*.5+$*k*.5,X=x*x,ie=b*b,re=Q*Q,J=ve*ve,se=X*ie-X*re-ie*J,ye=0;if(se<0){var De=Math.sqrt(1-se/(X*ie));x*=De,b*=De}else ye=(W===L?-1:1)*Math.sqrt(se/(X*re+ie*J));var xe=ye*x*Q/b,ne=-ye*b*ve/x,Ee=Y*xe-$*ne+k*.5,Le=$*xe+Y*ne+M*.5,Ae=r(1,0,(ve-xe)/x,(Q-ne)/b),Ne=r((ve-xe)/x,(Q-ne)/b,(-ve-xe)/x,(-Q-ne)/b);L===0&&Ne>0?Ne-=2*I:L===1&&Ne<0&&(Ne+=2*I);for(var Re=Math.ceil(Math.abs(Ne/I*2)),Qe=[],He=Ne/Re,yt=8/3*Math.sin(He/4)*Math.sin(He/4)/Math.sin(He/2),Dt=Ae+He,xt=0;xt<Re;xt++)Qe[xt]=h(Ae,Dt,Y,$,x,b,Ee,Le,yt,te,le),te=Qe[xt][5],le=Qe[xt][6],Ae=Dt,Dt+=He;return Qe}function r(k,M,x,b){var W=Math.atan2(M,k),L=Math.atan2(b,x);return L>=W?L-W:2*Math.PI-(W-L)}function n(k,M,x,b,W,L,E,I){var z;if(p.cachesBoundsOfCurve&&(z=g.call(arguments),p.boundsOfCurveCache[z]))return p.boundsOfCurveCache[z];var $=Math.sqrt,Y=Math.min,te=Math.max,le=Math.abs,ve=[],Q=[[],[]],X,ie,re,J,se,ye,De,xe;ie=6*k-12*x+6*W,X=-3*k+9*x-9*W+3*E,re=3*x-3*k;for(var ne=0;ne<2;++ne){if(ne>0&&(ie=6*M-12*b+6*L,X=-3*M+9*b-9*L+3*I,re=3*b-3*M),le(X)<1e-12){if(le(ie)<1e-12)continue;J=-re/ie,0<J&&J<1&&ve.push(J);continue}De=ie*ie-4*re*X,!(De<0)&&(xe=$(De),se=(-ie+xe)/(2*X),0<se&&se<1&&ve.push(se),ye=(-ie-xe)/(2*X),0<ye&&ye<1&&ve.push(ye))}for(var Ee,Le,Ae=ve.length,Ne=Ae,Re;Ae--;)J=ve[Ae],Re=1-J,Ee=Re*Re*Re*k+3*Re*Re*J*x+3*Re*J*J*W+J*J*J*E,Q[0][Ae]=Ee,Le=Re*Re*Re*M+3*Re*Re*J*b+3*Re*J*J*L+J*J*J*I,Q[1][Ae]=Le;Q[0][Ne]=k,Q[1][Ne]=M,Q[0][Ne+1]=E,Q[1][Ne+1]=I;var Qe=[{x:Y.apply(null,Q[0]),y:Y.apply(null,Q[1])},{x:te.apply(null,Q[0]),y:te.apply(null,Q[1])}];return p.cachesBoundsOfCurve&&(p.boundsOfCurveCache[z]=Qe),Qe}function o(k,M,x){for(var b=x[1],W=x[2],L=x[3],E=x[4],I=x[5],z=x[6],$=x[7],Y=i(z-k,$-M,b,W,E,I,L),te=0,le=Y.length;te<le;te++)Y[te][1]+=k,Y[te][2]+=M,Y[te][3]+=k,Y[te][4]+=M,Y[te][5]+=k,Y[te][6]+=M;return Y}function c(k){var M=0,x=0,b=k.length,W=0,L=0,E,I,z,$=[],Y,te,le;for(I=0;I<b;++I){switch(z=!1,E=k[I].slice(0),E[0]){case"l":E[0]="L",E[1]+=M,E[2]+=x;case"L":M=E[1],x=E[2];break;case"h":E[1]+=M;case"H":E[0]="L",E[2]=x,M=E[1];break;case"v":E[1]+=x;case"V":E[0]="L",x=E[1],E[1]=M,E[2]=x;break;case"m":E[0]="M",E[1]+=M,E[2]+=x;case"M":M=E[1],x=E[2],W=E[1],L=E[2];break;case"c":E[0]="C",E[1]+=M,E[2]+=x,E[3]+=M,E[4]+=x,E[5]+=M,E[6]+=x;case"C":te=E[3],le=E[4],M=E[5],x=E[6];break;case"s":E[0]="S",E[1]+=M,E[2]+=x,E[3]+=M,E[4]+=x;case"S":Y==="C"?(te=2*M-te,le=2*x-le):(te=M,le=x),M=E[3],x=E[4],E[0]="C",E[5]=E[3],E[6]=E[4],E[3]=E[1],E[4]=E[2],E[1]=te,E[2]=le,te=E[3],le=E[4];break;case"q":E[0]="Q",E[1]+=M,E[2]+=x,E[3]+=M,E[4]+=x;case"Q":te=E[1],le=E[2],M=E[3],x=E[4];break;case"t":E[0]="T",E[1]+=M,E[2]+=x;case"T":Y==="Q"?(te=2*M-te,le=2*x-le):(te=M,le=x),E[0]="Q",M=E[1],x=E[2],E[1]=te,E[2]=le,E[3]=M,E[4]=x;break;case"a":E[0]="A",E[6]+=M,E[7]+=x;case"A":z=!0,$=$.concat(o(M,x,E)),M=E[6],x=E[7];break;case"z":case"Z":M=W,x=L;break}z||$.push(E),Y=E[0]}return $}function s(k,M,x,b){return Math.sqrt((x-k)*(x-k)+(b-M)*(b-M))}function f(k){return k*k*k}function m(k){return 3*k*k*(1-k)}function y(k){return 3*k*(1-k)*(1-k)}function _(k){return(1-k)*(1-k)*(1-k)}function S(k,M,x,b,W,L,E,I){return function(z){var $=f(z),Y=m(z),te=y(z),le=_(z);return{x:E*$+W*Y+x*te+k*le,y:I*$+L*Y+b*te+M*le}}}function O(k,M,x,b,W,L,E,I){return function(z){var $=1-z,Y=3*$*$*(x-k)+6*$*z*(W-x)+3*z*z*(E-W),te=3*$*$*(b-M)+6*$*z*(L-b)+3*z*z*(I-L);return Math.atan2(te,Y)}}function D(k){return k*k}function A(k){return 2*k*(1-k)}function V(k){return(1-k)*(1-k)}function q(k,M,x,b,W,L){return function(E){var I=D(E),z=A(E),$=V(E);return{x:W*I+x*z+k*$,y:L*I+b*z+M*$}}}function oe(k,M,x,b,W,L){return function(E){var I=1-E,z=2*I*(x-k)+2*E*(W-x),$=2*I*(b-M)+2*E*(L-b);return Math.atan2($,z)}}function ge(k,M,x){var b={x:M,y:x},W,L=0,E;for(E=1;E<=100;E+=1)W=k(E/100),L+=s(b.x,b.y,W.x,W.y),b=W;return L}function me(k,M){for(var x=0,b=0,W=k.iterator,L={x:k.x,y:k.y},E,I,z=.01,$=k.angleFinder,Y;b<M&&z>1e-4;)E=W(x),Y=x,I=s(L.x,L.y,E.x,E.y),I+b>M?(x-=z,z/=2):(L=E,x+=z,b+=I);return E.angle=$(Y),E}function he(k){for(var M=0,x=k.length,b,W=0,L=0,E=0,I=0,z=[],$,Y,te,le=0;le<x;le++){switch(b=k[le],Y={x:W,y:L,command:b[0]},b[0]){case"M":Y.length=0,E=W=b[1],I=L=b[2];break;case"L":Y.length=s(W,L,b[1],b[2]),W=b[1],L=b[2];break;case"C":$=S(W,L,b[1],b[2],b[3],b[4],b[5],b[6]),te=O(W,L,b[1],b[2],b[3],b[4],b[5],b[6]),Y.iterator=$,Y.angleFinder=te,Y.length=ge($,W,L),W=b[5],L=b[6];break;case"Q":$=q(W,L,b[1],b[2],b[3],b[4]),te=oe(W,L,b[1],b[2],b[3],b[4]),Y.iterator=$,Y.angleFinder=te,Y.length=ge($,W,L),W=b[3],L=b[4];break;case"Z":case"z":Y.destX=E,Y.destY=I,Y.length=s(W,L,E,I),W=E,L=I;break}M+=Y.length,z.push(Y)}return z.push({length:M,x:W,y:L}),z}function de(k,M,x){x||(x=he(k));for(var b=0;M-x[b].length>0&&b<x.length-2;)M-=x[b].length,b++;var W=x[b],L=M/W.length,E=W.command,I=k[b],z;switch(E){case"M":return{x:W.x,y:W.y,angle:0};case"Z":case"z":return z=new p.Point(W.x,W.y).lerp(new p.Point(W.destX,W.destY),L),z.angle=Math.atan2(W.destY-W.y,W.destX-W.x),z;case"L":return z=new p.Point(W.x,W.y).lerp(new p.Point(I[1],I[2]),L),z.angle=Math.atan2(I[2]-W.y,I[1]-W.x),z;case"C":return me(W,M);case"Q":return me(W,M)}}function Ce(k){var M=[],x=[],b,W,L=p.rePathCommand,E="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",I="("+E+")"+p.commaWsp,z="([01])"+p.commaWsp+"?",$=I+"?"+I+"?"+I+z+z+I+"?("+E+")",Y=new RegExp($,"g"),te,le,ve;if(!k||!k.match)return M;ve=k.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var Q=0,X,ie=ve.length;Q<ie;Q++){b=ve[Q],le=b.slice(1).trim(),x.length=0;var re=b.charAt(0);if(X=[re],re.toLowerCase()==="a")for(var J;J=Y.exec(le);)for(var se=1;se<J.length;se++)x.push(J[se]);else for(;te=L.exec(le);)x.push(te[0]);for(var se=0,ye=x.length;se<ye;se++)W=parseFloat(x[se]),isNaN(W)||X.push(W);var De=a[re.toLowerCase()],xe=u[re]||re;if(X.length-1>De)for(var ne=1,Ee=X.length;ne<Ee;ne+=De)M.push([re].concat(X.slice(ne,ne+De))),re=xe;else M.push(X)}return M}function _e(k,M){var x=[],b,W=new p.Point(k[0].x,k[0].y),L=new p.Point(k[1].x,k[1].y),E=k.length,I=1,z=0,$=E>2;for(M=M||0,$&&(I=k[2].x<L.x?-1:k[2].x===L.x?0:1,z=k[2].y<L.y?-1:k[2].y===L.y?0:1),x.push(["M",W.x-I*M,W.y-z*M]),b=1;b<E;b++){if(!W.eq(L)){var Y=W.midPointFrom(L);x.push(["Q",W.x,W.y,Y.x,Y.y])}W=k[b],b+1<k.length&&(L=k[b+1])}return $&&(I=W.x>k[b-2].x?1:W.x===k[b-2].x?0:-1,z=W.y>k[b-2].y?1:W.y===k[b-2].y?0:-1),x.push(["L",W.x+I*M,W.y+z*M]),x}function Z(k,M,x){return x&&(M=p.util.multiplyTransformMatrices(M,[1,0,0,1,-x.x,-x.y])),k.map(function(b){for(var W=b.slice(0),L={},E=1;E<b.length-1;E+=2)L.x=b[E],L.y=b[E+1],L=p.util.transformPoint(L,M),W[E]=L.x,W[E+1]=L.y;return W})}p.util.joinPath=function(k){return k.map(function(M){return M.join(" ")}).join(" ")},p.util.parsePath=Ce,p.util.makePathSimpler=c,p.util.getSmoothPathFromPoints=_e,p.util.getPathSegmentsInfo=he,p.util.getBoundsOfCurve=n,p.util.getPointOnPath=de,p.util.transformPath=Z}(),function(){var g=Array.prototype.slice;function a(n,o){for(var c=g.call(arguments,2),s=[],f=0,m=n.length;f<m;f++)s[f]=c.length?n[f][o].apply(n[f],c):n[f][o].call(n[f]);return s}function u(n,o){return r(n,o,function(c,s){return c>=s})}function h(n,o){return r(n,o,function(c,s){return c<s})}function i(n,o){for(var c=n.length;c--;)n[c]=o;return n}function r(n,o,c){if(!(!n||n.length===0)){var s=n.length-1,f=o?n[s][o]:n[s];if(o)for(;s--;)c(n[s][o],f)&&(f=n[s][o]);else for(;s--;)c(n[s],f)&&(f=n[s]);return f}}p.util.array={fill:i,invoke:a,min:h,max:u}}(),function(){function g(u,h,i){if(i)if(!p.isLikelyNode&&h instanceof Element)u=h;else if(h instanceof Array){u=[];for(var r=0,n=h.length;r<n;r++)u[r]=g({},h[r],i)}else if(h&&typeof h=="object")for(var o in h)o==="canvas"||o==="group"?u[o]=null:h.hasOwnProperty(o)&&(u[o]=g({},h[o],i));else u=h;else for(var o in h)u[o]=h[o];return u}function a(u,h){return g({},u,h)}p.util.object={extend:g,clone:a},p.util.object.extend(p.util,p.Observable)}(),function(){function g(r){return r.replace(/-+(.)?/g,function(n,o){return o?o.toUpperCase():""})}function a(r,n){return r.charAt(0).toUpperCase()+(n?r.slice(1):r.slice(1).toLowerCase())}function u(r){return r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(r){var n=0,o,c=[];for(n=0,o;n<r.length;n++)(o=i(r,n))!==!1&&c.push(o);return c}function i(r,n){var o=r.charCodeAt(n);if(isNaN(o))return"";if(o<55296||o>57343)return r.charAt(n);if(55296<=o&&o<=56319){if(r.length<=n+1)throw"High surrogate without following low surrogate";var c=r.charCodeAt(n+1);if(56320>c||c>57343)throw"High surrogate without following low surrogate";return r.charAt(n)+r.charAt(n+1)}if(n===0)throw"Low surrogate without preceding high surrogate";var s=r.charCodeAt(n-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1}p.util.string={camelize:g,capitalize:a,escapeXml:u,graphemeSplit:h}}(),function(){var g=Array.prototype.slice,a=function(){},u=function(){for(var o in{toString:1})if(o==="toString")return!1;return!0}(),h=function(o,c,s){for(var f in c)f in o.prototype&&typeof o.prototype[f]=="function"&&(c[f]+"").indexOf("callSuper")>-1?o.prototype[f]=function(m){return function(){var y=this.constructor.superclass;this.constructor.superclass=s;var _=c[m].apply(this,arguments);if(this.constructor.superclass=y,m!=="initialize")return _}}(f):o.prototype[f]=c[f],u&&(c.toString!==Object.prototype.toString&&(o.prototype.toString=c.toString),c.valueOf!==Object.prototype.valueOf&&(o.prototype.valueOf=c.valueOf))};function i(){}function r(o){for(var c=null,s=this;s.constructor.superclass;){var f=s.constructor.superclass.prototype[o];if(s[o]!==f){c=f;break}s=s.constructor.superclass.prototype}return c?arguments.length>1?c.apply(this,g.call(arguments,1)):c.call(this):console.log("tried to callSuper "+o+", method not found in prototype chain",this)}function n(){var o=null,c=g.call(arguments,0);typeof c[0]=="function"&&(o=c.shift());function s(){this.initialize.apply(this,arguments)}s.superclass=o,s.subclasses=[],o&&(i.prototype=o.prototype,s.prototype=new i,o.subclasses.push(s));for(var f=0,m=c.length;f<m;f++)h(s,c[f],o);return s.prototype.initialize||(s.prototype.initialize=a),s.prototype.constructor=s,s.prototype.callSuper=r,s}p.util.createClass=n}(),function(){var g=!!p.document.createElement("div").attachEvent,a=["touchstart","touchmove","touchend"];p.util.addListener=function(h,i,r,n){h&&h.addEventListener(i,r,g?!1:n)},p.util.removeListener=function(h,i,r,n){h&&h.removeEventListener(i,r,g?!1:n)};function u(h){var i=h.changedTouches;return i&&i[0]?i[0]:h}p.util.getPointer=function(h){var i=h.target,r=p.util.getScrollLeftTop(i),n=u(h);return{x:n.clientX+r.left,y:n.clientY+r.top}},p.util.isTouchEvent=function(h){return a.indexOf(h.type)>-1||h.pointerType==="touch"}}(),function(){function g(n,o){var c=n.style;if(!c)return n;if(typeof o=="string")return n.style.cssText+=";"+o,o.indexOf("opacity")>-1?r(n,o.match(/opacity:\s*(\d?\.?\d*)/)[1]):n;for(var s in o)if(s==="opacity")r(n,o[s]);else{var f=s==="float"||s==="cssFloat"?typeof c.styleFloat>"u"?"cssFloat":"styleFloat":s;c.setProperty(f,o[s])}return n}var a=p.document.createElement("div"),u=typeof a.style.opacity=="string",h=typeof a.style.filter=="string",i=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,r=function(n){return n};u?r=function(n,o){return n.style.opacity=o,n}:h&&(r=function(n,o){var c=n.style;return n.currentStyle&&!n.currentStyle.hasLayout&&(c.zoom=1),i.test(c.filter)?(o=o>=.9999?"":"alpha(opacity="+o*100+")",c.filter=c.filter.replace(i,o)):c.filter+=" alpha(opacity="+o*100+")",n}),p.util.setStyle=g}(),function(){var g=Array.prototype.slice;function a(_){return typeof _=="string"?p.document.getElementById(_):_}var u,h=function(_){return g.call(_,0)};try{u=h(p.document.childNodes)instanceof Array}catch{}u||(h=function(_){for(var S=new Array(_.length),O=_.length;O--;)S[O]=_[O];return S});function i(_,S){var O=p.document.createElement(_);for(var D in S)D==="class"?O.className=S[D]:D==="for"?O.htmlFor=S[D]:O.setAttribute(D,S[D]);return O}function r(_,S){_&&(" "+_.className+" ").indexOf(" "+S+" ")===-1&&(_.className+=(_.className?" ":"")+S)}function n(_,S,O){return typeof S=="string"&&(S=i(S,O)),_.parentNode&&_.parentNode.replaceChild(S,_),S.appendChild(_),S}function o(_){for(var S=0,O=0,D=p.document.documentElement,A=p.document.body||{scrollLeft:0,scrollTop:0};_&&(_.parentNode||_.host)&&(_=_.parentNode||_.host,_===p.document?(S=A.scrollLeft||D.scrollLeft||0,O=A.scrollTop||D.scrollTop||0):(S+=_.scrollLeft||0,O+=_.scrollTop||0),!(_.nodeType===1&&_.style.position==="fixed")););return{left:S,top:O}}function c(_){var S,O=_&&_.ownerDocument,D={left:0,top:0},A={left:0,top:0},V,q={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!O)return A;for(var oe in q)A[q[oe]]+=parseInt(s(_,oe),10)||0;return S=O.documentElement,typeof _.getBoundingClientRect<"u"&&(D=_.getBoundingClientRect()),V=o(_),{left:D.left+V.left-(S.clientLeft||0)+A.left,top:D.top+V.top-(S.clientTop||0)+A.top}}var s;p.document.defaultView&&p.document.defaultView.getComputedStyle?s=function(_,S){var O=p.document.defaultView.getComputedStyle(_,null);return O?O[S]:void 0}:s=function(_,S){var O=_.style[S];return!O&&_.currentStyle&&(O=_.currentStyle[S]),O},function(){var _=p.document.documentElement.style,S="userSelect"in _?"userSelect":"MozUserSelect"in _?"MozUserSelect":"WebkitUserSelect"in _?"WebkitUserSelect":"KhtmlUserSelect"in _?"KhtmlUserSelect":"";function O(A){return typeof A.onselectstart<"u"&&(A.onselectstart=p.util.falseFunction),S?A.style[S]="none":typeof A.unselectable=="string"&&(A.unselectable="on"),A}function D(A){return typeof A.onselectstart<"u"&&(A.onselectstart=null),S?A.style[S]="":typeof A.unselectable=="string"&&(A.unselectable=""),A}p.util.makeElementUnselectable=O,p.util.makeElementSelectable=D}();function f(_){var S=p.jsdomImplForWrapper(_);return S._canvas||S._image}function m(_){if(p.isLikelyNode){var S=p.jsdomImplForWrapper(_);S&&(S._image=null,S._canvas=null,S._currentSrc=null,S._attributes=null,S._classList=null)}}function y(_,S){_.imageSmoothingEnabled=_.imageSmoothingEnabled||_.webkitImageSmoothingEnabled||_.mozImageSmoothingEnabled||_.msImageSmoothingEnabled||_.oImageSmoothingEnabled,_.imageSmoothingEnabled=S}p.util.setImageSmoothing=y,p.util.getById=a,p.util.toArray=h,p.util.addClass=r,p.util.makeElement=i,p.util.wrapElement=n,p.util.getScrollLeftTop=o,p.util.getElementOffset=c,p.util.getNodeCanvas=f,p.util.cleanUpJsdomNode=m}(),function(){function g(h,i){return h+(/\?/.test(h)?"&":"?")+i}function a(){}function u(h,i){i||(i={});var r=i.method?i.method.toUpperCase():"GET",n=i.onComplete||function(){},o=new p.window.XMLHttpRequest,c=i.body||i.parameters;return o.onreadystatechange=function(){o.readyState===4&&(n(o),o.onreadystatechange=a)},r==="GET"&&(c=null,typeof i.parameters=="string"&&(h=g(h,i.parameters))),o.open(r,h,!0),(r==="POST"||r==="PUT")&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(c),o}p.util.request=u}(),p.log=console.log,p.warn=console.warn,function(){var g=p.util.object.extend,a=p.util.object.clone,u=[];p.util.object.extend(u,{cancelAll:function(){var f=this.splice(0);return f.forEach(function(m){m.cancel()}),f},cancelByCanvas:function(f){if(!f)return[];var m=this.filter(function(y){return typeof y.target=="object"&&y.target.canvas===f});return m.forEach(function(y){y.cancel()}),m},cancelByTarget:function(f){var m=this.findAnimationsByTarget(f);return m.forEach(function(y){y.cancel()}),m},findAnimationIndex:function(f){return this.indexOf(this.findAnimation(f))},findAnimation:function(f){return this.find(function(m){return m.cancel===f})},findAnimationsByTarget:function(f){return f?this.filter(function(m){return m.target===f}):[]}});function h(){return!1}function i(f,m,y,_){return-y*Math.cos(f/_*(Math.PI/2))+y+m}function r(f){f||(f={});var m=!1,y,_=function(){var S=p.runningAnimations.indexOf(y);return S>-1&&p.runningAnimations.splice(S,1)[0]};return y=g(a(f),{cancel:function(){return m=!0,_()},currentValue:"startValue"in f?f.startValue:0,completionRate:0,durationRate:0}),p.runningAnimations.push(y),c(function(S){var O=S||+new Date,D=f.duration||500,A=O+D,V,q=f.onChange||h,oe=f.abort||h,ge=f.onComplete||h,me=f.easing||i,he="startValue"in f?f.startValue.length>0:!1,de="startValue"in f?f.startValue:0,Ce="endValue"in f?f.endValue:100,_e=f.byValue||(he?de.map(function(Z,k){return Ce[k]-de[k]}):Ce-de);f.onStart&&f.onStart(),function Z(k){V=k||+new Date;var M=V>A?D:V-O,x=M/D,b=he?de.map(function(L,E){return me(M,de[E],_e[E],D)}):me(M,de,_e,D),W=Math.abs(he?(b[0]-de[0])/_e[0]:(b-de)/_e);if(y.currentValue=he?b.slice():b,y.completionRate=W,y.durationRate=x,!m){if(oe(b,W,x)){_();return}if(V>A){y.currentValue=he?Ce.slice():Ce,y.completionRate=1,y.durationRate=1,q(he?Ce.slice():Ce,1,1),ge(Ce,1,1),_();return}else q(b,W,x),c(Z)}}(O)}),y.cancel}var n=p.window.requestAnimationFrame||p.window.webkitRequestAnimationFrame||p.window.mozRequestAnimationFrame||p.window.oRequestAnimationFrame||p.window.msRequestAnimationFrame||function(f){return p.window.setTimeout(f,1e3/60)},o=p.window.cancelAnimationFrame||p.window.clearTimeout;function c(){return n.apply(p.window,arguments)}function s(){return o.apply(p.window,arguments)}p.util.animate=r,p.util.requestAnimFrame=c,p.util.cancelAnimFrame=s,p.runningAnimations=u}(),function(){function g(u,h,i){var r="rgba("+parseInt(u[0]+i*(h[0]-u[0]),10)+","+parseInt(u[1]+i*(h[1]-u[1]),10)+","+parseInt(u[2]+i*(h[2]-u[2]),10);return r+=","+(u&&h?parseFloat(u[3]+i*(h[3]-u[3])):1),r+=")",r}function a(u,h,i,r){var n=new p.Color(u).getSource(),o=new p.Color(h).getSource(),c=r.onComplete,s=r.onChange;return r=r||{},p.util.animate(p.util.object.extend(r,{duration:i||500,startValue:n,endValue:o,byValue:o,easing:function(f,m,y,_){var S=r.colorEasing?r.colorEasing(f,_):1-Math.cos(f/_*(Math.PI/2));return g(m,y,S)},onComplete:function(f,m,y){if(c)return c(g(o,o,0),m,y)},onChange:function(f,m,y){if(s){if(Array.isArray(f))return s(g(f,f,0),m,y);s(f,m,y)}}}))}p.util.animateColor=a}(),function(){function g(k,M,x,b){return k<Math.abs(M)?(k=M,b=x/4):M===0&&k===0?b=x/(2*Math.PI)*Math.asin(1):b=x/(2*Math.PI)*Math.asin(M/k),{a:k,c:M,p:x,s:b}}function a(k,M,x){return k.a*Math.pow(2,10*(M-=1))*Math.sin((M*x-k.s)*(2*Math.PI)/k.p)}function u(k,M,x,b){return x*((k=k/b-1)*k*k+1)+M}function h(k,M,x,b){return k/=b/2,k<1?x/2*k*k*k+M:x/2*((k-=2)*k*k+2)+M}function i(k,M,x,b){return x*(k/=b)*k*k*k+M}function r(k,M,x,b){return-x*((k=k/b-1)*k*k*k-1)+M}function n(k,M,x,b){return k/=b/2,k<1?x/2*k*k*k*k+M:-x/2*((k-=2)*k*k*k-2)+M}function o(k,M,x,b){return x*(k/=b)*k*k*k*k+M}function c(k,M,x,b){return x*((k=k/b-1)*k*k*k*k+1)+M}function s(k,M,x,b){return k/=b/2,k<1?x/2*k*k*k*k*k+M:x/2*((k-=2)*k*k*k*k+2)+M}function f(k,M,x,b){return-x*Math.cos(k/b*(Math.PI/2))+x+M}function m(k,M,x,b){return x*Math.sin(k/b*(Math.PI/2))+M}function y(k,M,x,b){return-x/2*(Math.cos(Math.PI*k/b)-1)+M}function _(k,M,x,b){return k===0?M:x*Math.pow(2,10*(k/b-1))+M}function S(k,M,x,b){return k===b?M+x:x*(-Math.pow(2,-10*k/b)+1)+M}function O(k,M,x,b){return k===0?M:k===b?M+x:(k/=b/2,k<1?x/2*Math.pow(2,10*(k-1))+M:x/2*(-Math.pow(2,-10*--k)+2)+M)}function D(k,M,x,b){return-x*(Math.sqrt(1-(k/=b)*k)-1)+M}function A(k,M,x,b){return x*Math.sqrt(1-(k=k/b-1)*k)+M}function V(k,M,x,b){return k/=b/2,k<1?-x/2*(Math.sqrt(1-k*k)-1)+M:x/2*(Math.sqrt(1-(k-=2)*k)+1)+M}function q(k,M,x,b){var W=1.70158,L=0,E=x;if(k===0)return M;if(k/=b,k===1)return M+x;L||(L=b*.3);var I=g(E,x,L,W);return-a(I,k,b)+M}function oe(k,M,x,b){var W=1.70158,L=0,E=x;if(k===0)return M;if(k/=b,k===1)return M+x;L||(L=b*.3);var I=g(E,x,L,W);return I.a*Math.pow(2,-10*k)*Math.sin((k*b-I.s)*(2*Math.PI)/I.p)+I.c+M}function ge(k,M,x,b){var W=1.70158,L=0,E=x;if(k===0)return M;if(k/=b/2,k===2)return M+x;L||(L=b*(.3*1.5));var I=g(E,x,L,W);return k<1?-.5*a(I,k,b)+M:I.a*Math.pow(2,-10*(k-=1))*Math.sin((k*b-I.s)*(2*Math.PI)/I.p)*.5+I.c+M}function me(k,M,x,b,W){return W===void 0&&(W=1.70158),x*(k/=b)*k*((W+1)*k-W)+M}function he(k,M,x,b,W){return W===void 0&&(W=1.70158),x*((k=k/b-1)*k*((W+1)*k+W)+1)+M}function de(k,M,x,b,W){return W===void 0&&(W=1.70158),k/=b/2,k<1?x/2*(k*k*(((W*=1.525)+1)*k-W))+M:x/2*((k-=2)*k*(((W*=1.525)+1)*k+W)+2)+M}function Ce(k,M,x,b){return x-_e(b-k,0,x,b)+M}function _e(k,M,x,b){return(k/=b)<1/2.75?x*(7.5625*k*k)+M:k<2/2.75?x*(7.5625*(k-=1.5/2.75)*k+.75)+M:k<2.5/2.75?x*(7.5625*(k-=2.25/2.75)*k+.9375)+M:x*(7.5625*(k-=2.625/2.75)*k+.984375)+M}function Z(k,M,x,b){return k<b/2?Ce(k*2,0,x,b)*.5+M:_e(k*2-b,0,x,b)*.5+x*.5+M}p.util.ease={easeInQuad:function(k,M,x,b){return x*(k/=b)*k+M},easeOutQuad:function(k,M,x,b){return-x*(k/=b)*(k-2)+M},easeInOutQuad:function(k,M,x,b){return k/=b/2,k<1?x/2*k*k+M:-x/2*(--k*(k-2)-1)+M},easeInCubic:function(k,M,x,b){return x*(k/=b)*k*k+M},easeOutCubic:u,easeInOutCubic:h,easeInQuart:i,easeOutQuart:r,easeInOutQuart:n,easeInQuint:o,easeOutQuint:c,easeInOutQuint:s,easeInSine:f,easeOutSine:m,easeInOutSine:y,easeInExpo:_,easeOutExpo:S,easeInOutExpo:O,easeInCirc:D,easeOutCirc:A,easeInOutCirc:V,easeInElastic:q,easeOutElastic:oe,easeInOutElastic:ge,easeInBack:me,easeOutBack:he,easeInOutBack:de,easeInBounce:Ce,easeOutBounce:_e,easeInOutBounce:Z}}(),function(g){var a=g.fabric||(g.fabric={}),u=a.util.object.extend,h=a.util.object.clone,i=a.util.toFixed,r=a.util.parseUnit,n=a.util.multiplyTransformMatrices,o=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],c=["symbol","image","marker","pattern","view","svg"],s=["pattern","defs","symbol","metadata","clipPath","mask","desc"],f=["symbol","g","a","svg","clipPath","defs"],m={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},y={stroke:"strokeOpacity",fill:"fillOpacity"},_="font-size",S="clip-path";a.svgValidTagNamesRegEx=A(o),a.svgViewBoxElementsRegEx=A(c),a.svgInvalidAncestorsRegEx=A(s),a.svgValidParentsRegEx=A(f),a.cssRules={},a.gradientDefs={},a.clipPaths={};function O(L){return L in m?m[L]:L}function D(L,E,I,z){var $=Array.isArray(E),Y;if((L==="fill"||L==="stroke")&&E==="none")E="";else{if(L==="strokeUniform")return E==="non-scaling-stroke";if(L==="strokeDashArray")E==="none"?E=null:E=E.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(L==="transformMatrix")I&&I.transformMatrix?E=n(I.transformMatrix,a.parseTransformAttribute(E)):E=a.parseTransformAttribute(E);else if(L==="visible")E=E!=="none"&&E!=="hidden",I&&I.visible===!1&&(E=!1);else if(L==="opacity")E=parseFloat(E),I&&typeof I.opacity<"u"&&(E*=I.opacity);else if(L==="textAnchor")E=E==="start"?"left":E==="end"?"right":"center";else if(L==="charSpacing")Y=r(E,z)/z*1e3;else if(L==="paintFirst"){var te=E.indexOf("fill"),le=E.indexOf("stroke"),E="fill";(te>-1&&le>-1&&le<te||te===-1&&le>-1)&&(E="stroke")}else{if(L==="href"||L==="xlink:href"||L==="font")return E;if(L==="imageSmoothing")return E==="optimizeQuality";Y=$?E.map(r):r(E,z)}}return!$&&isNaN(Y)?E:Y}function A(L){return new RegExp("^("+L.join("|")+")\\b","i")}function V(L){for(var E in y)if(!(typeof L[y[E]]>"u"||L[E]==="")){if(typeof L[E]>"u"){if(!a.Object.prototype[E])continue;L[E]=a.Object.prototype[E]}if(L[E].indexOf("url(")!==0){var I=new a.Color(L[E]);L[E]=I.setAlpha(i(I.getAlpha()*L[y[E]],2)).toRgba()}}return L}function q(L,E){var I,z=[],$,Y,te;for(Y=0,te=E.length;Y<te;Y++)I=E[Y],$=L.getElementsByTagName(I),z=z.concat(Array.prototype.slice.call($));return z}a.parseTransformAttribute=function(){function L(ne,Ee){var Le=a.util.cos(Ee[0]),Ae=a.util.sin(Ee[0]),Ne=0,Re=0;Ee.length===3&&(Ne=Ee[1],Re=Ee[2]),ne[0]=Le,ne[1]=Ae,ne[2]=-Ae,ne[3]=Le,ne[4]=Ne-(Le*Ne-Ae*Re),ne[5]=Re-(Ae*Ne+Le*Re)}function E(ne,Ee){var Le=Ee[0],Ae=Ee.length===2?Ee[1]:Ee[0];ne[0]=Le,ne[3]=Ae}function I(ne,Ee,Le){ne[Le]=Math.tan(a.util.degreesToRadians(Ee[0]))}function z(ne,Ee){ne[4]=Ee[0],Ee.length===2&&(ne[5]=Ee[1])}var $=a.iMatrix,Y=a.reNum,te=a.commaWsp,le="(?:(skewX)\\s*\\(\\s*("+Y+")\\s*\\))",ve="(?:(skewY)\\s*\\(\\s*("+Y+")\\s*\\))",Q="(?:(rotate)\\s*\\(\\s*("+Y+")(?:"+te+"("+Y+")"+te+"("+Y+"))?\\s*\\))",X="(?:(scale)\\s*\\(\\s*("+Y+")(?:"+te+"("+Y+"))?\\s*\\))",ie="(?:(translate)\\s*\\(\\s*("+Y+")(?:"+te+"("+Y+"))?\\s*\\))",re="(?:(matrix)\\s*\\(\\s*("+Y+")"+te+"("+Y+")"+te+"("+Y+")"+te+"("+Y+")"+te+"("+Y+")"+te+"("+Y+")\\s*\\))",J="(?:"+re+"|"+ie+"|"+X+"|"+Q+"|"+le+"|"+ve+")",se="(?:"+J+"(?:"+te+"*"+J+")*)",ye="^\\s*(?:"+se+"?)\\s*$",De=new RegExp(ye),xe=new RegExp(J,"g");return function(ne){var Ee=$.concat(),Le=[];if(!ne||ne&&!De.test(ne))return Ee;ne.replace(xe,function(Ne){var Re=new RegExp(J).exec(Ne).filter(function(yt){return!!yt}),Qe=Re[1],He=Re.slice(2).map(parseFloat);switch(Qe){case"translate":z(Ee,He);break;case"rotate":He[0]=a.util.degreesToRadians(He[0]),L(Ee,He);break;case"scale":E(Ee,He);break;case"skewX":I(Ee,He,2);break;case"skewY":I(Ee,He,1);break;case"matrix":Ee=He;break}Le.push(Ee.concat()),Ee=$.concat()});for(var Ae=Le[0];Le.length>1;)Le.shift(),Ae=a.util.multiplyTransformMatrices(Ae,Le[0]);return Ae}}();function oe(L,E){var I,z;L.replace(/;\s*$/,"").split(";").forEach(function($){var Y=$.split(":");I=Y[0].trim().toLowerCase(),z=Y[1].trim(),E[I]=z})}function ge(L,E){var I,z;for(var $ in L)typeof L[$]>"u"||(I=$.toLowerCase(),z=L[$],E[I]=z)}function me(L,E){var I={};for(var z in a.cssRules[E])if(he(L,z.split(" ")))for(var $ in a.cssRules[E][z])I[$]=a.cssRules[E][z][$];return I}function he(L,E){var I,z=!0;return I=Ce(L,E.pop()),I&&E.length&&(z=de(L,E)),I&&z&&E.length===0}function de(L,E){for(var I,z=!0;L.parentNode&&L.parentNode.nodeType===1&&E.length;)z&&(I=E.pop()),L=L.parentNode,z=Ce(L,I);return E.length===0}function Ce(L,E){var I=L.nodeName,z=L.getAttribute("class"),$=L.getAttribute("id"),Y,te;if(Y=new RegExp("^"+I,"i"),E=E.replace(Y,""),$&&E.length&&(Y=new RegExp("#"+$+"(?![a-zA-Z\\-]+)","i"),E=E.replace(Y,"")),z&&E.length)for(z=z.split(" "),te=z.length;te--;)Y=new RegExp("\\."+z[te]+"(?![a-zA-Z\\-]+)","i"),E=E.replace(Y,"");return E.length===0}function _e(L,E){var I;if(L.getElementById&&(I=L.getElementById(E)),I)return I;var z,$,Y,te=L.getElementsByTagName("*");for($=0,Y=te.length;$<Y;$++)if(z=te[$],E===z.getAttribute("id"))return z}function Z(L){for(var E=q(L,["use","svg:use"]),I=0;E.length&&I<E.length;){var z=E[I],$=z.getAttribute("xlink:href")||z.getAttribute("href");if($===null)return;var Y=$.slice(1),te=z.getAttribute("x")||0,le=z.getAttribute("y")||0,ve=_e(L,Y).cloneNode(!0),Q=(ve.getAttribute("transform")||"")+" translate("+te+", "+le+")",X,ie=E.length,re,J,se,ye,De=a.svgNS;if(M(ve),/^svg$/i.test(ve.nodeName)){var xe=ve.ownerDocument.createElementNS(De,"g");for(J=0,se=ve.attributes,ye=se.length;J<ye;J++)re=se.item(J),xe.setAttributeNS(De,re.nodeName,re.nodeValue);for(;ve.firstChild;)xe.appendChild(ve.firstChild);ve=xe}for(J=0,se=z.attributes,ye=se.length;J<ye;J++)re=se.item(J),!(re.nodeName==="x"||re.nodeName==="y"||re.nodeName==="xlink:href"||re.nodeName==="href")&&(re.nodeName==="transform"?Q=re.nodeValue+" "+Q:ve.setAttribute(re.nodeName,re.nodeValue));ve.setAttribute("transform",Q),ve.setAttribute("instantiated_by_use","1"),ve.removeAttribute("id"),X=z.parentNode,X.replaceChild(ve,z),E.length===ie&&I++}}var k=new RegExp("^\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*$");function M(L){if(!a.svgViewBoxElementsRegEx.test(L.nodeName))return{};var E=L.getAttribute("viewBox"),I=1,z=1,$=0,Y=0,te,le,ve,Q,X=L.getAttribute("width"),ie=L.getAttribute("height"),re=L.getAttribute("x")||0,J=L.getAttribute("y")||0,se=L.getAttribute("preserveAspectRatio")||"",ye=!E||!(E=E.match(k)),De=!X||!ie||X==="100%"||ie==="100%",xe=ye&&De,ne={},Ee="",Le=0,Ae=0;if(ne.width=0,ne.height=0,ne.toBeParsed=xe,ye&&(re||J)&&L.parentNode&&L.parentNode.nodeName!=="#document"&&(Ee=" translate("+r(re)+" "+r(J)+") ",ve=(L.getAttribute("transform")||"")+Ee,L.setAttribute("transform",ve),L.removeAttribute("x"),L.removeAttribute("y")),xe)return ne;if(ye)return ne.width=r(X),ne.height=r(ie),ne;if($=-parseFloat(E[1]),Y=-parseFloat(E[2]),te=parseFloat(E[3]),le=parseFloat(E[4]),ne.minX=$,ne.minY=Y,ne.viewBoxWidth=te,ne.viewBoxHeight=le,De?(ne.width=te,ne.height=le):(ne.width=r(X),ne.height=r(ie),I=ne.width/te,z=ne.height/le),se=a.util.parsePreserveAspectRatioAttribute(se),se.alignX!=="none"&&(se.meetOrSlice==="meet"&&(z=I=I>z?z:I),se.meetOrSlice==="slice"&&(z=I=I>z?I:z),Le=ne.width-te*I,Ae=ne.height-le*I,se.alignX==="Mid"&&(Le/=2),se.alignY==="Mid"&&(Ae/=2),se.alignX==="Min"&&(Le=0),se.alignY==="Min"&&(Ae=0)),I===1&&z===1&&$===0&&Y===0&&re===0&&J===0)return ne;if((re||J)&&L.parentNode.nodeName!=="#document"&&(Ee=" translate("+r(re)+" "+r(J)+") "),ve=Ee+" matrix("+I+" 0 0 "+z+" "+($*I+Le)+" "+(Y*z+Ae)+") ",L.nodeName==="svg"){for(Q=L.ownerDocument.createElementNS(a.svgNS,"g");L.firstChild;)Q.appendChild(L.firstChild);L.appendChild(Q)}else Q=L,Q.removeAttribute("x"),Q.removeAttribute("y"),ve=Q.getAttribute("transform")+ve;return Q.setAttribute("transform",ve),ne}function x(L,E){for(;L&&(L=L.parentNode);)if(L.nodeName&&E.test(L.nodeName.replace("svg:",""))&&!L.getAttribute("instantiated_by_use"))return!0;return!1}a.parseSVGDocument=function(L,E,I,z){if(L){Z(L);var $=a.Object.__uid++,Y,te,le=M(L),ve=a.util.toArray(L.getElementsByTagName("*"));if(le.crossOrigin=z&&z.crossOrigin,le.svgUid=$,ve.length===0&&a.isLikelyNode){ve=L.selectNodes('//*[name(.)!="svg"]');var Q=[];for(Y=0,te=ve.length;Y<te;Y++)Q[Y]=ve[Y];ve=Q}var X=ve.filter(function(re){return M(re),a.svgValidTagNamesRegEx.test(re.nodeName.replace("svg:",""))&&!x(re,a.svgInvalidAncestorsRegEx)});if(!X||X&&!X.length){E&&E([],{});return}var ie={};ve.filter(function(re){return re.nodeName.replace("svg:","")==="clipPath"}).forEach(function(re){var J=re.getAttribute("id");ie[J]=a.util.toArray(re.getElementsByTagName("*")).filter(function(se){return a.svgValidTagNamesRegEx.test(se.nodeName.replace("svg:",""))})}),a.gradientDefs[$]=a.getGradientDefs(L),a.cssRules[$]=a.getCSSRules(L),a.clipPaths[$]=ie,a.parseElements(X,function(re,J){E&&(E(re,le,J,ve),delete a.gradientDefs[$],delete a.cssRules[$],delete a.clipPaths[$])},h(le),I,z)}};function b(L,E){var I=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],z="xlink:href",$=E.getAttribute(z).slice(1),Y=_e(L,$);if(Y&&Y.getAttribute(z)&&b(L,Y),I.forEach(function(le){Y&&!E.hasAttribute(le)&&Y.hasAttribute(le)&&E.setAttribute(le,Y.getAttribute(le))}),!E.children.length)for(var te=Y.cloneNode(!0);te.firstChild;)E.appendChild(te.firstChild);E.removeAttribute(z)}var W=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+a.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+a.reNum+"))?\\s+(.*)");u(a,{parseFontDeclaration:function(L,E){var I=L.match(W);if(I){var z=I[1],$=I[3],Y=I[4],te=I[5],le=I[6];z&&(E.fontStyle=z),$&&(E.fontWeight=isNaN(parseFloat($))?$:parseFloat($)),Y&&(E.fontSize=r(Y)),le&&(E.fontFamily=le),te&&(E.lineHeight=te==="normal"?1:te)}},getGradientDefs:function(L){var E=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],I=q(L,E),z,$=0,Y={};for($=I.length;$--;)z=I[$],z.getAttribute("xlink:href")&&b(L,z),Y[z.getAttribute("id")]=z;return Y},parseAttributes:function(L,E,I){if(L){var z,$={},Y,te;typeof I>"u"&&(I=L.getAttribute("svgUid")),L.parentNode&&a.svgValidParentsRegEx.test(L.parentNode.nodeName)&&($=a.parseAttributes(L.parentNode,E,I));var le=E.reduce(function(se,ye){return z=L.getAttribute(ye),z&&(se[ye]=z),se},{}),ve=u(me(L,I),a.parseStyleAttribute(L));le=u(le,ve),ve[S]&&L.setAttribute(S,ve[S]),Y=te=$.fontSize||a.Text.DEFAULT_SVG_FONT_SIZE,le[_]&&(le[_]=Y=r(le[_],te));var Q,X,ie={};for(var re in le)Q=O(re),X=D(Q,le[re],$,Y),ie[Q]=X;ie&&ie.font&&a.parseFontDeclaration(ie.font,ie);var J=u($,ie);return a.svgValidParentsRegEx.test(L.nodeName)?J:V(J)}},parseElements:function(L,E,I,z,$){new a.ElementsParser(L,E,I,z,$).parse()},parseStyleAttribute:function(L){var E={},I=L.getAttribute("style");return I&&(typeof I=="string"?oe(I,E):ge(I,E)),E},parsePointsAttribute:function(L){if(!L)return null;L=L.replace(/,/g," ").trim(),L=L.split(/\s+/);var E=[],I,z;for(I=0,z=L.length;I<z;I+=2)E.push({x:parseFloat(L[I]),y:parseFloat(L[I+1])});return E},getCSSRules:function(L){var E=L.getElementsByTagName("style"),I,z,$={},Y;for(I=0,z=E.length;I<z;I++){var te=E[I].textContent;te=te.replace(/\/\*[\s\S]*?\*\//g,""),te.trim()!==""&&(Y=te.split("}"),Y=Y.filter(function(le){return le.trim()}),Y.forEach(function(le){var ve=le.split("{"),Q={},X=ve[1].trim(),ie=X.split(";").filter(function(ye){return ye.trim()});for(I=0,z=ie.length;I<z;I++){var re=ie[I].split(":"),J=re[0].trim(),se=re[1].trim();Q[J]=se}le=ve[0].trim(),le.split(",").forEach(function(ye){ye=ye.replace(/^svg/i,"").trim(),ye!==""&&($[ye]?a.util.object.extend($[ye],Q):$[ye]=a.util.object.clone(Q))})}))}return $},loadSVGFromURL:function(L,E,I,z){L=L.replace(/^\n\s*/,"").trim(),new a.util.request(L,{method:"get",onComplete:$});function $(Y){var te=Y.responseXML;if(!te||!te.documentElement)return E&&E(null),!1;a.parseSVGDocument(te.documentElement,function(le,ve,Q,X){E&&E(le,ve,Q,X)},I,z)}},loadSVGFromString:function(L,E,I,z){var $=new a.window.DOMParser,Y=$.parseFromString(L.trim(),"text/xml");a.parseSVGDocument(Y.documentElement,function(te,le,ve,Q){E(te,le,ve,Q)},I,z)}})}(w),p.ElementsParser=function(g,a,u,h,i,r){this.elements=g,this.callback=a,this.options=u,this.reviver=h,this.svgUid=u&&u.svgUid||0,this.parsingOptions=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=r},function(g){g.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},g.createObjects=function(){var a=this;this.elements.forEach(function(u,h){u.setAttribute("svgUid",a.svgUid),a.createObject(u,h)})},g.findTag=function(a){return p[p.util.string.capitalize(a.tagName.replace("svg:",""))]},g.createObject=function(a,u){var h=this.findTag(a);if(h&&h.fromElement)try{h.fromElement(a,this.createCallback(u,a),this.options)}catch(i){p.log(i)}else this.checkIfDone()},g.createCallback=function(a,u){var h=this;return function(i){var r;h.resolveGradient(i,u,"fill"),h.resolveGradient(i,u,"stroke"),i instanceof p.Image&&i._originalElement&&(r=i.parsePreserveAspectRatioAttribute(u)),i._removeTransformMatrix(r),h.resolveClipPath(i,u),h.reviver&&h.reviver(u,i),h.instances[a]=i,h.checkIfDone()}},g.extractPropertyDefinition=function(a,u,h){var i=a[u],r=this.regexUrl;if(r.test(i)){r.lastIndex=0;var n=r.exec(i)[1];return r.lastIndex=0,p[h][this.svgUid][n]}},g.resolveGradient=function(a,u,h){var i=this.extractPropertyDefinition(a,h,"gradientDefs");if(i){var r=u.getAttribute(h+"-opacity"),n=p.Gradient.fromElement(i,a,r,this.options);a.set(h,n)}},g.createClipPathCallback=function(a,u){return function(h){h._removeTransformMatrix(),h.fillRule=h.clipRule,u.push(h)}},g.resolveClipPath=function(a,u){var h=this.extractPropertyDefinition(a,"clipPath","clipPaths"),i,r,n,o,c,s;if(h){o=[],n=p.util.invertTransform(a.calcTransformMatrix());for(var f=h[0].parentNode,m=u;m.parentNode&&m.getAttribute("clip-path")!==a.clipPath;)m=m.parentNode;m.parentNode.appendChild(f);for(var y=0;y<h.length;y++)i=h[y],r=this.findTag(i),r.fromElement(i,this.createClipPathCallback(a,o),this.options);o.length===1?h=o[0]:h=new p.Group(o),c=p.util.multiplyTransformMatrices(n,h.calcTransformMatrix()),h.clipPath&&this.resolveClipPath(h,m);var s=p.util.qrDecompose(c);h.flipX=!1,h.flipY=!1,h.set("scaleX",s.scaleX),h.set("scaleY",s.scaleY),h.angle=s.angle,h.skewX=s.skewX,h.skewY=0,h.setPositionByOrigin({x:s.translateX,y:s.translateY},"center","center"),a.clipPath=h}else delete a.clipPath},g.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(a){return a!=null}),this.callback(this.instances,this.elements))}}(p.ElementsParser.prototype),function(g){var a=g.fabric||(g.fabric={});if(a.Point){a.warn("fabric.Point is already defined");return}a.Point=u;function u(h,i){this.x=h,this.y=i}u.prototype={type:"point",constructor:u,add:function(h){return new u(this.x+h.x,this.y+h.y)},addEquals:function(h){return this.x+=h.x,this.y+=h.y,this},scalarAdd:function(h){return new u(this.x+h,this.y+h)},scalarAddEquals:function(h){return this.x+=h,this.y+=h,this},subtract:function(h){return new u(this.x-h.x,this.y-h.y)},subtractEquals:function(h){return this.x-=h.x,this.y-=h.y,this},scalarSubtract:function(h){return new u(this.x-h,this.y-h)},scalarSubtractEquals:function(h){return this.x-=h,this.y-=h,this},multiply:function(h){return new u(this.x*h,this.y*h)},multiplyEquals:function(h){return this.x*=h,this.y*=h,this},divide:function(h){return new u(this.x/h,this.y/h)},divideEquals:function(h){return this.x/=h,this.y/=h,this},eq:function(h){return this.x===h.x&&this.y===h.y},lt:function(h){return this.x<h.x&&this.y<h.y},lte:function(h){return this.x<=h.x&&this.y<=h.y},gt:function(h){return this.x>h.x&&this.y>h.y},gte:function(h){return this.x>=h.x&&this.y>=h.y},lerp:function(h,i){return typeof i>"u"&&(i=.5),i=Math.max(Math.min(1,i),0),new u(this.x+(h.x-this.x)*i,this.y+(h.y-this.y)*i)},distanceFrom:function(h){var i=this.x-h.x,r=this.y-h.y;return Math.sqrt(i*i+r*r)},midPointFrom:function(h){return this.lerp(h)},min:function(h){return new u(Math.min(this.x,h.x),Math.min(this.y,h.y))},max:function(h){return new u(Math.max(this.x,h.x),Math.max(this.y,h.y))},toString:function(){return this.x+","+this.y},setXY:function(h,i){return this.x=h,this.y=i,this},setX:function(h){return this.x=h,this},setY:function(h){return this.y=h,this},setFromPoint:function(h){return this.x=h.x,this.y=h.y,this},swap:function(h){var i=this.x,r=this.y;this.x=h.x,this.y=h.y,h.x=i,h.y=r},clone:function(){return new u(this.x,this.y)}}}(w),function(g){var a=g.fabric||(g.fabric={});if(a.Intersection){a.warn("fabric.Intersection is already defined");return}function u(h){this.status=h,this.points=[]}a.Intersection=u,a.Intersection.prototype={constructor:u,appendPoint:function(h){return this.points.push(h),this},appendPoints:function(h){return this.points=this.points.concat(h),this}},a.Intersection.intersectLineLine=function(h,i,r,n){var o,c=(n.x-r.x)*(h.y-r.y)-(n.y-r.y)*(h.x-r.x),s=(i.x-h.x)*(h.y-r.y)-(i.y-h.y)*(h.x-r.x),f=(n.y-r.y)*(i.x-h.x)-(n.x-r.x)*(i.y-h.y);if(f!==0){var m=c/f,y=s/f;0<=m&&m<=1&&0<=y&&y<=1?(o=new u("Intersection"),o.appendPoint(new a.Point(h.x+m*(i.x-h.x),h.y+m*(i.y-h.y)))):o=new u}else c===0||s===0?o=new u("Coincident"):o=new u("Parallel");return o},a.Intersection.intersectLinePolygon=function(h,i,r){var n=new u,o=r.length,c,s,f,m;for(m=0;m<o;m++)c=r[m],s=r[(m+1)%o],f=u.intersectLineLine(h,i,c,s),n.appendPoints(f.points);return n.points.length>0&&(n.status="Intersection"),n},a.Intersection.intersectPolygonPolygon=function(h,i){var r=new u,n=h.length,o;for(o=0;o<n;o++){var c=h[o],s=h[(o+1)%n],f=u.intersectLinePolygon(c,s,i);r.appendPoints(f.points)}return r.points.length>0&&(r.status="Intersection"),r},a.Intersection.intersectPolygonRectangle=function(h,i,r){var n=i.min(r),o=i.max(r),c=new a.Point(o.x,n.y),s=new a.Point(n.x,o.y),f=u.intersectLinePolygon(n,c,h),m=u.intersectLinePolygon(c,o,h),y=u.intersectLinePolygon(o,s,h),_=u.intersectLinePolygon(s,n,h),S=new u;return S.appendPoints(f.points),S.appendPoints(m.points),S.appendPoints(y.points),S.appendPoints(_.points),S.points.length>0&&(S.status="Intersection"),S}}(w),function(g){var a=g.fabric||(g.fabric={});if(a.Color){a.warn("fabric.Color is already defined.");return}function u(i){i?this._tryParsingColor(i):this.setSource([0,0,0,1])}a.Color=u,a.Color.prototype={_tryParsingColor:function(i){var r;i in u.colorNameMap&&(i=u.colorNameMap[i]),i==="transparent"&&(r=[255,255,255,0]),r||(r=u.sourceFromHex(i)),r||(r=u.sourceFromRgb(i)),r||(r=u.sourceFromHsl(i)),r||(r=[0,0,0,1]),r&&this.setSource(r)},_rgbToHsl:function(i,r,n){i/=255,r/=255,n/=255;var o,c,s,f=a.util.array.max([i,r,n]),m=a.util.array.min([i,r,n]);if(s=(f+m)/2,f===m)o=c=0;else{var y=f-m;switch(c=s>.5?y/(2-f-m):y/(f+m),f){case i:o=(r-n)/y+(r<n?6:0);break;case r:o=(n-i)/y+2;break;case n:o=(i-r)/y+4;break}o/=6}return[Math.round(o*360),Math.round(c*100),Math.round(s*100)]},getSource:function(){return this._source},setSource:function(i){this._source=i},toRgb:function(){var i=this.getSource();return"rgb("+i[0]+","+i[1]+","+i[2]+")"},toRgba:function(){var i=this.getSource();return"rgba("+i[0]+","+i[1]+","+i[2]+","+i[3]+")"},toHsl:function(){var i=this.getSource(),r=this._rgbToHsl(i[0],i[1],i[2]);return"hsl("+r[0]+","+r[1]+"%,"+r[2]+"%)"},toHsla:function(){var i=this.getSource(),r=this._rgbToHsl(i[0],i[1],i[2]);return"hsla("+r[0]+","+r[1]+"%,"+r[2]+"%,"+i[3]+")"},toHex:function(){var i=this.getSource(),r,n,o;return r=i[0].toString(16),r=r.length===1?"0"+r:r,n=i[1].toString(16),n=n.length===1?"0"+n:n,o=i[2].toString(16),o=o.length===1?"0"+o:o,r.toUpperCase()+n.toUpperCase()+o.toUpperCase()},toHexa:function(){var i=this.getSource(),r;return r=Math.round(i[3]*255),r=r.toString(16),r=r.length===1?"0"+r:r,this.toHex()+r.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(i){var r=this.getSource();return r[3]=i,this.setSource(r),this},toGrayscale:function(){var i=this.getSource(),r=parseInt((i[0]*.3+i[1]*.59+i[2]*.11).toFixed(0),10),n=i[3];return this.setSource([r,r,r,n]),this},toBlackWhite:function(i){var r=this.getSource(),n=(r[0]*.3+r[1]*.59+r[2]*.11).toFixed(0),o=r[3];return i=i||127,n=Number(n)<Number(i)?0:255,this.setSource([n,n,n,o]),this},overlayWith:function(i){i instanceof u||(i=new u(i));var r=[],n=this.getAlpha(),o=.5,c=this.getSource(),s=i.getSource(),f;for(f=0;f<3;f++)r.push(Math.round(c[f]*(1-o)+s[f]*o));return r[3]=n,this.setSource(r),this}},a.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,a.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,a.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,a.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function h(i,r,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+(r-i)*6*n:n<1/2?r:n<2/3?i+(r-i)*(2/3-n)*6:i}a.Color.fromRgb=function(i){return u.fromSource(u.sourceFromRgb(i))},a.Color.sourceFromRgb=function(i){var r=i.match(u.reRGBa);if(r){var n=parseInt(r[1],10)/(/%$/.test(r[1])?100:1)*(/%$/.test(r[1])?255:1),o=parseInt(r[2],10)/(/%$/.test(r[2])?100:1)*(/%$/.test(r[2])?255:1),c=parseInt(r[3],10)/(/%$/.test(r[3])?100:1)*(/%$/.test(r[3])?255:1);return[parseInt(n,10),parseInt(o,10),parseInt(c,10),r[4]?parseFloat(r[4]):1]}},a.Color.fromRgba=u.fromRgb,a.Color.fromHsl=function(i){return u.fromSource(u.sourceFromHsl(i))},a.Color.sourceFromHsl=function(i){var r=i.match(u.reHSLa);if(r){var n=(parseFloat(r[1])%360+360)%360/360,o=parseFloat(r[2])/(/%$/.test(r[2])?100:1),c=parseFloat(r[3])/(/%$/.test(r[3])?100:1),s,f,m;if(o===0)s=f=m=c;else{var y=c<=.5?c*(o+1):c+o-c*o,_=c*2-y;s=h(_,y,n+1/3),f=h(_,y,n),m=h(_,y,n-1/3)}return[Math.round(s*255),Math.round(f*255),Math.round(m*255),r[4]?parseFloat(r[4]):1]}},a.Color.fromHsla=u.fromHsl,a.Color.fromHex=function(i){return u.fromSource(u.sourceFromHex(i))},a.Color.sourceFromHex=function(i){if(i.match(u.reHex)){var r=i.slice(i.indexOf("#")+1),n=r.length===3||r.length===4,o=r.length===8||r.length===4,c=n?r.charAt(0)+r.charAt(0):r.substring(0,2),s=n?r.charAt(1)+r.charAt(1):r.substring(2,4),f=n?r.charAt(2)+r.charAt(2):r.substring(4,6),m=o?n?r.charAt(3)+r.charAt(3):r.substring(6,8):"FF";return[parseInt(c,16),parseInt(s,16),parseInt(f,16),parseFloat((parseInt(m,16)/255).toFixed(2))]}},a.Color.fromSource=function(i){var r=new u;return r.setSource(i),r}}(w),function(g){var a=g.fabric||(g.fabric={}),u=["e","se","s","sw","w","nw","n","ne","e"],h=["ns","nesw","ew","nwse"],i={},r="left",n="top",o="right",c="bottom",s="center",f={top:c,bottom:n,left:o,right:r,center:s},m=a.util.radiansToDegrees,y=Math.sign||function(Q){return(Q>0)-(Q<0)||+Q};function _(Q,X){var ie=Q.angle+m(Math.atan2(X.y,X.x))+360;return Math.round(ie%360/45)}function S(Q,X){var ie=X.transform.target,re=ie.canvas,J=a.util.object.clone(X);J.target=ie,re&&re.fire("object:"+Q,J),ie.fire(Q,X)}function O(Q,X){var ie=X.canvas,re=ie.uniScaleKey,J=Q[re];return ie.uniformScaling&&!J||!ie.uniformScaling&&J}function D(Q){return Q.originX===s&&Q.originY===s}function A(Q,X,ie){var re=Q.lockScalingX,J=Q.lockScalingY;return!!(re&&J||!X&&(re||J)&&ie||re&&X==="x"||J&&X==="y")}function V(Q,X,ie){var re="not-allowed",J=O(Q,ie),se="";if(X.x!==0&&X.y===0?se="x":X.x===0&&X.y!==0&&(se="y"),A(ie,se,J))return re;var ye=_(ie,X);return u[ye]+"-resize"}function q(Q,X,ie){var re="not-allowed";if(X.x!==0&&ie.lockSkewingY||X.y!==0&&ie.lockSkewingX)return re;var J=_(ie,X)%4;return h[J]+"-resize"}function oe(Q,X,ie){return Q[ie.canvas.altActionKey]?i.skewCursorStyleHandler(Q,X,ie):i.scaleCursorStyleHandler(Q,X,ie)}function ge(Q,X,ie){var re=Q[ie.canvas.altActionKey];if(X.x===0)return re?"skewX":"scaleY";if(X.y===0)return re?"skewY":"scaleX"}function me(Q,X,ie){return ie.lockRotation?"not-allowed":X.cursorStyle}function he(Q,X,ie,re){return{e:Q,transform:X,pointer:{x:ie,y:re}}}function de(Q){return function(X,ie,re,J){var se=ie.target,ye=se.getCenterPoint(),De=se.translateToOriginPoint(ye,ie.originX,ie.originY),xe=Q(X,ie,re,J);return se.setPositionByOrigin(De,ie.originX,ie.originY),xe}}function Ce(Q,X){return function(ie,re,J,se){var ye=X(ie,re,J,se);return ye&&S(Q,he(ie,re,J,se)),ye}}function _e(Q,X,ie,re,J){var se=Q.target,ye=se.controls[Q.corner],De=se.canvas.getZoom(),xe=se.padding/De,ne=se.toLocalPoint(new a.Point(re,J),X,ie);return ne.x>=xe&&(ne.x-=xe),ne.x<=-xe&&(ne.x+=xe),ne.y>=xe&&(ne.y-=xe),ne.y<=xe&&(ne.y+=xe),ne.x-=ye.offsetX,ne.y-=ye.offsetY,ne}function Z(Q){return Q.flipX!==Q.flipY}function k(Q,X,ie,re,J){if(Q[X]!==0){var se=Q._getTransformedDimensions()[re],ye=J/se*Q[ie];Q.set(ie,ye)}}function M(Q,X,ie,re){var J=X.target,se=J._getTransformedDimensions(0,J.skewY),ye=_e(X,X.originX,X.originY,ie,re),De=Math.abs(ye.x*2)-se.x,xe=J.skewX,ne;De<2?ne=0:(ne=m(Math.atan2(De/J.scaleX,se.y/J.scaleY)),X.originX===r&&X.originY===c&&(ne=-ne),X.originX===o&&X.originY===n&&(ne=-ne),Z(J)&&(ne=-ne));var Ee=xe!==ne;if(Ee){var Le=J._getTransformedDimensions().y;J.set("skewX",ne),k(J,"skewY","scaleY","y",Le)}return Ee}function x(Q,X,ie,re){var J=X.target,se=J._getTransformedDimensions(J.skewX,0),ye=_e(X,X.originX,X.originY,ie,re),De=Math.abs(ye.y*2)-se.y,xe=J.skewY,ne;De<2?ne=0:(ne=m(Math.atan2(De/J.scaleY,se.x/J.scaleX)),X.originX===r&&X.originY===c&&(ne=-ne),X.originX===o&&X.originY===n&&(ne=-ne),Z(J)&&(ne=-ne));var Ee=xe!==ne;if(Ee){var Le=J._getTransformedDimensions().x;J.set("skewY",ne),k(J,"skewX","scaleX","x",Le)}return Ee}function b(Q,X,ie,re){var J=X.target,se=J.skewX,ye,De=X.originY;if(J.lockSkewingX)return!1;if(se===0){var xe=_e(X,s,s,ie,re);xe.x>0?ye=r:ye=o}else se>0&&(ye=De===n?r:o),se<0&&(ye=De===n?o:r),Z(J)&&(ye=ye===r?o:r);X.originX=ye;var ne=Ce("skewing",de(M));return ne(Q,X,ie,re)}function W(Q,X,ie,re){var J=X.target,se=J.skewY,ye,De=X.originX;if(J.lockSkewingY)return!1;if(se===0){var xe=_e(X,s,s,ie,re);xe.y>0?ye=n:ye=c}else se>0&&(ye=De===r?n:c),se<0&&(ye=De===r?c:n),Z(J)&&(ye=ye===n?c:n);X.originY=ye;var ne=Ce("skewing",de(x));return ne(Q,X,ie,re)}function L(Q,X,ie,re){var J=X,se=J.target,ye=se.translateToOriginPoint(se.getCenterPoint(),J.originX,J.originY);if(se.lockRotation)return!1;var De=Math.atan2(J.ey-ye.y,J.ex-ye.x),xe=Math.atan2(re-ye.y,ie-ye.x),ne=m(xe-De+J.theta),Ee=!0;if(se.snapAngle>0){var Le=se.snapAngle,Ae=se.snapThreshold||Le,Ne=Math.ceil(ne/Le)*Le,Re=Math.floor(ne/Le)*Le;Math.abs(ne-Re)<Ae?ne=Re:Math.abs(ne-Ne)<Ae&&(ne=Ne)}return ne<0&&(ne=360+ne),ne%=360,Ee=se.angle!==ne,se.angle=ne,Ee}function E(Q,X,ie,re,J){J=J||{};var se=X.target,ye=se.lockScalingX,De=se.lockScalingY,xe=J.by,ne,Ee,Le,Ae,Ne=O(Q,se),Re=A(se,xe,Ne),Qe,He,yt=X.gestureScale;if(Re)return!1;if(yt)Ee=X.scaleX*yt,Le=X.scaleY*yt;else{if(ne=_e(X,X.originX,X.originY,ie,re),Qe=xe!=="y"?y(ne.x):1,He=xe!=="x"?y(ne.y):1,X.signX||(X.signX=Qe),X.signY||(X.signY=He),se.lockScalingFlip&&(X.signX!==Qe||X.signY!==He))return!1;if(Ae=se._getTransformedDimensions(),Ne&&!xe){var Dt=Math.abs(ne.x)+Math.abs(ne.y),xt=X.original,er=Math.abs(Ae.x*xt.scaleX/se.scaleX)+Math.abs(Ae.y*xt.scaleY/se.scaleY),ui=Dt/er;Ee=xt.scaleX*ui,Le=xt.scaleY*ui}else Ee=Math.abs(ne.x*se.scaleX/Ae.x),Le=Math.abs(ne.y*se.scaleY/Ae.y);D(X)&&(Ee*=2,Le*=2),X.signX!==Qe&&xe!=="y"&&(X.originX=f[X.originX],Ee*=-1,X.signX=Qe),X.signY!==He&&xe!=="x"&&(X.originY=f[X.originY],Le*=-1,X.signY=He)}var ps=se.scaleX,ci=se.scaleY;return xe?(xe==="x"&&se.set("scaleX",Ee),xe==="y"&&se.set("scaleY",Le)):(!ye&&se.set("scaleX",Ee),!De&&se.set("scaleY",Le)),ps!==se.scaleX||ci!==se.scaleY}function I(Q,X,ie,re){return E(Q,X,ie,re)}function z(Q,X,ie,re){return E(Q,X,ie,re,{by:"x"})}function $(Q,X,ie,re){return E(Q,X,ie,re,{by:"y"})}function Y(Q,X,ie,re){return Q[X.target.canvas.altActionKey]?i.skewHandlerX(Q,X,ie,re):i.scalingY(Q,X,ie,re)}function te(Q,X,ie,re){return Q[X.target.canvas.altActionKey]?i.skewHandlerY(Q,X,ie,re):i.scalingX(Q,X,ie,re)}function le(Q,X,ie,re){var J=X.target,se=_e(X,X.originX,X.originY,ie,re),ye=J.strokeWidth/(J.strokeUniform?J.scaleX:1),De=D(X)?2:1,xe=J.width,ne=Math.abs(se.x*De/J.scaleX)-ye;return J.set("width",Math.max(ne,0)),xe!==ne}function ve(Q,X,ie,re){var J=X.target,se=ie-X.offsetX,ye=re-X.offsetY,De=!J.get("lockMovementX")&&J.left!==se,xe=!J.get("lockMovementY")&&J.top!==ye;return De&&J.set("left",se),xe&&J.set("top",ye),(De||xe)&&S("moving",he(Q,X,ie,re)),De||xe}i.scaleCursorStyleHandler=V,i.skewCursorStyleHandler=q,i.scaleSkewCursorStyleHandler=oe,i.rotationWithSnapping=Ce("rotating",de(L)),i.scalingEqually=Ce("scaling",de(I)),i.scalingX=Ce("scaling",de(z)),i.scalingY=Ce("scaling",de($)),i.scalingYOrSkewingX=Y,i.scalingXOrSkewingY=te,i.changeWidth=Ce("resizing",de(le)),i.skewHandlerX=b,i.skewHandlerY=W,i.dragHandler=ve,i.scaleOrSkewActionName=ge,i.rotationStyleHandler=me,i.fireEvent=S,i.wrapWithFixedAnchor=de,i.wrapWithFireEvent=Ce,i.getLocalPoint=_e,a.controlsUtils=i}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.util.degreesToRadians,h=a.controlsUtils;function i(n,o,c,s,f){s=s||{};var m=this.sizeX||s.cornerSize||f.cornerSize,y=this.sizeY||s.cornerSize||f.cornerSize,_=typeof s.transparentCorners<"u"?s.transparentCorners:f.transparentCorners,S=_?"stroke":"fill",O=!_&&(s.cornerStrokeColor||f.cornerStrokeColor),D=o,A=c,V;n.save(),n.fillStyle=s.cornerColor||f.cornerColor,n.strokeStyle=s.cornerStrokeColor||f.cornerStrokeColor,m>y?(V=m,n.scale(1,y/m),A=c*m/y):y>m?(V=y,n.scale(m/y,1),D=o*y/m):V=m,n.lineWidth=1,n.beginPath(),n.arc(D,A,V/2,0,2*Math.PI,!1),n[S](),O&&n.stroke(),n.restore()}function r(n,o,c,s,f){s=s||{};var m=this.sizeX||s.cornerSize||f.cornerSize,y=this.sizeY||s.cornerSize||f.cornerSize,_=typeof s.transparentCorners<"u"?s.transparentCorners:f.transparentCorners,S=_?"stroke":"fill",O=!_&&(s.cornerStrokeColor||f.cornerStrokeColor),D=m/2,A=y/2;n.save(),n.fillStyle=s.cornerColor||f.cornerColor,n.strokeStyle=s.cornerStrokeColor||f.cornerStrokeColor,n.lineWidth=1,n.translate(o,c),n.rotate(u(f.angle)),n[S+"Rect"](-D,-A,m,y),O&&n.strokeRect(-D,-A,m,y),n.restore()}h.renderCircleControl=i,h.renderSquareControl=r}(w),function(g){var a=g.fabric||(g.fabric={});function u(h){for(var i in h)this[i]=h[i]}a.Control=u,a.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(h,i){return i.cursorStyle},getActionName:function(h,i){return i.actionName},getVisibility:function(h,i){var r=h._controlsVisibility;return r&&typeof r[i]<"u"?r[i]:this.visible},setVisibility:function(h){this.visible=h},positionHandler:function(h,i){var r=a.util.transformPoint({x:this.x*h.x+this.offsetX,y:this.y*h.y+this.offsetY},i);return r},calcCornerCoords:function(h,i,r,n,o){var c,s,f,m,y=o?this.touchSizeX:this.sizeX,_=o?this.touchSizeY:this.sizeY;if(y&&_&&y!==_){var S=Math.atan2(_,y),O=Math.sqrt(y*y+_*_)/2,D=S-a.util.degreesToRadians(h),A=Math.PI/2-S-a.util.degreesToRadians(h);c=O*a.util.cos(D),s=O*a.util.sin(D),f=O*a.util.cos(A),m=O*a.util.sin(A)}else{var V=y&&_?y:i;O=V*.7071067812;var D=a.util.degreesToRadians(45-h);c=f=O*a.util.cos(D),s=m=O*a.util.sin(D)}return{tl:{x:r-m,y:n-f},tr:{x:r+c,y:n-s},bl:{x:r-c,y:n+s},br:{x:r+m,y:n+f}}},render:function(h,i,r,n,o){switch(n=n||{},n.cornerStyle||o.cornerStyle){case"circle":a.controlsUtils.renderCircleControl.call(this,h,i,r,n,o);break;default:a.controlsUtils.renderSquareControl.call(this,h,i,r,n,o)}}}}(w),function(){function g(r,n){var o=r.getAttribute("style"),c=r.getAttribute("offset")||0,s,f,m,y;if(c=parseFloat(c)/(/%$/.test(c)?100:1),c=c<0?0:c>1?1:c,o){var _=o.split(/\s*;\s*/);for(_[_.length-1]===""&&_.pop(),y=_.length;y--;){var S=_[y].split(/\s*:\s*/),O=S[0].trim(),D=S[1].trim();O==="stop-color"?s=D:O==="stop-opacity"&&(m=D)}}return s||(s=r.getAttribute("stop-color")||"rgb(0,0,0)"),m||(m=r.getAttribute("stop-opacity")),s=new p.Color(s),f=s.getAlpha(),m=isNaN(parseFloat(m))?1:parseFloat(m),m*=f*n,{offset:c,color:s.toRgb(),opacity:m}}function a(r){return{x1:r.getAttribute("x1")||0,y1:r.getAttribute("y1")||0,x2:r.getAttribute("x2")||"100%",y2:r.getAttribute("y2")||0}}function u(r){return{x1:r.getAttribute("fx")||r.getAttribute("cx")||"50%",y1:r.getAttribute("fy")||r.getAttribute("cy")||"50%",r1:0,x2:r.getAttribute("cx")||"50%",y2:r.getAttribute("cy")||"50%",r2:r.getAttribute("r")||"50%"}}var h=p.util.object.clone;p.Gradient=p.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(r){r||(r={}),r.coords||(r.coords={});var n,o=this;Object.keys(r).forEach(function(c){o[c]=r[c]}),this.id?this.id+="_"+p.Object.__uid++:this.id=p.Object.__uid++,n={x1:r.coords.x1||0,y1:r.coords.y1||0,x2:r.coords.x2||0,y2:r.coords.y2||0},this.type==="radial"&&(n.r1=r.coords.r1||0,n.r2=r.coords.r2||0),this.coords=n,this.colorStops=r.colorStops.slice()},addColorStop:function(r){for(var n in r){var o=new p.Color(r[n]);this.colorStops.push({offset:parseFloat(n),color:o.toRgb(),opacity:o.getAlpha()})}return this},toObject:function(r){var n={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return p.util.populateWithProperties(this,n,r),n},toSVG:function(r,f){var o=h(this.coords,!0),c,s,f=f||{},m,y,_=h(this.colorStops,!0),S=o.r1>o.r2,O=this.gradientTransform?this.gradientTransform.concat():p.iMatrix.concat(),D=-this.offsetX,A=-this.offsetY,V=!!f.additionalTransform,q=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(_.sort(function(de,Ce){return de.offset-Ce.offset}),q==="objectBoundingBox"?(D/=r.width,A/=r.height):(D+=r.width/2,A+=r.height/2),r.type==="path"&&this.gradientUnits!=="percentage"&&(D-=r.pathOffset.x,A-=r.pathOffset.y),O[4]-=D,O[5]-=A,y='id="SVGID_'+this.id+'" gradientUnits="'+q+'"',y+=' gradientTransform="'+(V?f.additionalTransform+" ":"")+p.util.matrixToSVG(O)+'" ',this.type==="linear"?m=["<linearGradient ",y,' x1="',o.x1,'" y1="',o.y1,'" x2="',o.x2,'" y2="',o.y2,`">
`]:this.type==="radial"&&(m=["<radialGradient ",y,' cx="',S?o.x1:o.x2,'" cy="',S?o.y1:o.y2,'" r="',S?o.r1:o.r2,'" fx="',S?o.x2:o.x1,'" fy="',S?o.y2:o.y1,`">
`]),this.type==="radial"){if(S)for(_=_.concat(),_.reverse(),c=0,s=_.length;c<s;c++)_[c].offset=1-_[c].offset;var oe=Math.min(o.r1,o.r2);if(oe>0){var ge=Math.max(o.r1,o.r2),me=oe/ge;for(c=0,s=_.length;c<s;c++)_[c].offset+=me*(1-_[c].offset)}}for(c=0,s=_.length;c<s;c++){var he=_[c];m.push("<stop ",'offset="',he.offset*100+"%",'" style="stop-color:',he.color,typeof he.opacity<"u"?";stop-opacity: "+he.opacity:";",`"/>
`)}return m.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),m.join("")},toLive:function(r){var n,o=p.util.object.clone(this.coords),c,s;if(this.type){for(this.type==="linear"?n=r.createLinearGradient(o.x1,o.y1,o.x2,o.y2):this.type==="radial"&&(n=r.createRadialGradient(o.x1,o.y1,o.r1,o.x2,o.y2,o.r2)),c=0,s=this.colorStops.length;c<s;c++){var f=this.colorStops[c].color,m=this.colorStops[c].opacity,y=this.colorStops[c].offset;typeof m<"u"&&(f=new p.Color(f).setAlpha(m).toRgba()),n.addColorStop(y,f)}return n}}}),p.util.object.extend(p.Gradient,{fromElement:function(r,n,o,c){var s=parseFloat(o)/(/%$/.test(o)?100:1);s=s<0?0:s>1?1:s,isNaN(s)&&(s=1);var f=r.getElementsByTagName("stop"),m,y=r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",_=r.getAttribute("gradientTransform")||"",S=[],O,D,A=0,V=0,q;for(r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?(m="linear",O=a(r)):(m="radial",O=u(r)),D=f.length;D--;)S.push(g(f[D],s));q=p.parseTransformAttribute(_),i(n,O,c,y),y==="pixels"&&(A=-n.left,V=-n.top);var oe=new p.Gradient({id:r.getAttribute("id"),type:m,coords:O,colorStops:S,gradientUnits:y,gradientTransform:q,offsetX:A,offsetY:V});return oe}});function i(r,n,o,c){var s,f;Object.keys(n).forEach(function(m){s=n[m],s==="Infinity"?f=1:s==="-Infinity"?f=0:(f=parseFloat(n[m],10),typeof s=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(s)&&(f*=.01,c==="pixels"&&((m==="x1"||m==="x2"||m==="r2")&&(f*=o.viewBoxWidth||o.width),(m==="y1"||m==="y2")&&(f*=o.viewBoxHeight||o.height)))),n[m]=f})}}(),function(){var g=p.util.toFixed;p.Pattern=p.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(a,u){if(a||(a={}),this.id=p.Object.__uid++,this.setOptions(a),!a.source||a.source&&typeof a.source!="string"){u&&u(this);return}else{var h=this;this.source=p.util.createImage(),p.util.loadImage(a.source,function(i,r){h.source=i,u&&u(h,r)},null,this.crossOrigin)}},toObject:function(a){var u=p.Object.NUM_FRACTION_DIGITS,h,i;return typeof this.source.src=="string"?h=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(h=this.source.toDataURL()),i={type:"pattern",source:h,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:g(this.offsetX,u),offsetY:g(this.offsetY,u),patternTransform:this.patternTransform?this.patternTransform.concat():null},p.util.populateWithProperties(this,i,a),i},toSVG:function(a){var u=typeof this.source=="function"?this.source():this.source,h=u.width/a.width,i=u.height/a.height,r=this.offsetX/a.width,n=this.offsetY/a.height,o="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(i=1,n&&(i+=Math.abs(n))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(h=1,r&&(h+=Math.abs(r))),u.src?o=u.src:u.toDataURL&&(o=u.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+n+'" width="'+h+'" height="'+i+`">
<image x="0" y="0" width="`+u.width+'" height="'+u.height+'" xlink:href="'+o+`"></image>
</pattern>
`},setOptions:function(a){for(var u in a)this[u]=a[u]},toLive:function(a){var u=this.source;return!u||typeof u.src<"u"&&(!u.complete||u.naturalWidth===0||u.naturalHeight===0)?"":a.createPattern(u,this.repeat)}})}(),function(g){var a=g.fabric||(g.fabric={}),u=a.util.toFixed;if(a.Shadow){a.warn("fabric.Shadow is already defined.");return}a.Shadow=a.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(h){typeof h=="string"&&(h=this._parseShadow(h));for(var i in h)this[i]=h[i];this.id=a.Object.__uid++},_parseShadow:function(h){var i=h.trim(),r=a.Shadow.reOffsetsAndBlur.exec(i)||[],n=i.replace(a.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:n.trim(),offsetX:parseFloat(r[1],10)||0,offsetY:parseFloat(r[2],10)||0,blur:parseFloat(r[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(h){var i=40,r=40,n=a.Object.NUM_FRACTION_DIGITS,o=a.util.rotateVector({x:this.offsetX,y:this.offsetY},a.util.degreesToRadians(-h.angle)),c=20,s=new a.Color(this.color);return h.width&&h.height&&(i=u((Math.abs(o.x)+this.blur)/h.width,n)*100+c,r=u((Math.abs(o.y)+this.blur)/h.height,n)*100+c),h.flipX&&(o.x*=-1),h.flipY&&(o.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+i+'%" width="'+(100+2*i)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+u(this.blur?this.blur/2:0,n)+`"></feGaussianBlur>
	<feOffset dx="`+u(o.x,n)+'" dy="'+u(o.y,n)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+s.toRgb()+'" flood-opacity="'+s.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var h={},i=a.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(r){this[r]!==i[r]&&(h[r]=this[r])},this),h}}),a.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(w),function(){if(p.StaticCanvas){p.warn("fabric.StaticCanvas is already defined.");return}var g=p.util.object.extend,a=p.util.getElementOffset,u=p.util.removeFromArray,h=p.util.toFixed,i=p.util.transformPoint,r=p.util.invertTransform,n=p.util.getNodeCanvas,o=p.util.createCanvasElement,c=new Error("Could not initialize `canvas` element");p.StaticCanvas=p.util.createClass(p.CommonMethods,{initialize:function(s,f){f||(f={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(s,f)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:p.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(s,f){var m=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(s),this._initOptions(f),this.interactive||this._initRetinaScaling(),f.overlayImage&&this.setOverlayImage(f.overlayImage,m),f.backgroundImage&&this.setBackgroundImage(f.backgroundImage,m),f.backgroundColor&&this.setBackgroundColor(f.backgroundColor,m),f.overlayColor&&this.setOverlayColor(f.overlayColor,m),this.calcOffset()},_isRetinaScaling:function(){return p.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,p.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var s=p.devicePixelRatio;this.__initRetinaScaling(s,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(s,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(s,f,m){f.setAttribute("width",this.width*s),f.setAttribute("height",this.height*s),m.scale(s,s)},calcOffset:function(){return this._offset=a(this.lowerCanvasEl),this},setOverlayImage:function(s,f,m){return this.__setBgOverlayImage("overlayImage",s,f,m)},setBackgroundImage:function(s,f,m){return this.__setBgOverlayImage("backgroundImage",s,f,m)},setOverlayColor:function(s,f){return this.__setBgOverlayColor("overlayColor",s,f)},setBackgroundColor:function(s,f){return this.__setBgOverlayColor("backgroundColor",s,f)},__setBgOverlayImage:function(s,f,m,y){return typeof f=="string"?p.util.loadImage(f,function(_,S){if(_){var O=new p.Image(_,y);this[s]=O,O.canvas=this}m&&m(_,S)},this,y&&y.crossOrigin):(y&&f.setOptions(y),this[s]=f,f&&(f.canvas=this),m&&m(f,!1)),this},__setBgOverlayColor:function(s,f,m){return this[s]=f,this._initGradient(f,s),this._initPattern(f,s,m),this},_createCanvasElement:function(){var s=o();if(!s||(s.style||(s.style={}),typeof s.getContext>"u"))throw c;return s},_initOptions:function(s){var f=this.lowerCanvasEl;this._setOptions(s),this.width=this.width||parseInt(f.width,10)||0,this.height=this.height||parseInt(f.height,10)||0,this.lowerCanvasEl.style&&(f.width=this.width,f.height=this.height,f.style.width=this.width+"px",f.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(s){s&&s.getContext?this.lowerCanvasEl=s:this.lowerCanvasEl=p.util.getById(s)||this._createCanvasElement(),p.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(s,f){return this.setDimensions({width:s},f)},setHeight:function(s,f){return this.setDimensions({height:s},f)},setDimensions:function(s,f){var m;f=f||{};for(var y in s)m=s[y],f.cssOnly||(this._setBackstoreDimension(y,s[y]),m+="px",this.hasLostContext=!0),f.backstoreOnly||this._setCssDimension(y,m);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),f.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(s,f){return this.lowerCanvasEl[s]=f,this.upperCanvasEl&&(this.upperCanvasEl[s]=f),this.cacheCanvasEl&&(this.cacheCanvasEl[s]=f),this[s]=f,this},_setCssDimension:function(s,f){return this.lowerCanvasEl.style[s]=f,this.upperCanvasEl&&(this.upperCanvasEl.style[s]=f),this.wrapperEl&&(this.wrapperEl.style[s]=f),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(s){var f=this._activeObject,m=this.backgroundImage,y=this.overlayImage,_,S,O;for(this.viewportTransform=s,S=0,O=this._objects.length;S<O;S++)_=this._objects[S],_.group||_.setCoords(!0);return f&&f.setCoords(),m&&m.setCoords(!0),y&&y.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(s,f){var m=s,y=this.viewportTransform.slice(0);s=i(s,r(this.viewportTransform)),y[0]=f,y[3]=f;var _=i(s,y);return y[4]+=m.x-_.x,y[5]+=m.y-_.y,this.setViewportTransform(y)},setZoom:function(s){return this.zoomToPoint(new p.Point(0,0),s),this},absolutePan:function(s){var f=this.viewportTransform.slice(0);return f[4]=-s.x,f[5]=-s.y,this.setViewportTransform(f)},relativePan:function(s){return this.absolutePan(new p.Point(-s.x-this.viewportTransform[4],-s.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(s){this.stateful&&s.setupState(),s._set("canvas",this),s.setCoords(),this.fire("object:added",{target:s}),s.fire("added")},_onObjectRemoved:function(s){this.fire("object:removed",{target:s}),s.fire("removed"),delete s.canvas},clearContext:function(s){return s.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var s=this.contextContainer;return this.renderCanvas(s,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=p.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var s={},f=this.width,m=this.height,y=r(this.viewportTransform);return s.tl=i({x:0,y:0},y),s.br=i({x:f,y:m},y),s.tr=new p.Point(s.br.x,s.tl.y),s.bl=new p.Point(s.tl.x,s.br.y),this.vptCoords=s,s},cancelRequestedRender:function(){this.isRendering&&(p.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(s,f){var m=this.viewportTransform,y=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(s),p.util.setImageSmoothing(s,this.imageSmoothingEnabled),this.fire("before:render",{ctx:s}),this._renderBackground(s),s.save(),s.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._renderObjects(s,f),s.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),y&&(y.canvas=this,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(s)),this._renderOverlay(s),this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),this.fire("after:render",{ctx:s})},drawClipPathOnCanvas:function(s){var f=this.viewportTransform,m=this.clipPath;s.save(),s.transform(f[0],f[1],f[2],f[3],f[4],f[5]),s.globalCompositeOperation="destination-in",m.transform(s),s.scale(1/m.zoomX,1/m.zoomY),s.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),s.restore()},_renderObjects:function(s,f){var m,y;for(m=0,y=f.length;m<y;++m)f[m]&&f[m].render(s)},_renderBackgroundOrOverlay:function(s,f){var m=this[f+"Color"],y=this[f+"Image"],_=this.viewportTransform,S=this[f+"Vpt"];if(!(!m&&!y)){if(m){s.save(),s.beginPath(),s.moveTo(0,0),s.lineTo(this.width,0),s.lineTo(this.width,this.height),s.lineTo(0,this.height),s.closePath(),s.fillStyle=m.toLive?m.toLive(s,this):m,S&&s.transform(_[0],_[1],_[2],_[3],_[4],_[5]),s.transform(1,0,0,1,m.offsetX||0,m.offsetY||0);var O=m.gradientTransform||m.patternTransform;O&&s.transform(O[0],O[1],O[2],O[3],O[4],O[5]),s.fill(),s.restore()}if(y){s.save();var D=this.skipOffscreen;this.skipOffscreen=S,S&&s.transform(_[0],_[1],_[2],_[3],_[4],_[5]),y.render(s),this.skipOffscreen=D,s.restore()}}},_renderBackground:function(s){this._renderBackgroundOrOverlay(s,"background")},_renderOverlay:function(s){this._renderBackgroundOrOverlay(s,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new p.Point(this.width/2,this.height/2)},centerObjectH:function(s){return this._centerObject(s,new p.Point(this.getCenterPoint().x,s.getCenterPoint().y))},centerObjectV:function(s){return this._centerObject(s,new p.Point(s.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(s){var f=this.getCenterPoint();return this._centerObject(s,f)},viewportCenterObject:function(s){var f=this.getVpCenter();return this._centerObject(s,f)},viewportCenterObjectH:function(s){var f=this.getVpCenter();return this._centerObject(s,new p.Point(f.x,s.getCenterPoint().y)),this},viewportCenterObjectV:function(s){var f=this.getVpCenter();return this._centerObject(s,new p.Point(s.getCenterPoint().x,f.y))},getVpCenter:function(){var s=this.getCenterPoint(),f=r(this.viewportTransform);return i(s,f)},_centerObject:function(s,f){return s.setPositionByOrigin(f,"center","center"),s.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(s){return this.toDatalessObject(s)},toObject:function(s){return this._toObjectMethod("toObject",s)},toDatalessObject:function(s){return this._toObjectMethod("toDatalessObject",s)},_toObjectMethod:function(s,f){var m=this.clipPath,y={version:p.version,objects:this._toObjects(s,f)};return m&&!m.excludeFromExport&&(y.clipPath=this._toObject(this.clipPath,s,f)),g(y,this.__serializeBgOverlay(s,f)),p.util.populateWithProperties(this,y,f),y},_toObjects:function(s,f){return this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){return this._toObject(m,s,f)},this)},_toObject:function(s,f,m){var y;this.includeDefaultValues||(y=s.includeDefaultValues,s.includeDefaultValues=!1);var _=s[f](m);return this.includeDefaultValues||(s.includeDefaultValues=y),_},__serializeBgOverlay:function(s,f){var m={},y=this.backgroundImage,_=this.overlayImage,S=this.backgroundColor,O=this.overlayColor;return S&&S.toObject?S.excludeFromExport||(m.background=S.toObject(f)):S&&(m.background=S),O&&O.toObject?O.excludeFromExport||(m.overlay=O.toObject(f)):O&&(m.overlay=O),y&&!y.excludeFromExport&&(m.backgroundImage=this._toObject(y,s,f)),_&&!_.excludeFromExport&&(m.overlayImage=this._toObject(_,s,f)),m},svgViewportTransformation:!0,toSVG:function(s,f){s||(s={}),s.reviver=f;var m=[];return this._setSVGPreamble(m,s),this._setSVGHeader(m,s),this.clipPath&&m.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(m,"background"),this._setSVGBgOverlayImage(m,"backgroundImage",f),this._setSVGObjects(m,f),this.clipPath&&m.push(`</g>
`),this._setSVGBgOverlayColor(m,"overlay"),this._setSVGBgOverlayImage(m,"overlayImage",f),m.push("</svg>"),m.join("")},_setSVGPreamble:function(s,f){f.suppressPreamble||s.push('<?xml version="1.0" encoding="',f.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(s,f){var m=f.width||this.width,y=f.height||this.height,_,S='viewBox="0 0 '+this.width+" "+this.height+'" ',O=p.Object.NUM_FRACTION_DIGITS;f.viewBox?S='viewBox="'+f.viewBox.x+" "+f.viewBox.y+" "+f.viewBox.width+" "+f.viewBox.height+'" ':this.svgViewportTransformation&&(_=this.viewportTransform,S='viewBox="'+h(-_[4]/_[0],O)+" "+h(-_[5]/_[3],O)+" "+h(this.width/_[0],O)+" "+h(this.height/_[3],O)+'" '),s.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',m,'" ','height="',y,'" ',S,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",p.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(f),`</defs>
`)},createSVGClipPathMarkup:function(s){var f=this.clipPath;return f?(f.clipPathId="CLIPPATH_"+p.Object.__uid++,'<clipPath id="'+f.clipPathId+`" >
`+this.clipPath.toClipPathSVG(s.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var s=this,f=["background","overlay"].map(function(m){var y=s[m+"Color"];if(y&&y.toLive){var _=s[m+"Vpt"],S=s.viewportTransform,O={width:s.width/(_?S[0]:1),height:s.height/(_?S[3]:1)};return y.toSVG(O,{additionalTransform:_?p.util.matrixToSVG(S):""})}});return f.join("")},createSVGFontFacesMarkup:function(){var s="",f={},m,y,_,S,O,D,A,V,q,oe=p.fontPaths,ge=[];for(this._objects.forEach(function he(de){ge.push(de),de._objects&&de._objects.forEach(he)}),V=0,q=ge.length;V<q;V++)if(m=ge[V],y=m.fontFamily,!(m.type.indexOf("text")===-1||f[y]||!oe[y])&&(f[y]=!0,!!m.styles)){_=m.styles;for(O in _){S=_[O];for(A in S)D=S[A],y=D.fontFamily,!f[y]&&oe[y]&&(f[y]=!0)}}for(var me in f)s+=[`		@font-face {
`,"			font-family: '",me,`';
`,"			src: url('",oe[me],`');
`,`		}
`].join("");return s&&(s=['	<style type="text/css">',`<![CDATA[
`,s,"]]>",`</style>
`].join("")),s},_setSVGObjects:function(s,f){var m,y,_,S=this._objects;for(y=0,_=S.length;y<_;y++)m=S[y],!m.excludeFromExport&&this._setSVGObject(s,m,f)},_setSVGObject:function(s,f,m){s.push(f.toSVG(m))},_setSVGBgOverlayImage:function(s,f,m){this[f]&&!this[f].excludeFromExport&&this[f].toSVG&&s.push(this[f].toSVG(m))},_setSVGBgOverlayColor:function(s,f){var m=this[f+"Color"],y=this.viewportTransform,_=this.width,S=this.height;if(m)if(m.toLive){var O=m.repeat,D=p.util.invertTransform(y),A=this[f+"Vpt"],V=A?p.util.matrixToSVG(D):"";s.push('<rect transform="'+V+" translate(",_/2,",",S/2,')"',' x="',m.offsetX-_/2,'" y="',m.offsetY-S/2,'" ','width="',O==="repeat-y"||O==="no-repeat"?m.source.width:_,'" height="',O==="repeat-x"||O==="no-repeat"?m.source.height:S,'" fill="url(#SVGID_'+m.id+')"',`></rect>
`)}else s.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',m,'"',`></rect>
`)},sendToBack:function(s){if(!s)return this;var f=this._activeObject,m,y,_;if(s===f&&s.type==="activeSelection")for(_=f._objects,m=_.length;m--;)y=_[m],u(this._objects,y),this._objects.unshift(y);else u(this._objects,s),this._objects.unshift(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(s){if(!s)return this;var f=this._activeObject,m,y,_;if(s===f&&s.type==="activeSelection")for(_=f._objects,m=0;m<_.length;m++)y=_[m],u(this._objects,y),this._objects.push(y);else u(this._objects,s),this._objects.push(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(s,f){if(!s)return this;var m=this._activeObject,y,_,S,O,D,A=0;if(s===m&&s.type==="activeSelection")for(D=m._objects,y=0;y<D.length;y++)_=D[y],S=this._objects.indexOf(_),S>0+A&&(O=S-1,u(this._objects,_),this._objects.splice(O,0,_)),A++;else S=this._objects.indexOf(s),S!==0&&(O=this._findNewLowerIndex(s,S,f),u(this._objects,s),this._objects.splice(O,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(s,f,m){var y,_;if(m)for(y=f,_=f-1;_>=0;--_){var S=s.intersectsWithObject(this._objects[_])||s.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(s);if(S){y=_;break}}else y=f-1;return y},bringForward:function(s,f){if(!s)return this;var m=this._activeObject,y,_,S,O,D,A=0;if(s===m&&s.type==="activeSelection")for(D=m._objects,y=D.length;y--;)_=D[y],S=this._objects.indexOf(_),S<this._objects.length-1-A&&(O=S+1,u(this._objects,_),this._objects.splice(O,0,_)),A++;else S=this._objects.indexOf(s),S!==this._objects.length-1&&(O=this._findNewUpperIndex(s,S,f),u(this._objects,s),this._objects.splice(O,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(s,f,m){var y,_,S;if(m)for(y=f,_=f+1,S=this._objects.length;_<S;++_){var O=s.intersectsWithObject(this._objects[_])||s.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(s);if(O){y=_;break}}else y=f+1;return y},moveTo:function(s,f){return u(this._objects,s),this._objects.splice(f,0,s),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(p.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(s){s.dispose&&s.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),p.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),p.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),g(p.StaticCanvas.prototype,p.Observable),g(p.StaticCanvas.prototype,p.Collection),g(p.StaticCanvas.prototype,p.DataURLExporter),g(p.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(s){var f=o();if(!f||!f.getContext)return null;var m=f.getContext("2d");if(!m)return null;switch(s){case"setLineDash":return typeof m.setLineDash<"u";default:return null}}}),p.StaticCanvas.prototype.toJSON=p.StaticCanvas.prototype.toObject,p.isLikelyNode&&(p.StaticCanvas.prototype.createPNGStream=function(){var s=n(this.lowerCanvasEl);return s&&s.createPNGStream()},p.StaticCanvas.prototype.createJPEGStream=function(s){var f=n(this.lowerCanvasEl);return f&&f.createJPEGStream(s)})}(),p.BaseBrush=p.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(g){g.strokeStyle=this.color,g.lineWidth=this.width,g.lineCap=this.strokeLineCap,g.miterLimit=this.strokeMiterLimit,g.lineJoin=this.strokeLineJoin,g.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(g){var a=this.canvas.viewportTransform;g.save(),g.transform(a[0],a[1],a[2],a[3],a[4],a[5])},_setShadow:function(){if(this.shadow){var g=this.canvas,a=this.shadow,u=g.contextTop,h=g.getZoom();g&&g._isRetinaScaling()&&(h*=p.devicePixelRatio),u.shadowColor=a.color,u.shadowBlur=a.blur*h,u.shadowOffsetX=a.offsetX*h,u.shadowOffsetY=a.offsetY*h}},needsFullRender:function(){var g=new p.Color(this.color);return g.getAlpha()<1||!!this.shadow},_resetShadow:function(){var g=this.canvas.contextTop;g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0},_isOutSideCanvas:function(g){return g.x<0||g.x>this.canvas.getWidth()||g.y<0||g.y>this.canvas.getHeight()}}),function(){p.PencilBrush=p.util.createClass(p.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(g){this.canvas=g,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(g,a,u){var h=a.midPointFrom(u);return g.quadraticCurveTo(a.x,a.y,h.x,h.y),h},onMouseDown:function(g,a){this.canvas._isMainEvent(a.e)&&(this.drawStraightLine=a.e[this.straightLineKey],this._prepareForDrawing(g),this._captureDrawingPath(g),this._render())},onMouseMove:function(g,a){if(this.canvas._isMainEvent(a.e)&&(this.drawStraightLine=a.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g))&&this._captureDrawingPath(g)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var u=this._points,h=u.length,i=this.canvas.contextTop;this._saveAndTransform(i),this.oldEnd&&(i.beginPath(),i.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(i,u[h-2],u[h-1],!0),i.stroke(),i.restore()}},onMouseUp:function(g){return this.canvas._isMainEvent(g.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(g){var a=new p.Point(g.x,g.y);this._reset(),this._addPoint(a),this.canvas.contextTop.moveTo(a.x,a.y)},_addPoint:function(g){return this._points.length>1&&g.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(g),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(g){var a=new p.Point(g.x,g.y);return this._addPoint(a)},_render:function(g){var a,u,h=this._points[0],i=this._points[1];if(g=g||this.canvas.contextTop,this._saveAndTransform(g),g.beginPath(),this._points.length===2&&h.x===i.x&&h.y===i.y){var r=this.width/1e3;h=new p.Point(h.x,h.y),i=new p.Point(i.x,i.y),h.x-=r,i.x+=r}for(g.moveTo(h.x,h.y),a=1,u=this._points.length;a<u;a++)this._drawSegment(g,h,i),h=this._points[a],i=this._points[a+1];g.lineTo(h.x,h.y),g.stroke(),g.restore()},convertPointsToSVGPath:function(g){var a=this.width/1e3;return p.util.getSmoothPathFromPoints(g,a)},_isEmptySVGPath:function(g){var a=p.util.joinPath(g);return a==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(g){var a=new p.Path(g,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,a.shadow=new p.Shadow(this.shadow)),a},decimatePoints:function(g,a){if(g.length<=2)return g;var u=this.canvas.getZoom(),h=Math.pow(a/u,2),i,r=g.length-1,n=g[0],o=[n],c;for(i=1;i<r-1;i++)c=Math.pow(n.x-g[i].x,2)+Math.pow(n.y-g[i].y,2),c>=h&&(n=g[i],o.push(n));return o.push(g[r]),o},_finalizeAndAddPath:function(){var g=this.canvas.contextTop;g.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var a=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(a)){this.canvas.requestRenderAll();return}var u=this.createPath(a);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.requestRenderAll(),u.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:u})}})}(),p.CircleBrush=p.util.createClass(p.BaseBrush,{width:10,initialize:function(g){this.canvas=g,this.points=[]},drawDot:function(g){var a=this.addPoint(g),u=this.canvas.contextTop;this._saveAndTransform(u),this.dot(u,a),u.restore()},dot:function(g,a){g.fillStyle=a.fill,g.beginPath(),g.arc(a.x,a.y,a.radius,0,Math.PI*2,!1),g.closePath(),g.fill()},onMouseDown:function(g){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(g)},_render:function(){var g=this.canvas.contextTop,a,u,h=this.points;for(this._saveAndTransform(g),a=0,u=h.length;a<u;a++)this.dot(g,h[a]);g.restore()},onMouseMove:function(g){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(g),this._render()):this.drawDot(g))},onMouseUp:function(){var g=this.canvas.renderOnAddRemove,a,u;this.canvas.renderOnAddRemove=!1;var h=[];for(a=0,u=this.points.length;a<u;a++){var i=this.points[a],r=new p.Circle({radius:i.radius,left:i.x,top:i.y,originX:"center",originY:"center",fill:i.fill});this.shadow&&(r.shadow=new p.Shadow(this.shadow)),h.push(r)}var n=new p.Group(h);n.canvas=this.canvas,this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.fire("path:created",{path:n}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=g,this.canvas.requestRenderAll()},addPoint:function(g){var a=new p.Point(g.x,g.y),u=p.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,h=new p.Color(this.color).setAlpha(p.util.getRandomInt(0,100)/100).toRgba();return a.radius=u,a.fill=h,this.points.push(a),a}}),p.SprayBrush=p.util.createClass(p.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(g){this.canvas=g,this.sprayChunks=[]},onMouseDown:function(g){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(g),this.render(this.sprayChunkPoints)},onMouseMove:function(g){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g)||(this.addSprayChunk(g),this.render(this.sprayChunkPoints))},onMouseUp:function(){var g=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var a=[],u=0,h=this.sprayChunks.length;u<h;u++)for(var i=this.sprayChunks[u],r=0,n=i.length;r<n;r++){var o=new p.Rect({width:i[r].width,height:i[r].width,left:i[r].x+1,top:i[r].y+1,originX:"center",originY:"center",fill:this.color});a.push(o)}this.optimizeOverlapping&&(a=this._getOptimizedRects(a));var c=new p.Group(a);this.shadow&&c.set("shadow",new p.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=g,this.canvas.requestRenderAll()},_getOptimizedRects:function(g){var a={},u,h,i;for(h=0,i=g.length;h<i;h++)u=g[h].left+""+g[h].top,a[u]||(a[u]=g[h]);var r=[];for(u in a)r.push(a[u]);return r},render:function(g){var a=this.canvas.contextTop,u,h;for(a.fillStyle=this.color,this._saveAndTransform(a),u=0,h=g.length;u<h;u++){var i=g[u];typeof i.opacity<"u"&&(a.globalAlpha=i.opacity),a.fillRect(i.x,i.y,i.width,i.width)}a.restore()},_render:function(){var g=this.canvas.contextTop,a,u;for(g.fillStyle=this.color,this._saveAndTransform(g),a=0,u=this.sprayChunks.length;a<u;a++)this.render(this.sprayChunks[a]);g.restore()},addSprayChunk:function(g){this.sprayChunkPoints=[];var a,u,h,i=this.width/2,r;for(r=0;r<this.density;r++){a=p.util.getRandomInt(g.x-i,g.x+i),u=p.util.getRandomInt(g.y-i,g.y+i),this.dotWidthVariance?h=p.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):h=this.dotWidth;var n=new p.Point(a,u);n.width=h,this.randomOpacity&&(n.opacity=p.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(n)}this.sprayChunks.push(this.sprayChunkPoints)}}),p.PatternBrush=p.util.createClass(p.PencilBrush,{getPatternSrc:function(){var g=20,a=5,u=p.util.createCanvasElement(),h=u.getContext("2d");return u.width=u.height=g+a,h.fillStyle=this.color,h.beginPath(),h.arc(g/2,g/2,g/2,0,Math.PI*2,!1),h.closePath(),h.fill(),u},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(g){return g.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(g){this.callSuper("_setBrushStyles",g),g.strokeStyle=this.getPattern(g)},createPath:function(g){var a=this.callSuper("createPath",g),u=a._getLeftTopCoords().scalarAdd(a.strokeWidth/2);return a.stroke=new p.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-u.x,offsetY:-u.y}),a}}),function(){var g=p.util.getPointer,a=p.util.degreesToRadians,u=p.util.isTouchEvent;p.Canvas=p.util.createClass(p.StaticCanvas,{initialize:function(i,r){r||(r={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(i,r),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=p.PencilBrush&&new p.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var i=this.getActiveObjects(),r,n,o;if(i.length>0&&!this.preserveObjectStacking){n=[],o=[];for(var c=0,s=this._objects.length;c<s;c++)r=this._objects[c],i.indexOf(r)===-1?n.push(r):o.push(r);i.length>1&&(this._activeObject._objects=o),n.push.apply(n,o)}else n=this._objects;return n},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var i=this.contextContainer;return this.renderCanvas(i,this._chooseObjectsToRender()),this},renderTopLayer:function(i){i.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(i),this.contextTopDirty=!0),i.restore()},renderTop:function(){var i=this.contextTop;return this.clearContext(i),this.renderTopLayer(i),this.fire("after:render"),this},_normalizePointer:function(i,r){var n=i.calcTransformMatrix(),o=p.util.invertTransform(n),c=this.restorePointerVpt(r);return p.util.transformPoint(c,o)},isTargetTransparent:function(i,r,n){if(i.shouldCache()&&i._cacheCanvas&&i!==this._activeObject){var o=this._normalizePointer(i,{x:r,y:n}),c=Math.max(i.cacheTranslationX+o.x*i.zoomX,0),s=Math.max(i.cacheTranslationY+o.y*i.zoomY,0),_=p.util.isTransparent(i._cacheContext,Math.round(c),Math.round(s),this.targetFindTolerance);return _}var f=this.contextCache,m=i.selectionBackgroundColor,y=this.viewportTransform;i.selectionBackgroundColor="",this.clearContext(f),f.save(),f.transform(y[0],y[1],y[2],y[3],y[4],y[5]),i.render(f),f.restore(),i.selectionBackgroundColor=m;var _=p.util.isTransparent(f,r,n,this.targetFindTolerance);return _},_isSelectionKeyPressed:function(i){var r=!1;return Array.isArray(this.selectionKey)?r=!!this.selectionKey.find(function(n){return i[n]===!0}):r=i[this.selectionKey],r},_shouldClearSelection:function(i,r){var n=this.getActiveObjects(),o=this._activeObject;return!r||r&&o&&n.length>1&&n.indexOf(r)===-1&&o!==r&&!this._isSelectionKeyPressed(i)||r&&!r.evented||r&&!r.selectable&&o&&o!==r},_shouldCenterTransform:function(i,r,n){if(i){var o;return r==="scale"||r==="scaleX"||r==="scaleY"||r==="resizing"?o=this.centeredScaling||i.centeredScaling:r==="rotate"&&(o=this.centeredRotation||i.centeredRotation),o?!n:n}},_getOriginFromCorner:function(i,r){var n={x:i.originX,y:i.originY};return r==="ml"||r==="tl"||r==="bl"?n.x="right":(r==="mr"||r==="tr"||r==="br")&&(n.x="left"),r==="tl"||r==="mt"||r==="tr"?n.y="bottom":(r==="bl"||r==="mb"||r==="br")&&(n.y="top"),n},_getActionFromCorner:function(i,r,n,o){if(!r||!i)return"drag";var c=o.controls[r];return c.getActionName(n,c,o)},_setupCurrentTransform:function(i,r,n){if(r){var o=this.getPointer(i),c=r.__corner,s=r.controls[c],f=n&&c?s.getActionHandler(i,r,s):p.controlsUtils.dragHandler,m=this._getActionFromCorner(n,c,i,r),y=this._getOriginFromCorner(r,c),_=i[this.centeredKey],S={target:r,action:m,actionHandler:f,corner:c,scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,offsetX:o.x-r.left,offsetY:o.y-r.top,originX:y.x,originY:y.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:a(r.angle),width:r.width*r.scaleX,shiftKey:i.shiftKey,altKey:_,original:p.util.saveObjectTransform(r)};this._shouldCenterTransform(r,m,_)&&(S.originX="center",S.originY="center"),S.original.originX=y.x,S.original.originY=y.y,this._currentTransform=S,this._beforeTransform(i)}},setCursor:function(i){this.upperCanvasEl.style.cursor=i},_drawSelection:function(i){var r=this._groupSelector,n=new p.Point(r.ex,r.ey),o=p.util.transformPoint(n,this.viewportTransform),c=new p.Point(r.ex+r.left,r.ey+r.top),s=p.util.transformPoint(c,this.viewportTransform),f=Math.min(o.x,s.x),m=Math.min(o.y,s.y),y=Math.max(o.x,s.x),_=Math.max(o.y,s.y),S=this.selectionLineWidth/2;this.selectionColor&&(i.fillStyle=this.selectionColor,i.fillRect(f,m,y-f,_-m)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(i.lineWidth=this.selectionLineWidth,i.strokeStyle=this.selectionBorderColor,f+=S,m+=S,y-=S,_-=S,p.Object.prototype._setLineDash.call(this,i,this.selectionDashArray),i.strokeRect(f,m,y-f,_-m))},findTarget:function(i,r){if(!this.skipTargetFind){var n=!0,o=this.getPointer(i,n),c=this._activeObject,s=this.getActiveObjects(),f,m,y=u(i),_=s.length>1&&!r||s.length===1;if(this.targets=[],_&&c._findTargetCorner(o,y)||s.length>1&&!r&&c===this._searchPossibleTargets([c],o))return c;if(s.length===1&&c===this._searchPossibleTargets([c],o))if(this.preserveObjectStacking)f=c,m=this.targets,this.targets=[];else return c;var S=this._searchPossibleTargets(this._objects,o);return i[this.altSelectionKey]&&S&&f&&S!==f&&(S=f,this.targets=m),S}},_checkTarget:function(i,r,n){if(r&&r.visible&&r.evented&&r.containsPoint(i))if((this.perPixelTargetFind||r.perPixelTargetFind)&&!r.isEditing){var o=this.isTargetTransparent(r,n.x,n.y);if(!o)return!0}else return!0},_searchPossibleTargets:function(i,r){for(var n,o=i.length,c;o--;){var s=i[o],f=s.group?this._normalizePointer(s.group,r):r;if(this._checkTarget(f,s,r)){n=i[o],n.subTargetCheck&&n instanceof p.Group&&(c=this._searchPossibleTargets(n._objects,r),c&&this.targets.push(c));break}}return n},restorePointerVpt:function(i){return p.util.transformPoint(i,p.util.invertTransform(this.viewportTransform))},getPointer:function(i,r){if(this._absolutePointer&&!r)return this._absolutePointer;if(this._pointer&&r)return this._pointer;var n=g(i),o=this.upperCanvasEl,c=o.getBoundingClientRect(),s=c.width||0,f=c.height||0,m;(!s||!f)&&("top"in c&&"bottom"in c&&(f=Math.abs(c.top-c.bottom)),"right"in c&&"left"in c&&(s=Math.abs(c.right-c.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,r||(n=this.restorePointerVpt(n));var y=this.getRetinaScaling();return y!==1&&(n.x/=y,n.y/=y),s===0||f===0?m={width:1,height:1}:m={width:o.width/s,height:o.height/f},{x:n.x*m.width,y:n.y*m.height}},_createUpperCanvas:function(){var i=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),r=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),p.util.addClass(n,"upper-canvas "+i),this.wrapperEl.appendChild(n),this._copyCanvasStyle(r,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=p.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),p.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),p.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(i){var r=this.width||i.width,n=this.height||i.height;p.util.setStyle(i,{position:"absolute",width:r+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),i.width=r,i.height=n,p.util.makeElementUnselectable(i)},_copyCanvasStyle:function(i,r){r.style.cssText=i.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var i=this._activeObject;return i?i.type==="activeSelection"&&i._objects?i._objects.slice(0):[i]:[]},_onObjectRemoved:function(i){i===this._activeObject&&(this.fire("before:selection:cleared",{target:i}),this._discardActiveObject(),this.fire("selection:cleared",{target:i}),i.fire("deselected")),i===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",i)},_fireSelectionEvents:function(i,r){var n=!1,o=this.getActiveObjects(),c=[],s=[];i.forEach(function(f){o.indexOf(f)===-1&&(n=!0,f.fire("deselected",{e:r,target:f}),s.push(f))}),o.forEach(function(f){i.indexOf(f)===-1&&(n=!0,f.fire("selected",{e:r,target:f}),c.push(f))}),i.length>0&&o.length>0?n&&this.fire("selection:updated",{e:r,selected:c,deselected:s}):o.length>0?this.fire("selection:created",{e:r,selected:c}):i.length>0&&this.fire("selection:cleared",{e:r,deselected:s})},setActiveObject:function(i,r){var n=this.getActiveObjects();return this._setActiveObject(i,r),this._fireSelectionEvents(n,r),this},_setActiveObject:function(i,r){return this._activeObject===i||!this._discardActiveObject(r,i)||i.onSelect({e:r})?!1:(this._activeObject=i,!0)},_discardActiveObject:function(i,r){var n=this._activeObject;if(n){if(n.onDeselect({e:i,object:r}))return!1;this._activeObject=null}return!0},discardActiveObject:function(i){var r=this.getActiveObjects(),n=this.getActiveObject();return r.length&&this.fire("before:selection:cleared",{target:n,e:i}),this._discardActiveObject(i),this._fireSelectionEvents(r,i),this},dispose:function(){var i=this.wrapperEl;return this.removeListeners(),i.removeChild(this.upperCanvasEl),i.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(r){p.util.cleanUpJsdomNode(this[r]),this[r]=void 0}).bind(this)),i.parentNode&&i.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,p.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(i){var r=this._activeObject;r&&r._renderControls(i)},_toObject:function(i,r,n){var o=this._realizeGroupTransformOnObject(i),c=this.callSuper("_toObject",i,r,n);return this._unwindGroupTransformOnObject(i,o),c},_realizeGroupTransformOnObject:function(i){if(i.group&&i.group.type==="activeSelection"&&this._activeObject===i.group){var r=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],n={};return r.forEach(function(o){n[o]=i[o]}),p.util.addTransformToObject(i,this._activeObject.calcOwnMatrix()),n}else return null},_unwindGroupTransformOnObject:function(i,r){r&&i.set(r)},_setSVGObject:function(i,r,n){var o=this._realizeGroupTransformOnObject(r);this.callSuper("_setSVGObject",i,r,n),this._unwindGroupTransformOnObject(r,o)},setViewportTransform:function(i){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),p.StaticCanvas.prototype.setViewportTransform.call(this,i)}});for(var h in p.StaticCanvas)h!=="prototype"&&(p.Canvas[h]=p.StaticCanvas[h])}(),function(){var g=p.util.addListener,a=p.util.removeListener,u=3,h=2,i=1,r={passive:!1};function n(o,c){return o.button&&o.button===c-1}p.util.object.extend(p.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(g,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(o,c){var s=this.upperCanvasEl,f=this._getEventPrefix();o(p.window,"resize",this._onResize),o(s,f+"down",this._onMouseDown),o(s,f+"move",this._onMouseMove,r),o(s,f+"out",this._onMouseOut),o(s,f+"enter",this._onMouseEnter),o(s,"wheel",this._onMouseWheel),o(s,"contextmenu",this._onContextMenu),o(s,"dblclick",this._onDoubleClick),o(s,"dragover",this._onDragOver),o(s,"dragenter",this._onDragEnter),o(s,"dragleave",this._onDragLeave),o(s,"drop",this._onDrop),this.enablePointerEvents||o(s,"touchstart",this._onTouchStart,r),typeof eventjs<"u"&&c in eventjs&&(eventjs[c](s,"gesture",this._onGesture),eventjs[c](s,"drag",this._onDrag),eventjs[c](s,"orientation",this._onOrientationChange),eventjs[c](s,"shake",this._onShake),eventjs[c](s,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(a,"remove");var o=this._getEventPrefix();a(p.document,o+"up",this._onMouseUp),a(p.document,"touchend",this._onTouchEnd,r),a(p.document,o+"move",this._onMouseMove,r),a(p.document,"touchmove",this._onMouseMove,r)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(o,c){this.__onTransformGesture&&this.__onTransformGesture(o,c)},_onDrag:function(o,c){this.__onDrag&&this.__onDrag(o,c)},_onMouseWheel:function(o){this.__onMouseWheel(o)},_onMouseOut:function(o){var c=this._hoveredTarget;this.fire("mouse:out",{target:c,e:o}),this._hoveredTarget=null,c&&c.fire("mouseout",{e:o});var s=this;this._hoveredTargets.forEach(function(f){s.fire("mouse:out",{target:f,e:o}),f&&f.fire("mouseout",{e:o})}),this._hoveredTargets=[]},_onMouseEnter:function(o){!this._currentTransform&&!this.findTarget(o)&&(this.fire("mouse:over",{target:null,e:o}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(o,c){this.__onOrientationChange&&this.__onOrientationChange(o,c)},_onShake:function(o,c){this.__onShake&&this.__onShake(o,c)},_onLongPress:function(o,c){this.__onLongPress&&this.__onLongPress(o,c)},_onDragOver:function(o){o.preventDefault();var c=this._simpleEventHandler("dragover",o);this._fireEnterLeaveEvents(c,o)},_onDrop:function(o){return this._simpleEventHandler("drop:before",o),this._simpleEventHandler("drop",o)},_onContextMenu:function(o){return this.stopContextMenu&&(o.stopPropagation(),o.preventDefault()),!1},_onDoubleClick:function(o){this._cacheTransformEventData(o),this._handleEvent(o,"dblclick"),this._resetTransformEventData(o)},getPointerId:function(o){var c=o.changedTouches;return c?c[0]&&c[0].identifier:this.enablePointerEvents?o.pointerId:-1},_isMainEvent:function(o){return o.isPrimary===!0?!0:o.isPrimary===!1?!1:o.type==="touchend"&&o.touches.length===0?!0:o.changedTouches?o.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(o){o.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(o)),this.__onMouseDown(o),this._resetTransformEventData();var c=this.upperCanvasEl,s=this._getEventPrefix();g(p.document,"touchend",this._onTouchEnd,r),g(p.document,"touchmove",this._onMouseMove,r),a(c,s+"down",this._onMouseDown)},_onMouseDown:function(o){this.__onMouseDown(o),this._resetTransformEventData();var c=this.upperCanvasEl,s=this._getEventPrefix();a(c,s+"move",this._onMouseMove,r),g(p.document,s+"up",this._onMouseUp),g(p.document,s+"move",this._onMouseMove,r)},_onTouchEnd:function(o){if(!(o.touches.length>0)){this.__onMouseUp(o),this._resetTransformEventData(),this.mainTouchId=null;var c=this._getEventPrefix();a(p.document,"touchend",this._onTouchEnd,r),a(p.document,"touchmove",this._onMouseMove,r);var s=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){g(s.upperCanvasEl,c+"down",s._onMouseDown),s._willAddMouseDown=0},400)}},_onMouseUp:function(o){this.__onMouseUp(o),this._resetTransformEventData();var c=this.upperCanvasEl,s=this._getEventPrefix();this._isMainEvent(o)&&(a(p.document,s+"up",this._onMouseUp),a(p.document,s+"move",this._onMouseMove,r),g(c,s+"move",this._onMouseMove,r))},_onMouseMove:function(o){!this.allowTouchScrolling&&o.preventDefault&&o.preventDefault(),this.__onMouseMove(o)},_onResize:function(){this.calcOffset()},_shouldRender:function(o){var c=this._activeObject;return!!c!=!!o||c&&o&&c!==o?!0:(c&&c.isEditing,!1)},__onMouseUp:function(o){var c,s=this._currentTransform,f=this._groupSelector,m=!1,y=!f||f.left===0&&f.top===0;if(this._cacheTransformEventData(o),c=this._target,this._handleEvent(o,"up:before"),n(o,u)){this.fireRightClick&&this._handleEvent(o,"up",u,y);return}if(n(o,h)){this.fireMiddleClick&&this._handleEvent(o,"up",h,y),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(o);return}if(this._isMainEvent(o)){if(s&&(this._finalizeCurrentTransform(o),m=s.actionPerformed),!y){var _=c===this._activeObject;this._maybeGroupObjects(o),m||(m=this._shouldRender(c)||!_&&c===this._activeObject)}var S,O;if(c){if(S=c._findTargetCorner(this.getPointer(o,!0),p.util.isTouchEvent(o)),c.selectable&&c!==this._activeObject&&c.activeOn==="up")this.setActiveObject(c,o),m=!0;else{var D=c.controls[S],A=D&&D.getMouseUpHandler(o,c,D);A&&(O=this.getPointer(o),A(o,s,O.x,O.y))}c.isMoving=!1}if(s&&(s.target!==c||s.corner!==S)){var V=s.target&&s.target.controls[s.corner],q=V&&V.getMouseUpHandler(o,c,D);O=O||this.getPointer(o),q&&q(o,s,O.x,O.y)}this._setCursorFromEvent(o,c),this._handleEvent(o,"up",i,y),this._groupSelector=null,this._currentTransform=null,c&&(c.__corner=0),m?this.requestRenderAll():y||this.renderTop()}},_simpleEventHandler:function(o,c){var s=this.findTarget(c),f=this.targets,m={e:c,target:s,subTargets:f};if(this.fire(o,m),s&&s.fire(o,m),!f)return s;for(var y=0;y<f.length;y++)f[y].fire(o,m);return s},_handleEvent:function(o,c,s,f){var m=this._target,y=this.targets||[],_={e:o,target:m,subTargets:y,button:s||i,isClick:f||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};c==="up"&&(_.currentTarget=this.findTarget(o),_.currentSubTargets=this.targets),this.fire("mouse:"+c,_),m&&m.fire("mouse"+c,_);for(var S=0;S<y.length;S++)y[S].fire("mouse"+c,_)},_finalizeCurrentTransform:function(o){var c=this._currentTransform,s=c.target,f={e:o,target:s,transform:c,action:c.action};s._scaling&&(s._scaling=!1),s.setCoords(),(c.actionPerformed||this.stateful&&s.hasStateChanged())&&this._fire("modified",f)},_onMouseDownInDrawingMode:function(o){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(o).requestRenderAll();var c=this.getPointer(o);this.freeDrawingBrush.onMouseDown(c,{e:o,pointer:c}),this._handleEvent(o,"down")},_onMouseMoveInDrawingMode:function(o){if(this._isCurrentlyDrawing){var c=this.getPointer(o);this.freeDrawingBrush.onMouseMove(c,{e:o,pointer:c})}this.setCursor(this.freeDrawingCursor),this._handleEvent(o,"move")},_onMouseUpInDrawingMode:function(o){var c=this.getPointer(o);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:o,pointer:c}),this._handleEvent(o,"up")},__onMouseDown:function(o){this._cacheTransformEventData(o),this._handleEvent(o,"down:before");var c=this._target;if(n(o,u)){this.fireRightClick&&this._handleEvent(o,"down",u);return}if(n(o,h)){this.fireMiddleClick&&this._handleEvent(o,"down",h);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(o);return}if(this._isMainEvent(o)&&!this._currentTransform){var s=this._pointer;this._previousPointer=s;var f=this._shouldRender(c),m=this._shouldGroup(o,c);if(this._shouldClearSelection(o,c)?this.discardActiveObject(o):m&&(this._handleGrouping(o,c),c=this._activeObject),this.selection&&(!c||!c.selectable&&!c.isEditing&&c!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),c){var y=c===this._activeObject;c.selectable&&c.activeOn==="down"&&this.setActiveObject(c,o);var _=c._findTargetCorner(this.getPointer(o,!0),p.util.isTouchEvent(o));if(c.__corner=_,c===this._activeObject&&(_||!m)){this._setupCurrentTransform(o,c,y);var S=c.controls[_],s=this.getPointer(o),O=S&&S.getMouseDownHandler(o,c,S);O&&O(o,this._currentTransform,s.x,s.y)}}this._handleEvent(o,"down"),(f||m)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(o){this._resetTransformEventData(),this._pointer=this.getPointer(o,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(o)||null},_beforeTransform:function(o){var c=this._currentTransform;this.stateful&&c.target.saveState(),this.fire("before:transform",{e:o,transform:c})},__onMouseMove:function(o){this._handleEvent(o,"move:before"),this._cacheTransformEventData(o);var c,s;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(o);return}if(this._isMainEvent(o)){var f=this._groupSelector;f?(s=this._absolutePointer,f.left=s.x-f.ex,f.top=s.y-f.ey,this.renderTop()):this._currentTransform?this._transformObject(o):(c=this.findTarget(o)||null,this._setCursorFromEvent(o,c),this._fireOverOutEvents(c,o)),this._handleEvent(o,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(o,c){var s=this._hoveredTarget,f=this._hoveredTargets,m=this.targets,y=Math.max(f.length,m.length);this.fireSyntheticInOutEvents(o,c,{oldTarget:s,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var _=0;_<y;_++)this.fireSyntheticInOutEvents(m[_],c,{oldTarget:f[_],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=o,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(o,c){var s=this._draggedoverTarget,f=this._hoveredTargets,m=this.targets,y=Math.max(f.length,m.length);this.fireSyntheticInOutEvents(o,c,{oldTarget:s,evtOut:"dragleave",evtIn:"dragenter"});for(var _=0;_<y;_++)this.fireSyntheticInOutEvents(m[_],c,{oldTarget:f[_],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=o},fireSyntheticInOutEvents:function(o,c,s){var f,m,y=s.oldTarget,_,S,O=y!==o,D=s.canvasEvtIn,A=s.canvasEvtOut;O&&(f={e:c,target:o,previousTarget:y},m={e:c,target:y,nextTarget:o}),S=o&&O,_=y&&O,_&&(A&&this.fire(A,m),y.fire(s.evtOut,m)),S&&(D&&this.fire(D,f),o.fire(s.evtIn,f))},__onMouseWheel:function(o){this._cacheTransformEventData(o),this._handleEvent(o,"wheel"),this._resetTransformEventData()},_transformObject:function(o){var c=this.getPointer(o),s=this._currentTransform;s.reset=!1,s.shiftKey=o.shiftKey,s.altKey=o[this.centeredKey],this._performTransformAction(o,s,c),s.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(o,c,s){var f=s.x,m=s.y,y=c.action,_=!1,S=c.actionHandler;S&&(_=S(o,c,f,m)),y==="drag"&&_&&(c.target.isMoving=!0,this.setCursor(c.target.moveCursor||this.moveCursor)),c.actionPerformed=c.actionPerformed||_},_fire:p.controlsUtils.fireEvent,_setCursorFromEvent:function(o,c){if(!c)return this.setCursor(this.defaultCursor),!1;var s=c.hoverCursor||this.hoverCursor,f=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,m=(!f||!f.contains(c))&&c._findTargetCorner(this.getPointer(o,!0));m?this.setCursor(this.getCornerCursor(m,c,o)):(c.subTargetCheck&&this.targets.concat().reverse().map(function(y){s=y.hoverCursor||s}),this.setCursor(s))},getCornerCursor:function(o,c,s){var f=c.controls[o];return f.cursorStyleHandler(s,f,c)}})}(),function(){var g=Math.min,a=Math.max;p.util.object.extend(p.Canvas.prototype,{_shouldGroup:function(u,h){var i=this._activeObject;return i&&this._isSelectionKeyPressed(u)&&h&&h.selectable&&this.selection&&(i!==h||i.type==="activeSelection")&&!h.onSelect({e:u})},_handleGrouping:function(u,h){var i=this._activeObject;i.__corner||h===i&&(h=this.findTarget(u,!0),!h||!h.selectable)||(i&&i.type==="activeSelection"?this._updateActiveSelection(h,u):this._createActiveSelection(h,u))},_updateActiveSelection:function(u,h){var i=this._activeObject,r=i._objects.slice(0);i.contains(u)?(i.removeWithUpdate(u),this._hoveredTarget=u,this._hoveredTargets=this.targets.concat(),i.size()===1&&this._setActiveObject(i.item(0),h)):(i.addWithUpdate(u),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(r,h)},_createActiveSelection:function(u,h){var i=this.getActiveObjects(),r=this._createGroup(u);this._hoveredTarget=r,this._setActiveObject(r,h),this._fireSelectionEvents(i,h)},_createGroup:function(u){var h=this._objects,i=h.indexOf(this._activeObject)<h.indexOf(u),r=i?[this._activeObject,u]:[u,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new p.ActiveSelection(r,{canvas:this})},_groupSelectedObjects:function(u){var h=this._collectObjects(u),i;h.length===1?this.setActiveObject(h[0],u):h.length>1&&(i=new p.ActiveSelection(h.reverse(),{canvas:this}),this.setActiveObject(i,u))},_collectObjects:function(u){for(var h=[],i,r=this._groupSelector.ex,n=this._groupSelector.ey,o=r+this._groupSelector.left,c=n+this._groupSelector.top,s=new p.Point(g(r,o),g(n,c)),f=new p.Point(a(r,o),a(n,c)),m=!this.selectionFullyContained,y=r===o&&n===c,_=this._objects.length;_--&&(i=this._objects[_],!(!(!i||!i.selectable||!i.visible)&&(m&&i.intersectsWithRect(s,f,!0)||i.isContainedWithinRect(s,f,!0)||m&&i.containsPoint(s,null,!0)||m&&i.containsPoint(f,null,!0))&&(h.push(i),y))););return h.length>1&&(h=h.filter(function(S){return!S.onSelect({e:u})})),h},_maybeGroupObjects:function(u){this.selection&&this._groupSelector&&this._groupSelectedObjects(u),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){p.util.object.extend(p.StaticCanvas.prototype,{toDataURL:function(g){g||(g={});var a=g.format||"png",u=g.quality||1,h=(g.multiplier||1)*(g.enableRetinaScaling?this.getRetinaScaling():1),i=this.toCanvasElement(h,g);return p.util.toDataURL(i,a,u)},toCanvasElement:function(g,a){g=g||1,a=a||{};var u=(a.width||this.width)*g,h=(a.height||this.height)*g,i=this.getZoom(),r=this.width,n=this.height,o=i*g,c=this.viewportTransform,s=(c[4]-(a.left||0))*g,f=(c[5]-(a.top||0))*g,m=this.interactive,y=[o,0,0,o,s,f],_=this.enableRetinaScaling,S=p.util.createCanvasElement(),O=this.contextTop;return S.width=u,S.height=h,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=y,this.width=u,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(S.getContext("2d"),this._objects),this.viewportTransform=c,this.width=r,this.height=n,this.calcViewportBoundaries(),this.interactive=m,this.enableRetinaScaling=_,this.contextTop=O,S}})}(),p.util.object.extend(p.StaticCanvas.prototype,{loadFromJSON:function(g,a,u){if(g){var h=typeof g=="string"?JSON.parse(g):p.util.object.clone(g),i=this,r=h.clipPath,n=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete h.clipPath,this._enlivenObjects(h.objects,function(o){i.clear(),i._setBgOverlay(h,function(){r?i._enlivenObjects([r],function(c){i.clipPath=c[0],i.__setupCanvas.call(i,h,o,n,a)}):i.__setupCanvas.call(i,h,o,n,a)})},u),this}},__setupCanvas:function(g,a,u,h){var i=this;a.forEach(function(r,n){i.insertAt(r,n)}),this.renderOnAddRemove=u,delete g.objects,delete g.backgroundImage,delete g.overlayImage,delete g.background,delete g.overlay,this._setOptions(g),this.renderAll(),h&&h()},_setBgOverlay:function(g,a){var u={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!g.backgroundImage&&!g.overlayImage&&!g.background&&!g.overlay){a&&a();return}var h=function(){u.backgroundImage&&u.overlayImage&&u.backgroundColor&&u.overlayColor&&a&&a()};this.__setBgOverlay("backgroundImage",g.backgroundImage,u,h),this.__setBgOverlay("overlayImage",g.overlayImage,u,h),this.__setBgOverlay("backgroundColor",g.background,u,h),this.__setBgOverlay("overlayColor",g.overlay,u,h)},__setBgOverlay:function(g,a,u,h){var i=this;if(!a){u[g]=!0,h&&h();return}g==="backgroundImage"||g==="overlayImage"?p.util.enlivenObjects([a],function(r){i[g]=r[0],u[g]=!0,h&&h()}):this["set"+p.util.string.capitalize(g,!0)](a,function(){u[g]=!0,h&&h()})},_enlivenObjects:function(g,a,u){if(!g||g.length===0){a&&a([]);return}p.util.enlivenObjects(g,function(h){a&&a(h)},null,u)},_toDataURL:function(g,a){this.clone(function(u){a(u.toDataURL(g))})},_toDataURLWithMultiplier:function(g,a,u){this.clone(function(h){u(h.toDataURLWithMultiplier(g,a))})},clone:function(g,a){var u=JSON.stringify(this.toJSON(a));this.cloneWithoutData(function(h){h.loadFromJSON(u,function(){g&&g(h)})})},cloneWithoutData:function(g){var a=p.util.createCanvasElement();a.width=this.width,a.height=this.height;var u=new p.Canvas(a);this.backgroundImage?(u.setBackgroundImage(this.backgroundImage.src,function(){u.renderAll(),g&&g(u)}),u.backgroundImageOpacity=this.backgroundImageOpacity,u.backgroundImageStretch=this.backgroundImageStretch):g&&g(u)}}),function(g){var a=g.fabric||(g.fabric={}),u=a.util.object.extend,h=a.util.object.clone,i=a.util.toFixed,r=a.util.string.capitalize,n=a.util.degreesToRadians,o=!a.isLikelyNode,c=2;a.Object||(a.Object=a.util.createClass(a.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:o,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(s){s&&this.setOptions(s)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=a.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(s){var f=a.perfLimitSizeTotal,m=s.width,y=s.height,_=a.maxCacheSideLimit,S=a.minCacheSideLimit;if(m<=_&&y<=_&&m*y<=f)return m<S&&(s.width=S),y<S&&(s.height=S),s;var O=m/y,D=a.util.limitDimsByArea(O,f),A=a.util.capValue,V=A(S,D.x,_),q=A(S,D.y,_);return m>V&&(s.zoomX/=m/V,s.width=V,s.capped=!0),y>q&&(s.zoomY/=y/q,s.height=q,s.capped=!0),s},_getCacheCanvasDimensions:function(){var s=this.getTotalObjectScaling(),f=this._getTransformedDimensions(0,0),m=f.x*s.scaleX/this.scaleX,y=f.y*s.scaleY/this.scaleY;return{width:m+c,height:y+c,zoomX:s.scaleX,zoomY:s.scaleY,x:m,y}},_updateCacheCanvas:function(){var s=this.canvas;if(this.noScaleCache&&s&&s._currentTransform){var f=s._currentTransform.target,m=s._currentTransform.action;if(this===f&&m.slice&&m.slice(0,5)==="scale")return!1}var y=this._cacheCanvas,_=this._limitCacheSize(this._getCacheCanvasDimensions()),S=a.minCacheSideLimit,O=_.width,D=_.height,A,V,q=_.zoomX,oe=_.zoomY,ge=O!==this.cacheWidth||D!==this.cacheHeight,me=this.zoomX!==q||this.zoomY!==oe,he=ge||me,de=0,Ce=0,_e=!1;if(ge){var Z=this._cacheCanvas.width,k=this._cacheCanvas.height,M=O>Z||D>k,x=(O<Z*.9||D<k*.9)&&Z>S&&k>S;_e=M||x,M&&!_.capped&&(O>S||D>S)&&(de=O*.1,Ce=D*.1)}return this instanceof a.Text&&this.path&&(he=!0,_e=!0,de+=this.getHeightOfLine(0)*this.zoomX,Ce+=this.getHeightOfLine(0)*this.zoomY),he?(_e?(y.width=Math.ceil(O+de),y.height=Math.ceil(D+Ce)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,y.width,y.height)),A=_.x/2,V=_.y/2,this.cacheTranslationX=Math.round(y.width/2-A)+A,this.cacheTranslationY=Math.round(y.height/2-V)+V,this.cacheWidth=O,this.cacheHeight=D,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(q,oe),this.zoomX=q,this.zoomY=oe,!0):!1},setOptions:function(s){this._setOptions(s),this._initGradient(s.fill,"fill"),this._initGradient(s.stroke,"stroke"),this._initPattern(s.fill,"fill"),this._initPattern(s.stroke,"stroke")},transform:function(s){var f=this.group&&!this.group._transformDone||this.group&&this.canvas&&s===this.canvas.contextTop,m=this.calcTransformMatrix(!f);s.transform(m[0],m[1],m[2],m[3],m[4],m[5])},toObject:function(s){var f=a.Object.NUM_FRACTION_DIGITS,m={type:this.type,version:a.version,originX:this.originX,originY:this.originY,left:i(this.left,f),top:i(this.top,f),width:i(this.width,f),height:i(this.height,f),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,f),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:i(this.strokeMiterLimit,f),scaleX:i(this.scaleX,f),scaleY:i(this.scaleY,f),angle:i(this.angle,f),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,f),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:i(this.skewX,f),skewY:i(this.skewY,f)};return this.clipPath&&!this.clipPath.excludeFromExport&&(m.clipPath=this.clipPath.toObject(s),m.clipPath.inverted=this.clipPath.inverted,m.clipPath.absolutePositioned=this.clipPath.absolutePositioned),a.util.populateWithProperties(this,m,s),this.includeDefaultValues||(m=this._removeDefaultValues(m)),m},toDatalessObject:function(s){return this.toObject(s)},_removeDefaultValues:function(s){var f=a.util.getKlass(s.type).prototype,m=f.stateProperties;return m.forEach(function(y){y==="left"||y==="top"||(s[y]===f[y]&&delete s[y],Array.isArray(s[y])&&Array.isArray(f[y])&&s[y].length===0&&f[y].length===0&&delete s[y])}),s},toString:function(){return"#<fabric."+r(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var s=a.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(s.scaleX),scaleY:Math.abs(s.scaleY)}},getTotalObjectScaling:function(){var s=this.getObjectScaling(),f=s.scaleX,m=s.scaleY;if(this.canvas){var y=this.canvas.getZoom(),_=this.canvas.getRetinaScaling();f*=y*_,m*=y*_}return{scaleX:f,scaleY:m}},getObjectOpacity:function(){var s=this.opacity;return this.group&&(s*=this.group.getObjectOpacity()),s},_set:function(s,f){var m=s==="scaleX"||s==="scaleY",y=this[s]!==f,_=!1;return m&&(f=this._constrainScale(f)),s==="scaleX"&&f<0?(this.flipX=!this.flipX,f*=-1):s==="scaleY"&&f<0?(this.flipY=!this.flipY,f*=-1):s==="shadow"&&f&&!(f instanceof a.Shadow)?f=new a.Shadow(f):s==="dirty"&&this.group&&this.group.set("dirty",f),this[s]=f,y&&(_=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(s)>-1?(this.dirty=!0,_&&this.group.set("dirty",!0)):_&&this.stateProperties.indexOf(s)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:a.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(s){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(s.save(),this._setupCompositeOperation(s),this.drawSelectionBackground(s),this.transform(s),this._setOpacity(s),this._setShadow(s,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(s)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(s),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),s.restore())},renderCache:function(s){s=s||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,s.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(s,f){if(s.save(),f.inverted?s.globalCompositeOperation="destination-out":s.globalCompositeOperation="destination-in",f.absolutePositioned){var m=a.util.invertTransform(this.calcTransformMatrix());s.transform(m[0],m[1],m[2],m[3],m[4],m[5])}f.transform(s),s.scale(1/f.zoomX,1/f.zoomY),s.drawImage(f._cacheCanvas,-f.cacheTranslationX,-f.cacheTranslationY),s.restore()},drawObject:function(s,f){var m=this.fill,y=this.stroke;f?(this.fill="black",this.stroke="",this._setClippingProperties(s)):this._renderBackground(s),this._render(s),this._drawClipPath(s,this.clipPath),this.fill=m,this.stroke=y},_drawClipPath:function(s,f){f&&(f.canvas=this.canvas,f.shouldCache(),f._transformDone=!0,f.renderCache({forClipping:!0}),this.drawClipPathOnCache(s,f))},drawCacheOnCanvas:function(s){s.scale(1/this.zoomX,1/this.zoomY),s.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(s){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!s&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!s){var f=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-f/2,-m/2,f,m)}return!0}return!1},_renderBackground:function(s){if(this.backgroundColor){var f=this._getNonTransformedDimensions();s.fillStyle=this.backgroundColor,s.fillRect(-f.x/2,-f.y/2,f.x,f.y),this._removeShadow(s)}},_setOpacity:function(s){this.group&&!this.group._transformDone?s.globalAlpha=this.getObjectOpacity():s.globalAlpha*=this.opacity},_setStrokeStyles:function(s,f){var m=f.stroke;m&&(s.lineWidth=f.strokeWidth,s.lineCap=f.strokeLineCap,s.lineDashOffset=f.strokeDashOffset,s.lineJoin=f.strokeLineJoin,s.miterLimit=f.strokeMiterLimit,m.toLive?m.gradientUnits==="percentage"||m.gradientTransform||m.patternTransform?this._applyPatternForTransformedGradient(s,m):(s.strokeStyle=m.toLive(s,this),this._applyPatternGradientTransform(s,m)):s.strokeStyle=f.stroke)},_setFillStyles:function(s,f){var m=f.fill;m&&(m.toLive?(s.fillStyle=m.toLive(s,this),this._applyPatternGradientTransform(s,f.fill)):s.fillStyle=m)},_setClippingProperties:function(s){s.globalAlpha=1,s.strokeStyle="transparent",s.fillStyle="#000000"},_setLineDash:function(s,f){!f||f.length===0||(1&f.length&&f.push.apply(f,f),s.setLineDash(f))},_renderControls:function(s,f){var m=this.getViewportTransform(),y=this.calcTransformMatrix(),_,S,O;f=f||{},S=typeof f.hasBorders<"u"?f.hasBorders:this.hasBorders,O=typeof f.hasControls<"u"?f.hasControls:this.hasControls,y=a.util.multiplyTransformMatrices(m,y),_=a.util.qrDecompose(y),s.save(),s.translate(_.translateX,_.translateY),s.lineWidth=1*this.borderScaleFactor,this.group||(s.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(_.angle-=180),s.rotate(n(this.group?_.angle:this.angle)),f.forActiveSelection||this.group?S&&this.drawBordersInGroup(s,_,f):S&&this.drawBorders(s,f),O&&this.drawControls(s,f),s.restore()},_setShadow:function(s){if(this.shadow){var f=this.shadow,m=this.canvas,y,_=m&&m.viewportTransform[0]||1,S=m&&m.viewportTransform[3]||1;f.nonScaling?y={scaleX:1,scaleY:1}:y=this.getObjectScaling(),m&&m._isRetinaScaling()&&(_*=a.devicePixelRatio,S*=a.devicePixelRatio),s.shadowColor=f.color,s.shadowBlur=f.blur*a.browserShadowBlurConstant*(_+S)*(y.scaleX+y.scaleY)/4,s.shadowOffsetX=f.offsetX*_*y.scaleX,s.shadowOffsetY=f.offsetY*S*y.scaleY}},_removeShadow:function(s){this.shadow&&(s.shadowColor="",s.shadowBlur=s.shadowOffsetX=s.shadowOffsetY=0)},_applyPatternGradientTransform:function(s,f){if(!f||!f.toLive)return{offsetX:0,offsetY:0};var m=f.gradientTransform||f.patternTransform,y=-this.width/2+f.offsetX||0,_=-this.height/2+f.offsetY||0;return f.gradientUnits==="percentage"?s.transform(this.width,0,0,this.height,y,_):s.transform(1,0,0,1,y,_),m&&s.transform(m[0],m[1],m[2],m[3],m[4],m[5]),{offsetX:y,offsetY:_}},_renderPaintInOrder:function(s){this.paintFirst==="stroke"?(this._renderStroke(s),this._renderFill(s)):(this._renderFill(s),this._renderStroke(s))},_render:function(){},_renderFill:function(s){this.fill&&(s.save(),this._setFillStyles(s,this),this.fillRule==="evenodd"?s.fill("evenodd"):s.fill(),s.restore())},_renderStroke:function(s){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(s),s.save(),this.strokeUniform&&this.group){var f=this.getObjectScaling();s.scale(1/f.scaleX,1/f.scaleY)}else this.strokeUniform&&s.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(s,this.strokeDashArray),this._setStrokeStyles(s,this),s.stroke(),s.restore()}},_applyPatternForTransformedGradient:function(s,f){var m=this._limitCacheSize(this._getCacheCanvasDimensions()),y=a.util.createCanvasElement(),_,S=this.canvas.getRetinaScaling(),O=m.x/this.scaleX/S,D=m.y/this.scaleY/S;y.width=Math.ceil(O),y.height=Math.ceil(D),_=y.getContext("2d"),_.beginPath(),_.moveTo(0,0),_.lineTo(O,0),_.lineTo(O,D),_.lineTo(0,D),_.closePath(),_.translate(O/2,D/2),_.scale(m.zoomX/this.scaleX/S,m.zoomY/this.scaleY/S),this._applyPatternGradientTransform(_,f),_.fillStyle=f.toLive(s),_.fill(),s.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),s.scale(S*this.scaleX/m.zoomX,S*this.scaleY/m.zoomY),s.strokeStyle=_.createPattern(y,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var s=a.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",s.scaleX),this.set("scaleY",s.scaleY),this.angle=s.angle,this.skewX=s.skewX,this.skewY=0}},_removeTransformMatrix:function(s){var f=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),f=a.util.transformPoint(f,this.transformMatrix)),this.transformMatrix=null,s&&(this.scaleX*=s.scaleX,this.scaleY*=s.scaleY,this.cropX=s.cropX,this.cropY=s.cropY,f.x+=s.offsetLeft,f.y+=s.offsetTop,this.width=s.width,this.height=s.height),this.setPositionByOrigin(f,"center","center")},clone:function(s,f){var m=this.toObject(f);this.constructor.fromObject?this.constructor.fromObject(m,s):a.Object._fromObject("Object",m,s)},cloneAsImage:function(s,f){var m=this.toCanvasElement(f);return s&&s(new a.Image(m)),this},toCanvasElement:function(s){s||(s={});var f=a.util,m=f.saveObjectTransform(this),y=this.group,_=this.shadow,S=Math.abs,O=(s.multiplier||1)*(s.enableRetinaScaling?a.devicePixelRatio:1);delete this.group,s.withoutTransform&&f.resetObjectTransform(this),s.withoutShadow&&(this.shadow=null);var D=a.util.createCanvasElement(),A=this.getBoundingRect(!0,!0),V=this.shadow,q,oe={x:0,y:0},ge,me,he;V&&(ge=V.blur,V.nonScaling?q={scaleX:1,scaleY:1}:q=this.getObjectScaling(),oe.x=2*Math.round(S(V.offsetX)+ge)*S(q.scaleX),oe.y=2*Math.round(S(V.offsetY)+ge)*S(q.scaleY)),me=A.width+oe.x,he=A.height+oe.y,D.width=Math.ceil(me),D.height=Math.ceil(he);var de=new a.StaticCanvas(D,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});s.format==="jpeg"&&(de.backgroundColor="#fff"),this.setPositionByOrigin(new a.Point(de.width/2,de.height/2),"center","center");var Ce=this.canvas;de.add(this);var _e=de.toCanvasElement(O||1,s);return this.shadow=_,this.set("canvas",Ce),y&&(this.group=y),this.set(m).setCoords(),de._objects=[],de.dispose(),de=null,_e},toDataURL:function(s){return s||(s={}),a.util.toDataURL(this.toCanvasElement(s),s.format||"png",s.quality||1)},isType:function(s){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===s},complexity:function(){return 1},toJSON:function(s){return this.toObject(s)},rotate:function(s){var f=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return f&&this._setOriginToCenter(),this.set("angle",s),f&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(s,f){f=f||this.canvas.getPointer(s);var m=new a.Point(f.x,f.y),y=this._getLeftTopCoords();return this.angle&&(m=a.util.rotatePoint(m,y,n(-this.angle))),{x:m.x-y.x,y:m.y-y.y}},_setupCompositeOperation:function(s){this.globalCompositeOperation&&(s.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){a.runningAnimations&&a.runningAnimations.cancelByTarget(this)}}),a.util.createAccessors&&a.util.createAccessors(a.Object),u(a.Object.prototype,a.Observable),a.Object.NUM_FRACTION_DIGITS=2,a.Object.ENLIVEN_PROPS=["clipPath"],a.Object._fromObject=function(s,f,m,y){var _=a[s];f=h(f,!0),a.util.enlivenPatterns([f.fill,f.stroke],function(S){typeof S[0]<"u"&&(f.fill=S[0]),typeof S[1]<"u"&&(f.stroke=S[1]),a.util.enlivenObjectEnlivables(f,f,function(){var O=y?new _(f[y],f):new _(f);m&&m(O)})})},a.Object.__uid=0)}(w),function(){var g=p.util.degreesToRadians,a={left:-.5,center:0,right:.5},u={top:-.5,center:0,bottom:.5};p.util.object.extend(p.Object.prototype,{translateToGivenOrigin:function(h,i,r,n,o){var c=h.x,s=h.y,f,m,y;return typeof i=="string"?i=a[i]:i-=.5,typeof n=="string"?n=a[n]:n-=.5,f=n-i,typeof r=="string"?r=u[r]:r-=.5,typeof o=="string"?o=u[o]:o-=.5,m=o-r,(f||m)&&(y=this._getTransformedDimensions(),c=h.x+f*y.x,s=h.y+m*y.y),new p.Point(c,s)},translateToCenterPoint:function(h,i,r){var n=this.translateToGivenOrigin(h,i,r,"center","center");return this.angle?p.util.rotatePoint(n,h,g(this.angle)):n},translateToOriginPoint:function(h,i,r){var n=this.translateToGivenOrigin(h,"center","center",i,r);return this.angle?p.util.rotatePoint(n,h,g(this.angle)):n},getCenterPoint:function(){var h=new p.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,i){var r=this.getCenterPoint();return this.translateToOriginPoint(r,h,i)},toLocalPoint:function(h,i,r){var n=this.getCenterPoint(),o,c;return typeof i<"u"&&typeof r<"u"?o=this.translateToGivenOrigin(n,"center","center",i,r):o=new p.Point(this.left,this.top),c=new p.Point(h.x,h.y),this.angle&&(c=p.util.rotatePoint(c,n,-g(this.angle))),c.subtractEquals(o)},setPositionByOrigin:function(h,i,r){var n=this.translateToCenterPoint(h,i,r),o=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",o.x),this.set("top",o.y)},adjustPosition:function(h){var i=g(this.angle),r=this.getScaledWidth(),n=p.util.cos(i)*r,o=p.util.sin(i)*r,c,s;typeof this.originX=="string"?c=a[this.originX]:c=this.originX-.5,typeof h=="string"?s=a[h]:s=h-.5,this.left+=n*(s-c),this.top+=o*(s-c),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function g(r){return[new p.Point(r.tl.x,r.tl.y),new p.Point(r.tr.x,r.tr.y),new p.Point(r.br.x,r.br.y),new p.Point(r.bl.x,r.bl.y)]}var a=p.util,u=a.degreesToRadians,h=a.multiplyTransformMatrices,i=a.transformPoint;a.object.extend(p.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(r,n){return n?r?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),r?this.aCoords:this.lineCoords)},getCoords:function(r,n){return g(this._getCoords(r,n))},intersectsWithRect:function(r,n,o,c){var s=this.getCoords(o,c),f=p.Intersection.intersectPolygonRectangle(s,r,n);return f.status==="Intersection"},intersectsWithObject:function(r,n,o){var c=p.Intersection.intersectPolygonPolygon(this.getCoords(n,o),r.getCoords(n,o));return c.status==="Intersection"||r.isContainedWithinObject(this,n,o)||this.isContainedWithinObject(r,n,o)},isContainedWithinObject:function(r,n,o){for(var c=this.getCoords(n,o),s=n?r.aCoords:r.lineCoords,f=0,m=r._getImageLines(s);f<4;f++)if(!r.containsPoint(c[f],m))return!1;return!0},isContainedWithinRect:function(r,n,o,c){var s=this.getBoundingRect(o,c);return s.left>=r.x&&s.left+s.width<=n.x&&s.top>=r.y&&s.top+s.height<=n.y},containsPoint:function(r,f,o,c){var s=this._getCoords(o,c),f=f||this._getImageLines(s),m=this._findCrossPoints(r,f);return m!==0&&m%2===1},isOnScreen:function(r){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,o=this.canvas.vptCoords.br,c=this.getCoords(!0,r);return c.some(function(s){return s.x<=o.x&&s.x>=n.x&&s.y<=o.y&&s.y>=n.y})||this.intersectsWithRect(n,o,!0,r)?!0:this._containsCenterOfCanvas(n,o,r)},_containsCenterOfCanvas:function(r,n,o){var c={x:(r.x+n.x)/2,y:(r.y+n.y)/2};return!!this.containsPoint(c,null,!0,o)},isPartiallyOnScreen:function(r){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,o=this.canvas.vptCoords.br;if(this.intersectsWithRect(n,o,!0,r))return!0;var c=this.getCoords(!0,r).every(function(s){return(s.x>=o.x||s.x<=n.x)&&(s.y>=o.y||s.y<=n.y)});return c&&this._containsCenterOfCanvas(n,o,r)},_getImageLines:function(r){var n={topline:{o:r.tl,d:r.tr},rightline:{o:r.tr,d:r.br},bottomline:{o:r.br,d:r.bl},leftline:{o:r.bl,d:r.tl}};return n},_findCrossPoints:function(r,n){var o,c,s,f,m,y=0,_;for(var S in n)if(_=n[S],!(_.o.y<r.y&&_.d.y<r.y)&&!(_.o.y>=r.y&&_.d.y>=r.y)&&(_.o.x===_.d.x&&_.o.x>=r.x?m=_.o.x:(o=0,c=(_.d.y-_.o.y)/(_.d.x-_.o.x),s=r.y-o*r.x,f=_.o.y-c*_.o.x,m=-(s-f)/(o-c)),m>=r.x&&(y+=1),y===2))break;return y},getBoundingRect:function(r,n){var o=this.getCoords(r,n);return a.makeBoundingBoxFromPoints(o)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(r){return Math.abs(r)<this.minScaleLimit?r<0?-this.minScaleLimit:this.minScaleLimit:r===0?1e-4:r},scale:function(r){return this._set("scaleX",r),this._set("scaleY",r),this.setCoords()},scaleToWidth:function(r,n){var o=this.getBoundingRect(n).width/this.getScaledWidth();return this.scale(r/this.width/o)},scaleToHeight:function(r,n){var o=this.getBoundingRect(n).height/this.getScaledHeight();return this.scale(r/this.height/o)},calcLineCoords:function(){var r=this.getViewportTransform(),n=this.padding,o=u(this.angle),c=a.cos(o),s=a.sin(o),f=c*n,m=s*n,y=f+m,_=f-m,S=this.calcACoords(),O={tl:i(S.tl,r),tr:i(S.tr,r),bl:i(S.bl,r),br:i(S.br,r)};return n&&(O.tl.x-=_,O.tl.y-=y,O.tr.x+=y,O.tr.y-=_,O.bl.x-=y,O.bl.y+=_,O.br.x+=_,O.br.y+=y),O},calcOCoords:function(){var r=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),o=this.getViewportTransform(),c=h(o,n),s=h(c,r),s=h(s,[1/o[0],0,0,1/o[3],0,0]),f=this._calculateCurrentDimensions(),m={};return this.forEachControl(function(y,_,S){m[_]=y.positionHandler(f,s,S)}),m},calcACoords:function(){var r=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),o=h(n,r),c=this._getTransformedDimensions(),s=c.x/2,f=c.y/2;return{tl:i({x:-s,y:-f},o),tr:i({x:s,y:-f},o),bl:i({x:-s,y:f},o),br:i({x:s,y:f},o)}},setCoords:function(r){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),r?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return a.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var r=this.getCenterPoint();return[1,0,0,1,r.x,r.y]},transformMatrixKey:function(r){var n="_",o="";return!r&&this.group&&(o=this.group.transformMatrixKey(r)+n),o+this.top+n+this.left+n+this.scaleX+n+this.scaleY+n+this.skewX+n+this.skewY+n+this.angle+n+this.originX+n+this.originY+n+this.width+n+this.height+n+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(r){var n=this.calcOwnMatrix();if(r||!this.group)return n;var o=this.transformMatrixKey(r),c=this.matrixCache||(this.matrixCache={});return c.key===o?c.value:(this.group&&(n=h(this.group.calcTransformMatrix(!1),n)),c.key=o,c.value=n,n)},calcOwnMatrix:function(){var r=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===r)return n.value;var o=this._calcTranslateMatrix(),c={angle:this.angle,translateX:o[4],translateY:o[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=r,n.value=a.composeMatrix(c),n.value},_getNonTransformedDimensions:function(){var r=this.strokeWidth,n=this.width+r,o=this.height+r;return{x:n,y:o}},_getTransformedDimensions:function(r,n){typeof r>"u"&&(r=this.skewX),typeof n>"u"&&(n=this.skewY);var o,c,s,f=r===0&&n===0;if(this.strokeUniform?(c=this.width,s=this.height):(o=this._getNonTransformedDimensions(),c=o.x,s=o.y),f)return this._finalizeDimensions(c*this.scaleX,s*this.scaleY);var m=a.sizeAfterTransform(c,s,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:r,skewY:n});return this._finalizeDimensions(m.x,m.y)},_finalizeDimensions:function(r,n){return this.strokeUniform?{x:r+this.strokeWidth,y:n+this.strokeWidth}:{x:r,y:n}},_calculateCurrentDimensions:function(){var r=this.getViewportTransform(),n=this._getTransformedDimensions(),o=i(n,r,!0);return o.scalarAdd(2*this.padding)}})}(),p.util.object.extend(p.Object.prototype,{sendToBack:function(){return this.group?p.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?p.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(g){return this.group?p.StaticCanvas.prototype.sendBackwards.call(this.group,this,g):this.canvas&&this.canvas.sendBackwards(this,g),this},bringForward:function(g){return this.group?p.StaticCanvas.prototype.bringForward.call(this.group,this,g):this.canvas&&this.canvas.bringForward(this,g),this},moveTo:function(g){return this.group&&this.group.type!=="activeSelection"?p.StaticCanvas.prototype.moveTo.call(this.group,this,g):this.canvas&&this.canvas.moveTo(this,g),this}}),function(){function g(u,h){if(h){if(h.toLive)return u+": url(#SVGID_"+h.id+"); ";var i=new p.Color(h),r=u+": "+i.toRgb()+"; ",n=i.getAlpha();return n!==1&&(r+=u+"-opacity: "+n.toString()+"; "),r}else return u+": none; "}var a=p.util.toFixed;p.util.object.extend(p.Object.prototype,{getSvgStyles:function(u){var h=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",n=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",c=this.strokeLineJoin?this.strokeLineJoin:"miter",s=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=typeof this.opacity<"u"?this.opacity:"1",m=this.visible?"":" visibility: hidden;",y=u?"":this.getSvgFilter(),_=g("fill",this.fill),S=g("stroke",this.stroke);return[S,"stroke-width: ",i,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",n,"; ","stroke-linejoin: ",c,"; ","stroke-miterlimit: ",s,"; ",_,"fill-rule: ",h,"; ","opacity: ",f,";",y,m].join("")},getSvgSpanStyles:function(u,h){var i="; ",n=u.fontFamily?"font-family: "+(u.fontFamily.indexOf("'")===-1&&u.fontFamily.indexOf('"')===-1?"'"+u.fontFamily+"'":u.fontFamily)+i:"",r=u.strokeWidth?"stroke-width: "+u.strokeWidth+i:"",n=n,o=u.fontSize?"font-size: "+u.fontSize+"px"+i:"",c=u.fontStyle?"font-style: "+u.fontStyle+i:"",s=u.fontWeight?"font-weight: "+u.fontWeight+i:"",f=u.fill?g("fill",u.fill):"",m=u.stroke?g("stroke",u.stroke):"",y=this.getSvgTextDecoration(u),_=u.deltaY?"baseline-shift: "+-u.deltaY+"; ":"";return y&&(y="text-decoration: "+y+i),[m,r,n,o,c,s,y,f,_,h?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(u){return["overline","underline","line-through"].filter(function(h){return u[h.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(u,h){var i=u?this.calcTransformMatrix():this.calcOwnMatrix(),r='transform="'+p.util.matrixToSVG(i);return r+(h||"")+'" '},_setSVGBg:function(u){if(this.backgroundColor){var h=p.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',a(-this.width/2,h),'" y="',a(-this.height/2,h),'" width="',a(this.width,h),'" height="',a(this.height,h),`"></rect>
`)}},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(u),{reviver:u})},toClipPathSVG:function(u){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(u),{reviver:u})},_createBaseClipPathSVGMarkup:function(u,h){h=h||{};var i=h.reviver,r=h.additionalTransform||"",n=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),o=u.indexOf("COMMON_PARTS");return u[o]=n,i?i(u.join("")):u.join("")},_createBaseSVGMarkup:function(u,h){h=h||{};var i=h.noStyle,r=h.reviver,n=i?"":'style="'+this.getSvgStyles()+'" ',o=h.withShadow?'style="'+this.getSvgFilter()+'" ':"",c=this.clipPath,s=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",f=c&&c.absolutePositioned,m=this.stroke,y=this.fill,_=this.shadow,S,O=[],D,A=u.indexOf("COMMON_PARTS"),V=h.additionalTransform;return c&&(c.clipPathId="CLIPPATH_"+p.Object.__uid++,D='<clipPath id="'+c.clipPathId+`" >
`+c.toClipPathSVG(r)+`</clipPath>
`),f&&O.push("<g ",o,this.getSvgCommons(),` >
`),O.push("<g ",this.getSvgTransform(!1),f?"":o+this.getSvgCommons(),` >
`),S=[n,s,i?"":this.addPaintOrder()," ",V?'transform="'+V+'" ':""].join(""),u[A]=S,y&&y.toLive&&O.push(y.toSVG(this)),m&&m.toLive&&O.push(m.toSVG(this)),_&&O.push(_.toSVG(this)),c&&O.push(D),O.push(u.join("")),O.push(`</g>
`),f&&O.push(`</g>
`),r?r(O.join("")):O.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var g=p.util.object.extend,a="stateProperties";function u(i,r,n){var o={},c=!0;n.forEach(function(s){o[s]=i[s]}),g(i[r],o,c)}function h(i,r,n){if(i===r)return!0;if(Array.isArray(i)){if(!Array.isArray(r)||i.length!==r.length)return!1;for(var o=0,c=i.length;o<c;o++)if(!h(i[o],r[o]))return!1;return!0}else if(i&&typeof i=="object"){var s=Object.keys(i),f;if(!r||typeof r!="object"||!n&&s.length!==Object.keys(r).length)return!1;for(var o=0,c=s.length;o<c;o++)if(f=s[o],!(f==="canvas"||f==="group")&&!h(i[f],r[f]))return!1;return!0}}p.util.object.extend(p.Object.prototype,{hasStateChanged:function(i){i=i||a;var r="_"+i;return Object.keys(this[r]).length<this[i].length?!0:!h(this[r],this,!0)},saveState:function(i){var r=i&&i.propertySet||a,n="_"+r;return this[n]?(u(this,n,this[r]),i&&i.stateProperties&&u(this,n,i.stateProperties),this):this.setupState(i)},setupState:function(i){i=i||{};var r=i.propertySet||a;return i.propertySet=r,this["_"+r]={},this.saveState(i),this}})}(),function(){var g=p.util.degreesToRadians;p.util.object.extend(p.Object.prototype,{_findTargetCorner:function(a,u){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var h=a.x,i=a.y,r,n,o=Object.keys(this.oCoords),c=o.length-1,s;for(this.__corner=0;c>=0;c--)if(s=o[c],!!this.isControlVisible(s)&&(n=this._getImageLines(u?this.oCoords[s].touchCorner:this.oCoords[s].corner),r=this._findCrossPoints({x:h,y:i},n),r!==0&&r%2===1))return this.__corner=s,s;return!1},forEachControl:function(a){for(var u in this.controls)a(this.controls[u],u,this)},_setCornerCoords:function(){var a=this.oCoords;for(var u in a){var h=this.controls[u];a[u].corner=h.calcCornerCoords(this.angle,this.cornerSize,a[u].x,a[u].y,!1),a[u].touchCorner=h.calcCornerCoords(this.angle,this.touchCornerSize,a[u].x,a[u].y,!0)}},drawSelectionBackground:function(a){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;a.save();var u=this.getCenterPoint(),h=this._calculateCurrentDimensions(),i=this.canvas.viewportTransform;return a.translate(u.x,u.y),a.scale(1/i[0],1/i[3]),a.rotate(g(this.angle)),a.fillStyle=this.selectionBackgroundColor,a.fillRect(-h.x/2,-h.y/2,h.x,h.y),a.restore(),this},drawBorders:function(a,u){u=u||{};var h=this._calculateCurrentDimensions(),i=this.borderScaleFactor,r=h.x+i,n=h.y+i,o=typeof u.hasControls<"u"?u.hasControls:this.hasControls,c=!1;return a.save(),a.strokeStyle=u.borderColor||this.borderColor,this._setLineDash(a,u.borderDashArray||this.borderDashArray),a.strokeRect(-r/2,-n/2,r,n),o&&(a.beginPath(),this.forEachControl(function(s,f,m){s.withConnection&&s.getVisibility(m,f)&&(c=!0,a.moveTo(s.x*r,s.y*n),a.lineTo(s.x*r+s.offsetX,s.y*n+s.offsetY))}),c&&a.stroke()),a.restore(),this},drawBordersInGroup:function(a,u,h){h=h||{};var i=p.util.sizeAfterTransform(this.width,this.height,u),r=this.strokeWidth,n=this.strokeUniform,o=this.borderScaleFactor,c=i.x+r*(n?this.canvas.getZoom():u.scaleX)+o,s=i.y+r*(n?this.canvas.getZoom():u.scaleY)+o;return a.save(),this._setLineDash(a,h.borderDashArray||this.borderDashArray),a.strokeStyle=h.borderColor||this.borderColor,a.strokeRect(-c/2,-s/2,c,s),a.restore(),this},drawControls:function(a,u){u=u||{},a.save();var h=1,i,r;return this.canvas&&(h=this.canvas.getRetinaScaling()),a.setTransform(h,0,0,h,0,0),a.strokeStyle=a.fillStyle=u.cornerColor||this.cornerColor,this.transparentCorners||(a.strokeStyle=u.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(a,u.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(i=this.group.calcTransformMatrix()),this.forEachControl(function(n,o,c){r=c.oCoords[o],n.getVisibility(c,o)&&(i&&(r=p.util.transformPoint(r,i)),n.render(a,r.x,r.y,u,c))}),a.restore(),this},isControlVisible:function(a){return this.controls[a]&&this.controls[a].getVisibility(this,a)},setControlVisible:function(a,u){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[a]=u,this},setControlsVisibility:function(a){a||(a={});for(var u in a)this.setControlVisible(u,a[u]);return this},onDeselect:function(){},onSelect:function(){}})}(),p.util.object.extend(p.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(g,a){a=a||{};var u=function(){},h=a.onComplete||u,i=a.onChange||u,r=this;return p.util.animate({target:this,startValue:g.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(n){g.set("left",n),r.requestRenderAll(),i()},onComplete:function(){g.setCoords(),h()}})},fxCenterObjectV:function(g,a){a=a||{};var u=function(){},h=a.onComplete||u,i=a.onChange||u,r=this;return p.util.animate({target:this,startValue:g.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(n){g.set("top",n),r.requestRenderAll(),i()},onComplete:function(){g.setCoords(),h()}})},fxRemove:function(g,a){a=a||{};var u=function(){},h=a.onComplete||u,i=a.onChange||u,r=this;return p.util.animate({target:this,startValue:g.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(n){g.set("opacity",n),r.requestRenderAll(),i()},onComplete:function(){r.remove(g),h()}})}}),p.util.object.extend(p.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var g=[],a,u,h=[];for(a in arguments[0])g.push(a);for(var i=0,r=g.length;i<r;i++)a=g[i],u=i!==r-1,h.push(this._animate(a,arguments[0][a],arguments[1],u));return h}else return this._animate.apply(this,arguments)},_animate:function(g,a,u,h){var i=this,r;a=a.toString(),u?u=p.util.object.clone(u):u={},~g.indexOf(".")&&(r=g.split("."));var n=i.colorProperties.indexOf(g)>-1||r&&i.colorProperties.indexOf(r[1])>-1,o=r?this.get(r[0])[r[1]]:this.get(g);"from"in u||(u.from=o),n||(~a.indexOf("=")?a=o+parseFloat(a.replace("=","")):a=parseFloat(a));var c={target:this,startValue:u.from,endValue:a,byValue:u.by,easing:u.easing,duration:u.duration,abort:u.abort&&function(s,f,m){return u.abort.call(i,s,f,m)},onChange:function(s,f,m){r?i[r[0]][r[1]]=s:i.set(g,s),!h&&u.onChange&&u.onChange(s,f,m)},onComplete:function(s,f,m){h||(i.setCoords(),u.onComplete&&u.onComplete(s,f,m))}};return n?p.util.animateColor(c.startValue,c.endValue,c.duration,c):p.util.animate(c)}}),function(g){var a=g.fabric||(g.fabric={}),u=a.util.object.extend,h=a.util.object.clone,i={x1:1,x2:1,y1:1,y2:1};if(a.Line){a.warn("fabric.Line is already defined");return}a.Line=a.util.createClass(a.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:a.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(n,o){n||(n=[0,0,0,0]),this.callSuper("initialize",o),this.set("x1",n[0]),this.set("y1",n[1]),this.set("x2",n[2]),this.set("y2",n[3]),this._setWidthHeight(o)},_setWidthHeight:function(n){n||(n={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in n?n.left:this._getLeftToOriginX(),this.top="top"in n?n.top:this._getTopToOriginY()},_set:function(n,o){return this.callSuper("_set",n,o),typeof i[n]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:r({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:r({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(n){n.beginPath();var o=this.calcLinePoints();n.moveTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineWidth=this.strokeWidth;var c=n.strokeStyle;n.strokeStyle=this.stroke||n.fillStyle,this.stroke&&this._renderStroke(n),n.strokeStyle=c},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(n){return u(this.callSuper("toObject",n),this.calcLinePoints())},_getNonTransformedDimensions:function(){var n=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(n.y-=this.strokeWidth),this.height===0&&(n.x-=this.strokeWidth)),n},calcLinePoints:function(){var n=this.x1<=this.x2?-1:1,o=this.y1<=this.y2?-1:1,c=n*this.width*.5,s=o*this.height*.5,f=n*this.width*-.5,m=o*this.height*-.5;return{x1:c,x2:f,y1:s,y2:m}},_toSVG:function(){var n=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,`" />
`]}}),a.Line.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),a.Line.fromElement=function(n,o,c){c=c||{};var s=a.parseAttributes(n,a.Line.ATTRIBUTE_NAMES),f=[s.x1||0,s.y1||0,s.x2||0,s.y2||0];o(new a.Line(f,u(s,c)))},a.Line.fromObject=function(n,o){function c(f){delete f.points,o&&o(f)}var s=h(n,!0);s.points=[n.x1,n.y1,n.x2,n.y2],a.Object._fromObject("Line",s,c,"points")};function r(n,o){var c=n.origin,s=n.axis1,f=n.axis2,m=n.dimension,y=o.nearest,_=o.center,S=o.farthest;return function(){switch(this.get(c)){case y:return Math.min(this.get(s),this.get(f));case _:return Math.min(this.get(s),this.get(f))+.5*this.get(m);case S:return Math.max(this.get(s),this.get(f))}}}}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.util.degreesToRadians;if(a.Circle){a.warn("fabric.Circle is already defined.");return}a.Circle=a.util.createClass(a.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:a.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(i,r){return this.callSuper("_set",i,r),i==="radius"&&this.setRadius(r),this},toObject:function(i){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(i))},_toSVG:function(){var i,r=0,n=0,o=(this.endAngle-this.startAngle)%360;if(o===0)i=["<circle ","COMMON_PARTS",'cx="'+r+'" cy="'+n+'" ','r="',this.radius,`" />
`];else{var c=u(this.startAngle),s=u(this.endAngle),f=this.radius,m=a.util.cos(c)*f,y=a.util.sin(c)*f,_=a.util.cos(s)*f,S=a.util.sin(s)*f,O=o>180?"1":"0";i=['<path d="M '+m+" "+y," A "+f+" "+f," 0 ",+O+" 1"," "+_+" "+S,'" ',"COMMON_PARTS",` />
`]}return i},_render:function(i){i.beginPath(),i.arc(0,0,this.radius,u(this.startAngle),u(this.endAngle),!1),this._renderPaintInOrder(i)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(i){return this.radius=i,this.set("width",i*2).set("height",i*2)}}),a.Circle.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),a.Circle.fromElement=function(i,r){var n=a.parseAttributes(i,a.Circle.ATTRIBUTE_NAMES);if(!h(n))throw new Error("value of `r` attribute is required and can not be negative");n.left=(n.left||0)-n.radius,n.top=(n.top||0)-n.radius,r(new a.Circle(n))};function h(i){return"radius"in i&&i.radius>=0}a.Circle.fromObject=function(i,r){a.Object._fromObject("Circle",i,r)}}(w),function(g){var a=g.fabric||(g.fabric={});if(a.Triangle){a.warn("fabric.Triangle is already defined");return}a.Triangle=a.util.createClass(a.Object,{type:"triangle",width:100,height:100,_render:function(u){var h=this.width/2,i=this.height/2;u.beginPath(),u.moveTo(-h,i),u.lineTo(0,-i),u.lineTo(h,i),u.closePath(),this._renderPaintInOrder(u)},_toSVG:function(){var u=this.width/2,h=this.height/2,i=[-u+" "+h,"0 "+-h,u+" "+h].join(",");return["<polygon ","COMMON_PARTS",'points="',i,'" />']}}),a.Triangle.fromObject=function(u,h){return a.Object._fromObject("Triangle",u,h)}}(w),function(g){var a=g.fabric||(g.fabric={}),u=Math.PI*2;if(a.Ellipse){a.warn("fabric.Ellipse is already defined.");return}a.Ellipse=a.util.createClass(a.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:a.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this.set("rx",h&&h.rx||0),this.set("ry",h&&h.ry||0)},_set:function(h,i){switch(this.callSuper("_set",h,i),h){case"rx":this.rx=i,this.set("width",i*2);break;case"ry":this.ry=i,this.set("height",i*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(h){h.beginPath(),h.save(),h.transform(1,0,0,this.ry/this.rx,0,0),h.arc(0,0,this.rx,0,u,!1),h.restore(),this._renderPaintInOrder(h)}}),a.Ellipse.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),a.Ellipse.fromElement=function(h,i){var r=a.parseAttributes(h,a.Ellipse.ATTRIBUTE_NAMES);r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,i(new a.Ellipse(r))},a.Ellipse.fromObject=function(h,i){a.Object._fromObject("Ellipse",h,i)}}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.util.object.extend;if(a.Rect){a.warn("fabric.Rect is already defined");return}a.Rect=a.util.createClass(a.Object,{stateProperties:a.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:a.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(h){var i=this.rx?Math.min(this.rx,this.width/2):0,r=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,o=this.height,c=-this.width/2,s=-this.height/2,f=i!==0||r!==0,m=1-.5522847498;h.beginPath(),h.moveTo(c+i,s),h.lineTo(c+n-i,s),f&&h.bezierCurveTo(c+n-m*i,s,c+n,s+m*r,c+n,s+r),h.lineTo(c+n,s+o-r),f&&h.bezierCurveTo(c+n,s+o-m*r,c+n-m*i,s+o,c+n-i,s+o),h.lineTo(c+i,s+o),f&&h.bezierCurveTo(c+m*i,s+o,c,s+o-m*r,c,s+o-r),h.lineTo(c,s+r),f&&h.bezierCurveTo(c,s+m*r,c+m*i,s,c+i,s),h.closePath(),this._renderPaintInOrder(h)},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){var h=-this.width/2,i=-this.height/2;return["<rect ","COMMON_PARTS",'x="',h,'" y="',i,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),a.Rect.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),a.Rect.fromElement=function(h,i,r){if(!h)return i(null);r=r||{};var n=a.parseAttributes(h,a.Rect.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0,n.height=n.height||0,n.width=n.width||0;var o=new a.Rect(u(r?a.util.object.clone(r):{},n));o.visible=o.visible&&o.width>0&&o.height>0,i(o)},a.Rect.fromObject=function(h,i){return a.Object._fromObject("Rect",h,i)}}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.util.object.extend,h=a.util.array.min,i=a.util.array.max,r=a.util.toFixed,n=a.util.projectStrokeOnPoints;if(a.Polyline){a.warn("fabric.Polyline is already defined");return}a.Polyline=a.util.createClass(a.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:a.Object.prototype.cacheProperties.concat("points"),initialize:function(o,c){c=c||{},this.points=o||[],this.callSuper("initialize",c),this._setPositionDimensions(c)},_projectStrokeOnPoints:function(){return n(this.points,this,!0)},_setPositionDimensions:function(o){var c=this._calcDimensions(o),s,f=this.exactBoundingBox?this.strokeWidth:0;this.width=c.width-f,this.height=c.height-f,o.fromSVG||(s=this.translateToGivenOrigin({x:c.left-this.strokeWidth/2+f/2,y:c.top-this.strokeWidth/2+f/2},"left","top",this.originX,this.originY)),typeof o.left>"u"&&(this.left=o.fromSVG?c.left:s.x),typeof o.top>"u"&&(this.top=o.fromSVG?c.top:s.y),this.pathOffset={x:c.left+this.width/2+f/2,y:c.top+this.height/2+f/2}},_calcDimensions:function(){var o=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,c=h(o,"x")||0,s=h(o,"y")||0,f=i(o,"x")||0,m=i(o,"y")||0,y=f-c,_=m-s;return{left:c,top:s,width:y,height:_}},toObject:function(o){return u(this.callSuper("toObject",o),{points:this.points.concat()})},_toSVG:function(){for(var o=[],c=this.pathOffset.x,s=this.pathOffset.y,f=a.Object.NUM_FRACTION_DIGITS,m=0,y=this.points.length;m<y;m++)o.push(r(this.points[m].x-c,f),",",r(this.points[m].y-s,f)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',o.join(""),`" />
`]},commonRender:function(o){var c,s=this.points.length,f=this.pathOffset.x,m=this.pathOffset.y;if(!s||isNaN(this.points[s-1].y))return!1;o.beginPath(),o.moveTo(this.points[0].x-f,this.points[0].y-m);for(var y=0;y<s;y++)c=this.points[y],o.lineTo(c.x-f,c.y-m);return!0},_render:function(o){this.commonRender(o)&&this._renderPaintInOrder(o)},complexity:function(){return this.get("points").length}}),a.Polyline.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(),a.Polyline.fromElementGenerator=function(o){return function(c,s,f){if(!c)return s(null);f||(f={});var m=a.parsePointsAttribute(c.getAttribute("points")),y=a.parseAttributes(c,a[o].ATTRIBUTE_NAMES);y.fromSVG=!0,s(new a[o](m,u(y,f)))}},a.Polyline.fromElement=a.Polyline.fromElementGenerator("Polyline"),a.Polyline.fromObject=function(o,c){return a.Object._fromObject("Polyline",o,c,"points")}}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.util.projectStrokeOnPoints;if(a.Polygon){a.warn("fabric.Polygon is already defined");return}a.Polygon=a.util.createClass(a.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return u(this.points,this)},_render:function(h){this.commonRender(h)&&(h.closePath(),this._renderPaintInOrder(h))}}),a.Polygon.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(),a.Polygon.fromElement=a.Polyline.fromElementGenerator("Polygon"),a.Polygon.fromObject=function(h,i){a.Object._fromObject("Polygon",h,i,"points")}}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.util.array.min,h=a.util.array.max,i=a.util.object.extend,r=a.util.object.clone,n=a.util.toFixed;if(a.Path){a.warn("fabric.Path is already defined");return}a.Path=a.util.createClass(a.Object,{type:"path",path:null,cacheProperties:a.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:a.Object.prototype.stateProperties.concat("path"),initialize:function(o,c){c=r(c||{}),delete c.path,this.callSuper("initialize",c),this._setPath(o||[],c)},_setPath:function(o,c){this.path=a.util.makePathSimpler(Array.isArray(o)?o:a.util.parsePath(o)),a.Polyline.prototype._setPositionDimensions.call(this,c||{})},_renderPathCommands:function(o){var c,s=0,f=0,m=0,y=0,_=0,S=0,O=-this.pathOffset.x,D=-this.pathOffset.y;o.beginPath();for(var A=0,V=this.path.length;A<V;++A)switch(c=this.path[A],c[0]){case"L":m=c[1],y=c[2],o.lineTo(m+O,y+D);break;case"M":m=c[1],y=c[2],s=m,f=y,o.moveTo(m+O,y+D);break;case"C":m=c[5],y=c[6],_=c[3],S=c[4],o.bezierCurveTo(c[1]+O,c[2]+D,_+O,S+D,m+O,y+D);break;case"Q":o.quadraticCurveTo(c[1]+O,c[2]+D,c[3]+O,c[4]+D),m=c[3],y=c[4],_=c[1],S=c[2];break;case"z":case"Z":m=s,y=f,o.closePath();break}},_render:function(o){this._renderPathCommands(o),this._renderPaintInOrder(o)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(o){return i(this.callSuper("toObject",o),{path:this.path.map(function(c){return c.slice()})})},toDatalessObject:function(o){var c=this.toObject(["sourcePath"].concat(o));return c.sourcePath&&delete c.path,c},_toSVG:function(){var o=a.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',o,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var o=a.Object.NUM_FRACTION_DIGITS;return" translate("+n(-this.pathOffset.x,o)+", "+n(-this.pathOffset.y,o)+")"},toClipPathSVG:function(o){var c=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:o,additionalTransform:c})},toSVG:function(o){var c=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:o,additionalTransform:c})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var o=[],c=[],s,f=0,m=0,y=0,_=0,S,O=0,D=this.path.length;O<D;++O){switch(s=this.path[O],s[0]){case"L":y=s[1],_=s[2],S=[];break;case"M":y=s[1],_=s[2],f=y,m=_,S=[];break;case"C":S=a.util.getBoundsOfCurve(y,_,s[1],s[2],s[3],s[4],s[5],s[6]),y=s[5],_=s[6];break;case"Q":S=a.util.getBoundsOfCurve(y,_,s[1],s[2],s[1],s[2],s[3],s[4]),y=s[3],_=s[4];break;case"z":case"Z":y=f,_=m;break}S.forEach(function(he){o.push(he.x),c.push(he.y)}),o.push(y),c.push(_)}var A=u(o)||0,V=u(c)||0,q=h(o)||0,oe=h(c)||0,ge=q-A,me=oe-V;return{left:A,top:V,width:ge,height:me}}}),a.Path.fromObject=function(o,c){if(typeof o.sourcePath=="string"){var s=o.sourcePath;a.loadSVGFromURL(s,function(f){var m=f[0];m.setOptions(o),o.clipPath?a.util.enlivenObjects([o.clipPath],function(y){m.clipPath=y[0],c&&c(m)}):c&&c(m)})}else a.Object._fromObject("Path",o,c,"path")},a.Path.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(["d"]),a.Path.fromElement=function(o,c,s){var f=a.parseAttributes(o,a.Path.ATTRIBUTE_NAMES);f.fromSVG=!0,c(new a.Path(f.d,i(f,s)))}}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.util.array.min,h=a.util.array.max;a.Group||(a.Group=a.util.createClass(a.Object,a.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(i,r,n){r=r||{},this._objects=[],n&&this.callSuper("initialize",r),this._objects=i||[];for(var o=this._objects.length;o--;)this._objects[o].group=this;if(n)this._updateObjectsACoords();else{var c=r&&r.centerPoint;r.originX!==void 0&&(this.originX=r.originX),r.originY!==void 0&&(this.originY=r.originY),c||this._calcBounds(),this._updateObjectsCoords(c),delete r.centerPoint,this.callSuper("initialize",r)}this.setCoords()},_updateObjectsACoords:function(){for(var i=!0,r=this._objects.length;r--;)this._objects[r].setCoords(i)},_updateObjectsCoords:function(r){for(var r=r||this.getCenterPoint(),n=this._objects.length;n--;)this._updateObjectCoords(this._objects[n],r)},_updateObjectCoords:function(i,r){var n=i.left,o=i.top,c=!0;i.set({left:n-r.x,top:o-r.y}),i.group=this,i.setCoords(c)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(i){var r=!!this.group;return this._restoreObjectsState(),a.util.resetObjectTransform(this),i&&(r&&a.util.removeTransformFromObject(i,this.group.calcTransformMatrix()),this._objects.push(i),i.group=this,i._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,r?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(i){return this._restoreObjectsState(),a.util.resetObjectTransform(this),this.remove(i),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(i){this.dirty=!0,i.group=this,i._set("canvas",this.canvas)},_onObjectRemoved:function(i){this.dirty=!0,delete i.group},_set:function(i,r){var n=this._objects.length;if(this.useSetOnGroup)for(;n--;)this._objects[n].setOnGroup(i,r);if(i==="canvas")for(;n--;)this._objects[n]._set(i,r);a.Object.prototype._set.call(this,i,r)},toObject:function(i){var r=this.includeDefaultValues,n=this._objects.filter(function(c){return!c.excludeFromExport}).map(function(c){var s=c.includeDefaultValues;c.includeDefaultValues=r;var f=c.toObject(i);return c.includeDefaultValues=s,f}),o=a.Object.prototype.toObject.call(this,i);return o.objects=n,o},toDatalessObject:function(i){var r,n=this.sourcePath;if(n)r=n;else{var o=this.includeDefaultValues;r=this._objects.map(function(s){var f=s.includeDefaultValues;s.includeDefaultValues=o;var m=s.toDatalessObject(i);return s.includeDefaultValues=f,m})}var c=a.Object.prototype.toDatalessObject.call(this,i);return c.objects=r,c},render:function(i){this._transformDone=!0,this.callSuper("render",i),this._transformDone=!1},shouldCache:function(){var i=a.Object.prototype.shouldCache.call(this);if(i){for(var r=0,n=this._objects.length;r<n;r++)if(this._objects[r].willDrawShadow())return this.ownCaching=!1,!1}return i},willDrawShadow:function(){if(a.Object.prototype.willDrawShadow.call(this))return!0;for(var i=0,r=this._objects.length;i<r;i++)if(this._objects[i].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(i){for(var r=0,n=this._objects.length;r<n;r++)this._objects[r].render(i);this._drawClipPath(i,this.clipPath)},isCacheDirty:function(i){if(this.callSuper("isCacheDirty",i))return!0;if(!this.statefullCache)return!1;for(var r=0,n=this._objects.length;r<n;r++)if(this._objects[r].isCacheDirty(!0)){if(this._cacheCanvas){var o=this.cacheWidth/this.zoomX,c=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-o/2,-c/2,o,c)}return!0}return!1},_restoreObjectsState:function(){var i=this.calcOwnMatrix();return this._objects.forEach(function(r){a.util.addTransformToObject(r,i),delete r.group,r.setCoords()}),this},destroy:function(){return this._objects.forEach(function(i){i.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(i){i.dispose&&i.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var i=this._objects,r=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var o=new a.ActiveSelection([]);return o.set(n),o.type="activeSelection",r.remove(this),i.forEach(function(c){c.group=o,c.dirty=!0,r.add(c)}),o.canvas=r,o._objects=i,r._activeObject=o,o.setCoords(),o}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var i=!0;return this.forEachObject(function(r){r.setCoords(i)}),this},_calcBounds:function(i){for(var r=[],n=[],o,c,s,f=["tr","br","bl","tl"],m=0,y=this._objects.length,_,S=f.length;m<y;++m){for(o=this._objects[m],s=o.calcACoords(),_=0;_<S;_++)c=f[_],r.push(s[c].x),n.push(s[c].y);o.aCoords=s}this._getBounds(r,n,i)},_getBounds:function(i,r,n){var o=new a.Point(u(i),u(r)),c=new a.Point(h(i),h(r)),s=o.y||0,f=o.x||0,m=c.x-o.x||0,y=c.y-o.y||0;this.width=m,this.height=y,n||this.setPositionByOrigin({x:f,y:s},"left","top")},_toSVG:function(i){for(var r=["<g ","COMMON_PARTS",` >
`],n=0,o=this._objects.length;n<o;n++)r.push("		",this._objects[n].toSVG(i));return r.push(`</g>
`),r},getSvgStyles:function(){var i=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",r=this.visible?"":" visibility: hidden;";return[i,this.getSvgFilter(),r].join("")},toClipPathSVG:function(i){for(var r=[],n=0,o=this._objects.length;n<o;n++)r.push("	",this._objects[n].toClipPathSVG(i));return this._createBaseClipPathSVGMarkup(r,{reviver:i})}}),a.Group.fromObject=function(i,r){var n=i.objects,o=a.util.object.clone(i,!0);if(delete o.objects,typeof n=="string"){a.loadSVGFromURL(n,function(c){var s=a.util.groupSVGElements(c,i,n),f=o.clipPath;delete o.clipPath,s.set(o),f?a.util.enlivenObjects([f],function(m){s.clipPath=m[0],r&&r(s)}):r&&r(s)});return}a.util.enlivenObjects(n,function(c){a.util.enlivenObjectEnlivables(i,o,function(){r&&r(new a.Group(c,o,!0))})})})}(w),function(g){var a=g.fabric||(g.fabric={});a.ActiveSelection||(a.ActiveSelection=a.util.createClass(a.Group,{type:"activeSelection",initialize:function(u,h){h=h||{},this._objects=u||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;h.originX&&(this.originX=h.originX),h.originY&&(this.originY=h.originY),this._calcBounds(),this._updateObjectsCoords(),a.Object.prototype.initialize.call(this,h),this.setCoords()},toGroup:function(){var u=this._objects.concat();this._objects=[];var h=a.Object.prototype.toObject.call(this),i=new a.Group([]);if(delete h.type,i.set(h),u.forEach(function(n){n.canvas.remove(n),n.group=i}),i._objects=u,!this.canvas)return i;var r=this.canvas;return r.add(i),r._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(u,h,i){u.save(),u.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,i=i||{},typeof i.hasControls>"u"&&(i.hasControls=!1),i.forActiveSelection=!0;for(var r=0,n=this._objects.length;r<n;r++)this._objects[r]._renderControls(u,i);this.callSuper("_renderControls",u,h),u.restore()}}),a.ActiveSelection.fromObject=function(u,h){a.util.enlivenObjects(u.objects,function(i){delete u.objects,h&&h(new a.ActiveSelection(i,u,!0))})})}(w),function(g){var a=p.util.object.extend;if(g.fabric||(g.fabric={}),g.fabric.Image){p.warn("fabric.Image is already defined.");return}p.Image=p.util.createClass(p.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:p.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:p.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(u,h){h||(h={}),this.filters=[],this.cacheKey="texture"+p.Object.__uid++,this.callSuper("initialize",h),this._initElement(u,h)},getElement:function(){return this._element||{}},setElement:function(u,h){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=u,this._originalElement=u,this._initConfig(h),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(u){var h=p.filterBackend;h&&h.evictCachesForKey&&h.evictCachesForKey(u)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(u){p.util.cleanUpJsdomNode(this[u]),this[u]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var u=this.getElement();return{width:u.naturalWidth||u.width,height:u.naturalHeight||u.height}},_stroke:function(u){if(!(!this.stroke||this.strokeWidth===0)){var h=this.width/2,i=this.height/2;u.beginPath(),u.moveTo(-h,-i),u.lineTo(h,-i),u.lineTo(h,i),u.lineTo(-h,i),u.lineTo(-h,-i),u.closePath()}},toObject:function(u){var h=[];this.filters.forEach(function(r){r&&h.push(r.toObject())});var i=a(this.callSuper("toObject",["cropX","cropY"].concat(u)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:h});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var u=[],h=[],i,r=this._element,n=-this.width/2,o=-this.height/2,c="",s="";if(!r)return[];if(this.hasCrop()){var f=p.Object.__uid++;u.push('<clipPath id="imageCrop_'+f+`">
`,'	<rect x="'+n+'" y="'+o+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),c=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(s='" image-rendering="optimizeSpeed'),h.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',n-this.cropX,'" y="',o-this.cropY,'" width="',r.width||r.naturalWidth,'" height="',r.height||r.height,s,'"',c,`></image>
`),this.stroke||this.strokeDashArray){var m=this.fill;this.fill=null,i=["	<rect ",'x="',n,'" y="',o,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=m}return this.paintFirst!=="fill"?u=u.concat(i,h):u=u.concat(h,i),u},getSrc:function(u){var h=u?this._element:this._originalElement;return h?h.toDataURL?h.toDataURL():this.srcFromAttribute?h.getAttribute("src"):h.src:this.src||""},setSrc:function(u,h,i){return p.util.loadImage(u,function(r,n){this.setElement(r,i),this._setWidthHeight(),h&&h(this,n)},this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var u=this.resizeFilter,h=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),r=i.scaleX,n=i.scaleY,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!u||r>h&&n>h){this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,this._lastScaleY=n;return}p.filterBackend||(p.filterBackend=p.initFilterBackend());var c=p.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,f=o.width,m=o.height;c.width=f,c.height=m,this._element=c,this._lastScaleX=u.scaleX=r,this._lastScaleY=u.scaleY=n,p.filterBackend.applyFilters([u],o,f,m,this._element,s),this._filterScalingX=c.width/this._originalElement.width,this._filterScalingY=c.height/this._originalElement.height},applyFilters:function(u){if(u=u||this.filters||[],u=u.filter(function(o){return o&&!o.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),u.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var h=this._originalElement,i=h.naturalWidth||h.width,r=h.naturalHeight||h.height;if(this._element===this._originalElement){var n=p.util.createCanvasElement();n.width=i,n.height=r,this._element=n,this._filteredEl=n}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,r),this._lastScaleX=1,this._lastScaleY=1;return p.filterBackend||(p.filterBackend=p.initFilterBackend()),p.filterBackend.applyFilters(u,this._originalElement,i,r,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(u){p.util.setImageSmoothing(u,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(u),this._renderPaintInOrder(u)},drawCacheOnCanvas:function(u){p.util.setImageSmoothing(u,this.imageSmoothing),p.Object.prototype.drawCacheOnCanvas.call(this,u)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(u){var h=this._element;if(h){var i=this._filterScalingX,r=this._filterScalingY,n=this.width,o=this.height,c=Math.min,s=Math.max,f=s(this.cropX,0),m=s(this.cropY,0),y=h.naturalWidth||h.width,_=h.naturalHeight||h.height,S=f*i,O=m*r,D=c(n*i,y-S),A=c(o*r,_-O),V=-n/2,q=-o/2,oe=c(n,y/i-f),ge=c(o,_/r-m);h&&u.drawImage(h,S,O,D,A,V,q,oe,ge)}},_needsResize:function(){var u=this.getTotalObjectScaling();return u.scaleX!==this._lastScaleX||u.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(u,h){this.setElement(p.util.getById(u),h),p.util.addClass(this.getElement(),p.Image.CSS_CANVAS)},_initConfig:function(u){u||(u={}),this.setOptions(u),this._setWidthHeight(u)},_initFilters:function(u,h){u&&u.length?p.util.enlivenObjects(u,function(i){h&&h(i)},"fabric.Image.filters"):h&&h()},_setWidthHeight:function(u){u||(u={});var h=this.getElement();this.width=u.width||h.naturalWidth||h.width||0,this.height=u.height||h.naturalHeight||h.height||0},parsePreserveAspectRatioAttribute:function(){var u=p.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),h=this._element.width,i=this._element.height,r=1,n=1,o=0,c=0,s=0,f=0,m,y=this.width,_=this.height,S={width:y,height:_};return u&&(u.alignX!=="none"||u.alignY!=="none")?(u.meetOrSlice==="meet"&&(r=n=p.util.findScaleToFit(this._element,S),m=(y-h*r)/2,u.alignX==="Min"&&(o=-m),u.alignX==="Max"&&(o=m),m=(_-i*n)/2,u.alignY==="Min"&&(c=-m),u.alignY==="Max"&&(c=m)),u.meetOrSlice==="slice"&&(r=n=p.util.findScaleToCover(this._element,S),m=h-y/r,u.alignX==="Mid"&&(s=m/2),u.alignX==="Max"&&(s=m),m=i-_/n,u.alignY==="Mid"&&(f=m/2),u.alignY==="Max"&&(f=m),h=y/r,i=_/n)):(r=y/h,n=_/i),{width:h,height:i,scaleX:r,scaleY:n,offsetLeft:o,offsetTop:c,cropX:s,cropY:f}}}),p.Image.CSS_CANVAS="canvas-img",p.Image.prototype.getSvgSrc=p.Image.prototype.getSrc,p.Image.fromObject=function(u,h){var i=p.util.object.clone(u);p.util.loadImage(i.src,function(r,n){if(n){h&&h(null,!0);return}p.Image.prototype._initFilters.call(i,i.filters,function(o){i.filters=o||[],p.Image.prototype._initFilters.call(i,[i.resizeFilter],function(c){i.resizeFilter=c[0],p.util.enlivenObjectEnlivables(i,i,function(){var s=new p.Image(r,i);h(s,!1)})})})},null,i.crossOrigin)},p.Image.fromURL=function(u,h,i){p.util.loadImage(u,function(r,n){h&&h(new p.Image(r,i),n)},null,i&&i.crossOrigin)},p.Image.ATTRIBUTE_NAMES=p.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),p.Image.fromElement=function(u,h,i){var r=p.parseAttributes(u,p.Image.ATTRIBUTE_NAMES);p.Image.fromURL(r["xlink:href"],h,a(i?p.util.object.clone(i):{},r))}}(w),p.util.object.extend(p.Object.prototype,{_getAngleValueForStraighten:function(){var g=this.angle%360;return g>0?Math.round((g-1)/90)*90:Math.round(g/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(g){g=g||{};var a=function(){},u=g.onComplete||a,h=g.onChange||a,i=this;return p.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(r){i.rotate(r),h()},onComplete:function(){i.setCoords(),u()}})}}),p.util.object.extend(p.StaticCanvas.prototype,{straightenObject:function(g){return g.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(g){return g.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function g(u,h){var i="precision "+h+` float;
void main(){}`,r=u.createShader(u.FRAGMENT_SHADER);return u.shaderSource(r,i),u.compileShader(r),!!u.getShaderParameter(r,u.COMPILE_STATUS)}p.isWebglSupported=function(u){if(p.isLikelyNode)return!1;u=u||p.WebglFilterBackend.prototype.tileSize;var h=document.createElement("canvas"),i=h.getContext("webgl")||h.getContext("experimental-webgl"),r=!1;if(i){p.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),r=p.maxTextureSize>=u;for(var n=["highp","mediump","lowp"],o=0;o<3;o++)if(g(i,n[o])){p.webGlPrecision=n[o];break}}return this.isSupported=r,r},p.WebglFilterBackend=a;function a(u){u&&u.tileSize&&(this.tileSize=u.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}a.prototype={tileSize:2048,resources:{},setupGLContext:function(u,h){this.dispose(),this.createWebGLCanvas(u,h),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(u,h)},chooseFastestCopyGLTo2DMethod:function(u,h){var i=typeof window.performance<"u",r;try{new ImageData(1,1),r=!0}catch{r=!1}var n=typeof ArrayBuffer<"u",o=typeof Uint8ClampedArray<"u";if(i&&r&&n&&o){var c=p.util.createCanvasElement(),s=new ArrayBuffer(u*h*4);if(p.forceGLPutImageData){this.imageBuffer=s,this.copyGLTo2D=ee;return}var f={imageBuffer:s,destinationWidth:u,destinationHeight:h,targetCanvas:c},m,y,_;c.width=u,c.height=h,m=window.performance.now(),U.call(f,this.gl,f),y=window.performance.now()-m,m=window.performance.now(),ee.call(f,this.gl,f),_=window.performance.now()-m,y>_?(this.imageBuffer=s,this.copyGLTo2D=ee):this.copyGLTo2D=U}},createWebGLCanvas:function(u,h){var i=p.util.createCanvasElement();i.width=u,i.height=h;var r={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},n=i.getContext("webgl",r);n||(n=i.getContext("experimental-webgl",r)),n&&(n.clearColor(0,0,0,0),this.canvas=i,this.gl=n)},applyFilters:function(u,h,i,r,n,o){var c=this.gl,s;o&&(s=this.getCachedTexture(o,h));var f={originalWidth:h.width||h.originalWidth,originalHeight:h.height||h.originalHeight,sourceWidth:i,sourceHeight:r,destinationWidth:i,destinationHeight:r,context:c,sourceTexture:this.createTexture(c,i,r,!s&&h),targetTexture:this.createTexture(c,i,r),originalTexture:s||this.createTexture(c,i,r,!s&&h),passes:u.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n},m=c.createFramebuffer();return c.bindFramebuffer(c.FRAMEBUFFER,m),u.forEach(function(y){y&&y.applyTo(f)}),R(f),this.copyGLTo2D(c,f),c.bindTexture(c.TEXTURE_2D,null),c.deleteTexture(f.sourceTexture),c.deleteTexture(f.targetTexture),c.deleteFramebuffer(m),n.getContext("2d").setTransform(1,0,0,1,0,0),f},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(u,h,i,r,n){var o=u.createTexture();return u.bindTexture(u.TEXTURE_2D,o),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,n||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,n||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),r?u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,r):u.texImage2D(u.TEXTURE_2D,0,u.RGBA,h,i,0,u.RGBA,u.UNSIGNED_BYTE,null),o},getCachedTexture:function(u,h){if(this.textureCache[u])return this.textureCache[u];var i=this.createTexture(this.gl,h.width,h.height,h);return this.textureCache[u]=i,i},evictCachesForKey:function(u){this.textureCache[u]&&(this.gl.deleteTexture(this.textureCache[u]),delete this.textureCache[u])},copyGLTo2D:U,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var u=this.gl,h={renderer:"",vendor:""};if(!u)return h;var i=u.getExtension("WEBGL_debug_renderer_info");if(i){var r=u.getParameter(i.UNMASKED_RENDERER_WEBGL),n=u.getParameter(i.UNMASKED_VENDOR_WEBGL);r&&(h.renderer=r.toLowerCase()),n&&(h.vendor=n.toLowerCase())}return this.gpuInfo=h,h}}}();function R(g){var a=g.targetCanvas,u=a.width,h=a.height,i=g.destinationWidth,r=g.destinationHeight;(u!==i||h!==r)&&(a.width=i,a.height=r)}function U(g,a){var u=g.canvas,h=a.targetCanvas,i=h.getContext("2d");i.translate(0,h.height),i.scale(1,-1);var r=u.height-h.height;i.drawImage(u,0,r,h.width,h.height,0,0,h.width,h.height)}function ee(g,a){var u=a.targetCanvas,h=u.getContext("2d"),i=a.destinationWidth,r=a.destinationHeight,n=i*r*4,o=new Uint8Array(this.imageBuffer,0,n),c=new Uint8ClampedArray(this.imageBuffer,0,n);g.readPixels(0,0,i,r,g.RGBA,g.UNSIGNED_BYTE,o);var s=new ImageData(c,i,r);h.putImageData(s,0,0)}(function(){var g=function(){};p.Canvas2dFilterBackend=a;function a(){}a.prototype={evictCachesForKey:g,dispose:g,clearWebGLCaches:g,resources:{},applyFilters:function(u,h,i,r,n){var o=n.getContext("2d");o.drawImage(h,0,0,i,r);var c=o.getImageData(0,0,i,r),s=o.getImageData(0,0,i,r),f={sourceWidth:i,sourceHeight:r,imageData:c,originalEl:h,originalImageData:s,canvasEl:n,ctx:o,filterBackend:this};return u.forEach(function(m){m.applyTo(f)}),(f.imageData.width!==i||f.imageData.height!==r)&&(n.width=f.imageData.width,n.height=f.imageData.height),o.putImageData(f.imageData,0,0),f}}})(),p.Image=p.Image||{},p.Image.filters=p.Image.filters||{},p.Image.filters.BaseFilter=p.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(g){g&&this.setOptions(g)},setOptions:function(g){for(var a in g)this[a]=g[a]},createProgram:function(g,a,u){a=a||this.fragmentSource,u=u||this.vertexSource,p.webGlPrecision!=="highp"&&(a=a.replace(/precision highp float/g,"precision "+p.webGlPrecision+" float"));var h=g.createShader(g.VERTEX_SHADER);if(g.shaderSource(h,u),g.compileShader(h),!g.getShaderParameter(h,g.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+g.getShaderInfoLog(h));var i=g.createShader(g.FRAGMENT_SHADER);if(g.shaderSource(i,a),g.compileShader(i),!g.getShaderParameter(i,g.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+g.getShaderInfoLog(i));var r=g.createProgram();if(g.attachShader(r,h),g.attachShader(r,i),g.linkProgram(r),!g.getProgramParameter(r,g.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+g.getProgramInfoLog(r));var n=this.getAttributeLocations(g,r),o=this.getUniformLocations(g,r)||{};return o.uStepW=g.getUniformLocation(r,"uStepW"),o.uStepH=g.getUniformLocation(r,"uStepH"),{program:r,attributeLocations:n,uniformLocations:o}},getAttributeLocations:function(g,a){return{aPosition:g.getAttribLocation(a,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(g,a,u){var h=a.aPosition,i=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,i),g.enableVertexAttribArray(h),g.vertexAttribPointer(h,2,g.FLOAT,!1,0,0),g.bufferData(g.ARRAY_BUFFER,u,g.STATIC_DRAW)},_setupFrameBuffer:function(g){var a=g.context,u,h;g.passes>1?(u=g.destinationWidth,h=g.destinationHeight,(g.sourceWidth!==u||g.sourceHeight!==h)&&(a.deleteTexture(g.targetTexture),g.targetTexture=g.filterBackend.createTexture(a,u,h)),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,g.targetTexture,0)):(a.bindFramebuffer(a.FRAMEBUFFER,null),a.finish())},_swapTextures:function(g){g.passes--,g.pass++;var a=g.targetTexture;g.targetTexture=g.sourceTexture,g.sourceTexture=a},isNeutralState:function(){var g=this.mainParameter,a=p.Image.filters[this.type].prototype;if(g)if(Array.isArray(a[g])){for(var u=a[g].length;u--;)if(this[g][u]!==a[g][u])return!1;return!0}else return a[g]===this[g];else return!1},applyTo:function(g){g.webgl?(this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g)):this.applyTo2d(g)},retrieveShader:function(g){return g.programCache.hasOwnProperty(this.type)||(g.programCache[this.type]=this.createProgram(g.context)),g.programCache[this.type]},applyToWebGL:function(g){var a=g.context,u=this.retrieveShader(g);g.pass===0&&g.originalTexture?a.bindTexture(a.TEXTURE_2D,g.originalTexture):a.bindTexture(a.TEXTURE_2D,g.sourceTexture),a.useProgram(u.program),this.sendAttributeData(a,u.attributeLocations,g.aPosition),a.uniform1f(u.uniformLocations.uStepW,1/g.sourceWidth),a.uniform1f(u.uniformLocations.uStepH,1/g.sourceHeight),this.sendUniformData(a,u.uniformLocations),a.viewport(0,0,g.destinationWidth,g.destinationHeight),a.drawArrays(a.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(g,a,u){g.activeTexture(u),g.bindTexture(g.TEXTURE_2D,a),g.activeTexture(g.TEXTURE0)},unbindAdditionalTexture:function(g,a){g.activeTexture(a),g.bindTexture(g.TEXTURE_2D,null),g.activeTexture(g.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(g){this[this.mainParameter]=g},sendUniformData:function(){},createHelpLayer:function(g){if(!g.helpLayer){var a=document.createElement("canvas");a.width=g.sourceWidth,a.height=g.sourceHeight,g.helpLayer=a}},toObject:function(){var g={type:this.type},a=this.mainParameter;return a&&(g[a]=this[a]),g},toJSON:function(){return this.toObject()}}),p.Image.filters.BaseFilter.fromObject=function(g,a){var u=new p.Image.filters[g.type](g);return a&&a(u),u},function(g){var a=g.fabric||(g.fabric={}),u=a.Image.filters,h=a.util.createClass;u.ColorMatrix=h(u.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(i){this.callSuper("initialize",i),this.matrix=this.matrix.slice(0)},applyTo2d:function(i){var r=i.imageData,n=r.data,o=n.length,c=this.matrix,s,f,m,y,_,S=this.colorsOnly;for(_=0;_<o;_+=4)s=n[_],f=n[_+1],m=n[_+2],S?(n[_]=s*c[0]+f*c[1]+m*c[2]+c[4]*255,n[_+1]=s*c[5]+f*c[6]+m*c[7]+c[9]*255,n[_+2]=s*c[10]+f*c[11]+m*c[12]+c[14]*255):(y=n[_+3],n[_]=s*c[0]+f*c[1]+m*c[2]+y*c[3]+c[4]*255,n[_+1]=s*c[5]+f*c[6]+m*c[7]+y*c[8]+c[9]*255,n[_+2]=s*c[10]+f*c[11]+m*c[12]+y*c[13]+c[14]*255,n[_+3]=s*c[15]+f*c[16]+m*c[17]+y*c[18]+c[19]*255)},getUniformLocations:function(i,r){return{uColorMatrix:i.getUniformLocation(r,"uColorMatrix"),uConstants:i.getUniformLocation(r,"uConstants")}},sendUniformData:function(i,r){var n=this.matrix,o=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],c=[n[4],n[9],n[14],n[19]];i.uniformMatrix4fv(r.uColorMatrix,!1,o),i.uniform4fv(r.uConstants,c)}}),a.Image.filters.ColorMatrix.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.Image.filters,h=a.util.createClass;u.Brightness=h(u.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(i){if(this.brightness!==0){var r=i.imageData,n=r.data,o,c=n.length,s=Math.round(this.brightness*255);for(o=0;o<c;o+=4)n[o]=n[o]+s,n[o+1]=n[o+1]+s,n[o+2]=n[o+2]+s}},getUniformLocations:function(i,r){return{uBrightness:i.getUniformLocation(r,"uBrightness")}},sendUniformData:function(i,r){i.uniform1f(r.uBrightness,this.brightness)}}),a.Image.filters.Brightness.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.util.object.extend,h=a.Image.filters,i=a.util.createClass;h.Convolute=i(h.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(r){var n=Math.sqrt(this.matrix.length),o=this.type+"_"+n+"_"+(this.opaque?1:0),c=this.fragmentSource[o];return r.programCache.hasOwnProperty(o)||(r.programCache[o]=this.createProgram(r.context,c)),r.programCache[o]},applyTo2d:function(r){var n=r.imageData,o=n.data,c=this.matrix,s=Math.round(Math.sqrt(c.length)),f=Math.floor(s/2),m=n.width,y=n.height,_=r.ctx.createImageData(m,y),S=_.data,O=this.opaque?1:0,D,A,V,q,oe,ge,me,he,de,Ce,_e,Z,k;for(_e=0;_e<y;_e++)for(Ce=0;Ce<m;Ce++){for(oe=(_e*m+Ce)*4,D=0,A=0,V=0,q=0,k=0;k<s;k++)for(Z=0;Z<s;Z++)me=_e+k-f,ge=Ce+Z-f,!(me<0||me>=y||ge<0||ge>=m)&&(he=(me*m+ge)*4,de=c[k*s+Z],D+=o[he]*de,A+=o[he+1]*de,V+=o[he+2]*de,O||(q+=o[he+3]*de));S[oe]=D,S[oe+1]=A,S[oe+2]=V,O?S[oe+3]=o[oe+3]:S[oe+3]=q}r.imageData=_},getUniformLocations:function(r,n){return{uMatrix:r.getUniformLocation(n,"uMatrix"),uOpaque:r.getUniformLocation(n,"uOpaque"),uHalfSize:r.getUniformLocation(n,"uHalfSize"),uSize:r.getUniformLocation(n,"uSize")}},sendUniformData:function(r,n){r.uniform1fv(n.uMatrix,this.matrix)},toObject:function(){return u(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),a.Image.filters.Convolute.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.Image.filters,h=a.util.createClass;u.Grayscale=h(u.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(i){var r=i.imageData,n=r.data,o,c=n.length,s,f=this.mode;for(o=0;o<c;o+=4)f==="average"?s=(n[o]+n[o+1]+n[o+2])/3:f==="lightness"?s=(Math.min(n[o],n[o+1],n[o+2])+Math.max(n[o],n[o+1],n[o+2]))/2:f==="luminosity"&&(s=.21*n[o]+.72*n[o+1]+.07*n[o+2]),n[o]=s,n[o+1]=s,n[o+2]=s},retrieveShader:function(i){var r=this.type+"_"+this.mode;if(!i.programCache.hasOwnProperty(r)){var n=this.fragmentSource[this.mode];i.programCache[r]=this.createProgram(i.context,n)}return i.programCache[r]},getUniformLocations:function(i,r){return{uMode:i.getUniformLocation(r,"uMode")}},sendUniformData:function(i,r){var n=1;i.uniform1i(r.uMode,n)},isNeutralState:function(){return!1}}),a.Image.filters.Grayscale.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.Image.filters,h=a.util.createClass;u.Invert=h(u.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(i){var r=i.imageData,n=r.data,o,c=n.length;for(o=0;o<c;o+=4)n[o]=255-n[o],n[o+1]=255-n[o+1],n[o+2]=255-n[o+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(i,r){return{uInvert:i.getUniformLocation(r,"uInvert")}},sendUniformData:function(i,r){i.uniform1i(r.uInvert,this.invert)}}),a.Image.filters.Invert.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.util.object.extend,h=a.Image.filters,i=a.util.createClass;h.Noise=i(h.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(r){if(this.noise!==0){var n=r.imageData,o=n.data,c,s=o.length,f=this.noise,m;for(c=0,s=o.length;c<s;c+=4)m=(.5-Math.random())*f,o[c]+=m,o[c+1]+=m,o[c+2]+=m}},getUniformLocations:function(r,n){return{uNoise:r.getUniformLocation(n,"uNoise"),uSeed:r.getUniformLocation(n,"uSeed")}},sendUniformData:function(r,n){r.uniform1f(n.uNoise,this.noise/255),r.uniform1f(n.uSeed,Math.random())},toObject:function(){return u(this.callSuper("toObject"),{noise:this.noise})}}),a.Image.filters.Noise.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.Image.filters,h=a.util.createClass;u.Pixelate=h(u.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(i){var r=i.imageData,n=r.data,o=r.height,c=r.width,s,f,m,y,_,S,O,D,A,V,q;for(f=0;f<o;f+=this.blocksize)for(m=0;m<c;m+=this.blocksize)for(s=f*4*c+m*4,y=n[s],_=n[s+1],S=n[s+2],O=n[s+3],V=Math.min(f+this.blocksize,o),q=Math.min(m+this.blocksize,c),D=f;D<V;D++)for(A=m;A<q;A++)s=D*4*c+A*4,n[s]=y,n[s+1]=_,n[s+2]=S,n[s+3]=O},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(i,r){return{uBlocksize:i.getUniformLocation(r,"uBlocksize"),uStepW:i.getUniformLocation(r,"uStepW"),uStepH:i.getUniformLocation(r,"uStepH")}},sendUniformData:function(i,r){i.uniform1f(r.uBlocksize,this.blocksize)}}),a.Image.filters.Pixelate.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.util.object.extend,h=a.Image.filters,i=a.util.createClass;h.RemoveColor=i(h.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(r){var n=r.imageData,o=n.data,c,s=this.distance*255,f,m,y,_=new a.Color(this.color).getSource(),S=[_[0]-s,_[1]-s,_[2]-s],O=[_[0]+s,_[1]+s,_[2]+s];for(c=0;c<o.length;c+=4)f=o[c],m=o[c+1],y=o[c+2],f>S[0]&&m>S[1]&&y>S[2]&&f<O[0]&&m<O[1]&&y<O[2]&&(o[c+3]=0)},getUniformLocations:function(r,n){return{uLow:r.getUniformLocation(n,"uLow"),uHigh:r.getUniformLocation(n,"uHigh")}},sendUniformData:function(r,n){var o=new a.Color(this.color).getSource(),c=parseFloat(this.distance),s=[0+o[0]/255-c,0+o[1]/255-c,0+o[2]/255-c,1],f=[o[0]/255+c,o[1]/255+c,o[2]/255+c,1];r.uniform4fv(n.uLow,s),r.uniform4fv(n.uHigh,f)},toObject:function(){return u(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),a.Image.filters.RemoveColor.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.Image.filters,h=a.util.createClass,i={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var r in i)u[r]=h(u.ColorMatrix,{type:r,matrix:i[r],mainParameter:!1,colorsOnly:!0}),a.Image.filters[r].fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric,u=a.Image.filters,h=a.util.createClass;u.BlendColor=h(u.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(i){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[i]+`}
}`},retrieveShader:function(i){var r=this.type+"_"+this.mode,n;return i.programCache.hasOwnProperty(r)||(n=this.buildSource(this.mode),i.programCache[r]=this.createProgram(i.context,n)),i.programCache[r]},applyTo2d:function(i){var r=i.imageData,n=r.data,o=n.length,c,s,f,m,y,_,S,O=1-this.alpha;S=new a.Color(this.color).getSource(),c=S[0]*this.alpha,s=S[1]*this.alpha,f=S[2]*this.alpha;for(var D=0;D<o;D+=4)switch(m=n[D],y=n[D+1],_=n[D+2],this.mode){case"multiply":n[D]=m*c/255,n[D+1]=y*s/255,n[D+2]=_*f/255;break;case"screen":n[D]=255-(255-m)*(255-c)/255,n[D+1]=255-(255-y)*(255-s)/255,n[D+2]=255-(255-_)*(255-f)/255;break;case"add":n[D]=m+c,n[D+1]=y+s,n[D+2]=_+f;break;case"diff":case"difference":n[D]=Math.abs(m-c),n[D+1]=Math.abs(y-s),n[D+2]=Math.abs(_-f);break;case"subtract":n[D]=m-c,n[D+1]=y-s,n[D+2]=_-f;break;case"darken":n[D]=Math.min(m,c),n[D+1]=Math.min(y,s),n[D+2]=Math.min(_,f);break;case"lighten":n[D]=Math.max(m,c),n[D+1]=Math.max(y,s),n[D+2]=Math.max(_,f);break;case"overlay":n[D]=c<128?2*m*c/255:255-2*(255-m)*(255-c)/255,n[D+1]=s<128?2*y*s/255:255-2*(255-y)*(255-s)/255,n[D+2]=f<128?2*_*f/255:255-2*(255-_)*(255-f)/255;break;case"exclusion":n[D]=c+m-2*c*m/255,n[D+1]=s+y-2*s*y/255,n[D+2]=f+_-2*f*_/255;break;case"tint":n[D]=c+m*O,n[D+1]=s+y*O,n[D+2]=f+_*O}},getUniformLocations:function(i,r){return{uColor:i.getUniformLocation(r,"uColor")}},sendUniformData:function(i,r){var n=new a.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,i.uniform4fv(r.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),a.Image.filters.BlendColor.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric,u=a.Image.filters,h=a.util.createClass;u.BlendImage=h(u.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(i){var r=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return i.programCache.hasOwnProperty(r)||(i.programCache[r]=this.createProgram(i.context,n)),i.programCache[r]},applyToWebGL:function(i){var r=i.context,n=this.createTexture(i.filterBackend,this.image);this.bindAdditionalTexture(r,n,r.TEXTURE1),this.callSuper("applyToWebGL",i),this.unbindAdditionalTexture(r,r.TEXTURE1)},createTexture:function(i,r){return i.getCachedTexture(r.cacheKey,r._element)},calculateMatrix:function(){var i=this.image,r=i._element.width,n=i._element.height;return[1/i.scaleX,0,0,0,1/i.scaleY,0,-i.left/r,-i.top/n,1]},applyTo2d:function(i){var r=i.imageData,n=i.filterBackend.resources,o=r.data,c=o.length,s=r.width,f=r.height,m,y,_,S,O,D,A,V,q,oe,ge=this.image,me;n.blendImage||(n.blendImage=a.util.createCanvasElement()),q=n.blendImage,oe=q.getContext("2d"),q.width!==s||q.height!==f?(q.width=s,q.height=f):oe.clearRect(0,0,s,f),oe.setTransform(ge.scaleX,0,0,ge.scaleY,ge.left,ge.top),oe.drawImage(ge._element,0,0,s,f),me=oe.getImageData(0,0,s,f).data;for(var he=0;he<c;he+=4)switch(O=o[he],D=o[he+1],A=o[he+2],V=o[he+3],m=me[he],y=me[he+1],_=me[he+2],S=me[he+3],this.mode){case"multiply":o[he]=O*m/255,o[he+1]=D*y/255,o[he+2]=A*_/255,o[he+3]=V*S/255;break;case"mask":o[he+3]=S;break}},getUniformLocations:function(i,r){return{uTransformMatrix:i.getUniformLocation(r,"uTransformMatrix"),uImage:i.getUniformLocation(r,"uImage")}},sendUniformData:function(i,r){var n=this.calculateMatrix();i.uniform1i(r.uImage,1),i.uniformMatrix3fv(r.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),a.Image.filters.BlendImage.fromObject=function(i,r){a.Image.fromObject(i.image,function(n){var o=a.util.object.clone(i);o.image=n,r(new a.Image.filters.BlendImage(o))})}}(w),function(g){var a=g.fabric||(g.fabric={}),u=Math.pow,h=Math.floor,i=Math.sqrt,r=Math.abs,n=Math.round,o=Math.sin,c=Math.ceil,s=a.Image.filters,f=a.util.createClass;s.Resize=f(s.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(m,y){return{uDelta:m.getUniformLocation(y,"uDelta"),uTaps:m.getUniformLocation(y,"uTaps")}},sendUniformData:function(m,y){m.uniform2fv(y.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),m.uniform1fv(y.uTaps,this.taps)},retrieveShader:function(m){var y=this.getFilterWindow(),_=this.type+"_"+y;if(!m.programCache.hasOwnProperty(_)){var S=this.generateShader(y);m.programCache[_]=this.createProgram(m.context,S)}return m.programCache[_]},getFilterWindow:function(){var m=this.tempScale;return Math.ceil(this.lanczosLobes/m)},getTaps:function(){for(var m=this.lanczosCreate(this.lanczosLobes),y=this.tempScale,_=this.getFilterWindow(),S=new Array(_),O=1;O<=_;O++)S[O-1]=m(O*y);return S},generateShader:function(S){for(var y=new Array(S),_=this.fragmentSourceTOP,S,O=1;O<=S;O++)y[O-1]=O+".0 * uDelta";return _+="uniform float uTaps["+S+`];
`,_+=`void main() {
`,_+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,_+=`  float sum = 1.0;
`,y.forEach(function(D,A){_+="  color += texture2D(uTexture, vTexCoord + "+D+") * uTaps["+A+`];
`,_+="  color += texture2D(uTexture, vTexCoord - "+D+") * uTaps["+A+`];
`,_+="  sum += 2.0 * uTaps["+A+`];
`}),_+=`  gl_FragColor = color / sum;
`,_+="}",_},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(m){m.webgl?(m.passes++,this.width=m.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=m.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),m.destinationWidth=this.dW,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceWidth=m.destinationWidth,this.height=m.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),m.destinationHeight=this.dH,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceHeight=m.destinationHeight):this.applyTo2d(m)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(m){return function(y){if(y>=m||y<=-m)return 0;if(y<11920929e-14&&y>-11920929e-14)return 1;y*=Math.PI;var _=y/m;return o(y)/y*o(_)/_}},applyTo2d:function(m){var y=m.imageData,_=this.scaleX,S=this.scaleY;this.rcpScaleX=1/_,this.rcpScaleY=1/S;var O=y.width,D=y.height,A=n(O*_),V=n(D*S),q;this.resizeType==="sliceHack"?q=this.sliceByTwo(m,O,D,A,V):this.resizeType==="hermite"?q=this.hermiteFastResize(m,O,D,A,V):this.resizeType==="bilinear"?q=this.bilinearFiltering(m,O,D,A,V):this.resizeType==="lanczos"&&(q=this.lanczosResize(m,O,D,A,V)),m.imageData=q},sliceByTwo:function(m,y,_,S,O){var D=m.imageData,A=.5,V=!1,q=!1,oe=y*A,ge=_*A,me=a.filterBackend.resources,he,de,Ce=0,_e=0,Z=y,k=0;for(me.sliceByTwo||(me.sliceByTwo=document.createElement("canvas")),he=me.sliceByTwo,(he.width<y*1.5||he.height<_)&&(he.width=y*1.5,he.height=_),de=he.getContext("2d"),de.clearRect(0,0,y*1.5,_),de.putImageData(D,0,0),S=h(S),O=h(O);!V||!q;)y=oe,_=ge,S<h(oe*A)?oe=h(oe*A):(oe=S,V=!0),O<h(ge*A)?ge=h(ge*A):(ge=O,q=!0),de.drawImage(he,Ce,_e,y,_,Z,k,oe,ge),Ce=Z,_e=k,k+=ge;return de.getImageData(Ce,_e,S,O)},lanczosResize:function(m,y,_,S,O){function D(x){var b,W,L,E,I,z,$,Y,te,le,ve;for(k.x=(x+.5)*ge,M.x=h(k.x),b=0;b<O;b++){for(k.y=(b+.5)*me,M.y=h(k.y),I=0,z=0,$=0,Y=0,te=0,W=M.x-Ce;W<=M.x+Ce;W++)if(!(W<0||W>=y)){le=h(1e3*r(W-k.x)),Z[le]||(Z[le]={});for(var Q=M.y-_e;Q<=M.y+_e;Q++)Q<0||Q>=_||(ve=h(1e3*r(Q-k.y)),Z[le][ve]||(Z[le][ve]=oe(i(u(le*he,2)+u(ve*de,2))/1e3)),L=Z[le][ve],L>0&&(E=(Q*y+W)*4,I+=L,z+=L*A[E],$+=L*A[E+1],Y+=L*A[E+2],te+=L*A[E+3]))}E=(b*S+x)*4,q[E]=z/I,q[E+1]=$/I,q[E+2]=Y/I,q[E+3]=te/I}return++x<S?D(x):V}var A=m.imageData.data,V=m.ctx.createImageData(S,O),q=V.data,oe=this.lanczosCreate(this.lanczosLobes),ge=this.rcpScaleX,me=this.rcpScaleY,he=2/this.rcpScaleX,de=2/this.rcpScaleY,Ce=c(ge*this.lanczosLobes/2),_e=c(me*this.lanczosLobes/2),Z={},k={},M={};return D(0)},bilinearFiltering:function(m,y,_,S,O){var D,A,V,q,oe,ge,me,he,de,Ce,_e,Z,k=0,M,x=this.rcpScaleX,b=this.rcpScaleY,W=4*(y-1),L=m.imageData,E=L.data,I=m.ctx.createImageData(S,O),z=I.data;for(me=0;me<O;me++)for(he=0;he<S;he++)for(oe=h(x*he),ge=h(b*me),de=x*he-oe,Ce=b*me-ge,M=4*(ge*y+oe),_e=0;_e<4;_e++)D=E[M+_e],A=E[M+4+_e],V=E[M+W+_e],q=E[M+W+4+_e],Z=D*(1-de)*(1-Ce)+A*de*(1-Ce)+V*Ce*(1-de)+q*de*Ce,z[k++]=Z;return I},hermiteFastResize:function(m,y,_,S,O){for(var D=this.rcpScaleX,A=this.rcpScaleY,V=c(D/2),q=c(A/2),oe=m.imageData,ge=oe.data,me=m.ctx.createImageData(S,O),he=me.data,de=0;de<O;de++)for(var Ce=0;Ce<S;Ce++){for(var _e=(Ce+de*S)*4,Z=0,k=0,M=0,x=0,b=0,W=0,L=0,E=(de+.5)*A,I=h(de*A);I<(de+1)*A;I++)for(var z=r(E-(I+.5))/q,$=(Ce+.5)*D,Y=z*z,te=h(Ce*D);te<(Ce+1)*D;te++){var le=r($-(te+.5))/V,ve=i(Y+le*le);ve>1&&ve<-1||(Z=2*ve*ve*ve-3*ve*ve+1,Z>0&&(le=4*(te+I*y),L+=Z*ge[le+3],M+=Z,ge[le+3]<255&&(Z=Z*ge[le+3]/250),x+=Z*ge[le],b+=Z*ge[le+1],W+=Z*ge[le+2],k+=Z))}he[_e]=x/k,he[_e+1]=b/k,he[_e+2]=W/k,he[_e+3]=L/M}return me},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),a.Image.filters.Resize.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.Image.filters,h=a.util.createClass;u.Contrast=h(u.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(i){if(this.contrast!==0){var r=i.imageData,n,c,o=r.data,c=o.length,s=Math.floor(this.contrast*255),f=259*(s+255)/(255*(259-s));for(n=0;n<c;n+=4)o[n]=f*(o[n]-128)+128,o[n+1]=f*(o[n+1]-128)+128,o[n+2]=f*(o[n+2]-128)+128}},getUniformLocations:function(i,r){return{uContrast:i.getUniformLocation(r,"uContrast")}},sendUniformData:function(i,r){i.uniform1f(r.uContrast,this.contrast)}}),a.Image.filters.Contrast.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.Image.filters,h=a.util.createClass;u.Saturation=h(u.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(i){if(this.saturation!==0){var r=i.imageData,n=r.data,o=n.length,c=-this.saturation,s,f;for(s=0;s<o;s+=4)f=Math.max(n[s],n[s+1],n[s+2]),n[s]+=f!==n[s]?(f-n[s])*c:0,n[s+1]+=f!==n[s+1]?(f-n[s+1])*c:0,n[s+2]+=f!==n[s+2]?(f-n[s+2])*c:0}},getUniformLocations:function(i,r){return{uSaturation:i.getUniformLocation(r,"uSaturation")}},sendUniformData:function(i,r){i.uniform1f(r.uSaturation,-this.saturation)}}),a.Image.filters.Saturation.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.Image.filters,h=a.util.createClass;u.Vibrance=h(u.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(i){if(this.vibrance!==0){var r=i.imageData,n=r.data,o=n.length,c=-this.vibrance,s,f,m,y;for(s=0;s<o;s+=4)f=Math.max(n[s],n[s+1],n[s+2]),m=(n[s]+n[s+1]+n[s+2])/3,y=Math.abs(f-m)*2/255*c,n[s]+=f!==n[s]?(f-n[s])*y:0,n[s+1]+=f!==n[s+1]?(f-n[s+1])*y:0,n[s+2]+=f!==n[s+2]?(f-n[s+2])*y:0}},getUniformLocations:function(i,r){return{uVibrance:i.getUniformLocation(r,"uVibrance")}},sendUniformData:function(i,r){i.uniform1f(r.uVibrance,-this.vibrance)}}),a.Image.filters.Vibrance.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.Image.filters,h=a.util.createClass;u.Blur=h(u.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(i){i.webgl?(this.aspectRatio=i.sourceWidth/i.sourceHeight,i.passes++,this._setupFrameBuffer(i),this.horizontal=!0,this.applyToWebGL(i),this._swapTextures(i),this._setupFrameBuffer(i),this.horizontal=!1,this.applyToWebGL(i),this._swapTextures(i)):this.applyTo2d(i)},applyTo2d:function(i){i.imageData=this.simpleBlur(i)},simpleBlur:function(i){var r=i.filterBackend.resources,n,o,c=i.imageData.width,s=i.imageData.height;r.blurLayer1||(r.blurLayer1=a.util.createCanvasElement(),r.blurLayer2=a.util.createCanvasElement()),n=r.blurLayer1,o=r.blurLayer2,(n.width!==c||n.height!==s)&&(o.width=n.width=c,o.height=n.height=s);var f=n.getContext("2d"),m=o.getContext("2d"),y=15,_,S,O,D,A=this.blur*.06*.5;for(f.putImageData(i.imageData,0,0),m.clearRect(0,0,c,s),D=-y;D<=y;D++)_=(Math.random()-.5)/4,S=D/y,O=A*S*c+_,m.globalAlpha=1-Math.abs(S),m.drawImage(n,O,_),f.drawImage(o,0,0),m.globalAlpha=1,m.clearRect(0,0,o.width,o.height);for(D=-y;D<=y;D++)_=(Math.random()-.5)/4,S=D/y,O=A*S*s+_,m.globalAlpha=1-Math.abs(S),m.drawImage(n,_,O),f.drawImage(o,0,0),m.globalAlpha=1,m.clearRect(0,0,o.width,o.height);i.ctx.drawImage(n,0,0);var V=i.ctx.getImageData(0,0,n.width,n.height);return f.globalAlpha=1,f.clearRect(0,0,n.width,n.height),V},getUniformLocations:function(i,r){return{delta:i.getUniformLocation(r,"uDelta")}},sendUniformData:function(i,r){var n=this.chooseRightDelta();i.uniform2fv(r.delta,n)},chooseRightDelta:function(){var i=1,r=[0,0],n;return this.horizontal?this.aspectRatio>1&&(i=1/this.aspectRatio):this.aspectRatio<1&&(i=this.aspectRatio),n=i*this.blur*.12,this.horizontal?r[0]=n:r[1]=n,r}}),u.Blur.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.Image.filters,h=a.util.createClass;u.Gamma=h(u.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(i){this.gamma=[1,1,1],u.BaseFilter.prototype.initialize.call(this,i)},applyTo2d:function(i){var r=i.imageData,n=r.data,o=this.gamma,c=n.length,s=1/o[0],f=1/o[1],m=1/o[2],y;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),y=0,c=256;y<c;y++)this.rVals[y]=Math.pow(y/255,s)*255,this.gVals[y]=Math.pow(y/255,f)*255,this.bVals[y]=Math.pow(y/255,m)*255;for(y=0,c=n.length;y<c;y+=4)n[y]=this.rVals[n[y]],n[y+1]=this.gVals[n[y+1]],n[y+2]=this.bVals[n[y+2]]},getUniformLocations:function(i,r){return{uGamma:i.getUniformLocation(r,"uGamma")}},sendUniformData:function(i,r){i.uniform3fv(r.uGamma,this.gamma)}}),a.Image.filters.Gamma.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.Image.filters,h=a.util.createClass;u.Composed=h(u.BaseFilter,{type:"Composed",subFilters:[],initialize:function(i){this.callSuper("initialize",i),this.subFilters=this.subFilters.slice(0)},applyTo:function(i){i.passes+=this.subFilters.length-1,this.subFilters.forEach(function(r){r.applyTo(i)})},toObject:function(){return a.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(i){return i.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(i){return!i.isNeutralState()})}}),a.Image.filters.Composed.fromObject=function(i,r){var n=i.subFilters||[],o=n.map(function(s){return new a.Image.filters[s.type](s)}),c=new a.Image.filters.Composed({subFilters:o});return r&&r(c),c}}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.Image.filters,h=a.util.createClass;u.HueRotation=h(u.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var i=this.rotation*Math.PI,r=a.util.cos(i),n=a.util.sin(i),o=1/3,c=Math.sqrt(o)*n,s=1-r;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=r+s/3,this.matrix[1]=o*s-c,this.matrix[2]=o*s+c,this.matrix[5]=o*s+c,this.matrix[6]=r+o*s,this.matrix[7]=o*s-c,this.matrix[10]=o*s-c,this.matrix[11]=o*s+c,this.matrix[12]=r+o*s},isNeutralState:function(i){return this.calculateMatrix(),u.BaseFilter.prototype.isNeutralState.call(this,i)},applyTo:function(i){this.calculateMatrix(),u.BaseFilter.prototype.applyTo.call(this,i)}}),a.Image.filters.HueRotation.fromObject=a.Image.filters.BaseFilter.fromObject}(w),function(g){var a=g.fabric||(g.fabric={}),u=a.util.object.clone;if(a.Text){a.warn("fabric.Text is already defined");return}var h="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");a.Text=a.util.createClass(a.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:a.Object.prototype.stateProperties.concat(h),cacheProperties:a.Object.prototype.cacheProperties.concat(h),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(i,r){this.styles=r?r.styles||{}:{},this.text=i,this.__skipDimension=!0,this.callSuper("initialize",r),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var i=this.path;i&&(i.segmentsInfo=a.util.getPathSegmentsInfo(i.path))},getMeasuringContext:function(){return a._measuringContext||(a._measuringContext=this.canvas&&this.canvas.contextCache||a.util.createCanvasElement().getContext("2d")),a._measuringContext},_splitText:function(){var i=this._splitTextIntoLines(this.text);return this.textLines=i.lines,this._textLines=i.graphemeLines,this._unwrappedTextLines=i._unwrappedLines,this._text=i.graphemeText,i},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var i,r,n,o,c,s,f,m=0,y=this._textLines.length;m<y;m++)if(!(this.textAlign!=="justify"&&(m===y-1||this.isEndOfWrapping(m)))&&(o=0,c=this._textLines[m],r=this.getLineWidth(m),r<this.width&&(f=this.textLines[m].match(this._reSpacesAndTabs)))){n=f.length,i=(this.width-r)/n;for(var _=0,S=c.length;_<=S;_++)s=this.__charBounds[m][_],this._reSpaceAndTab.test(c[_])?(s.width+=i,s.kernedWidth+=i,s.left+=o,o+=i):s.left+=o}},isEndOfWrapping:function(i){return i===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var i=this.callSuper("_getCacheCanvasDimensions"),r=this.fontSize;return i.width+=r*i.zoomX,i.height+=r*i.zoomY,i},_render:function(i){var r=this.path;r&&!r.isNotVisible()&&r._render(i),this._setTextStyles(i),this._renderTextLinesBackground(i),this._renderTextDecoration(i,"underline"),this._renderText(i),this._renderTextDecoration(i,"overline"),this._renderTextDecoration(i,"linethrough")},_renderText:function(i){this.paintFirst==="stroke"?(this._renderTextStroke(i),this._renderTextFill(i)):(this._renderTextFill(i),this._renderTextStroke(i))},_setTextStyles:function(i,r,n){if(i.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":i.textBaseline="middle";break;case"ascender":i.textBaseline="top";break;case"descender":i.textBaseline="bottom";break}i.font=this._getFontDeclaration(r,n)},calcTextWidth:function(){for(var i=this.getLineWidth(0),r=1,n=this._textLines.length;r<n;r++){var o=this.getLineWidth(r);o>i&&(i=o)}return i},_renderTextLine:function(i,r,n,o,c,s){this._renderChars(i,r,n,o,c,s)},_renderTextLinesBackground:function(i){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var r,n,o=i.fillStyle,c,s,f=this._getLeftOffset(),m=this._getTopOffset(),y=0,_=0,S,O,D=this.path,A,V=0,q=this._textLines.length;V<q;V++){if(r=this.getHeightOfLine(V),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",V)){m+=r;continue}c=this._textLines[V],n=this._getLineLeftOffset(V),_=0,y=0,s=this.getValueOfPropertyAt(V,0,"textBackgroundColor");for(var oe=0,ge=c.length;oe<ge;oe++)S=this.__charBounds[V][oe],O=this.getValueOfPropertyAt(V,oe,"textBackgroundColor"),D?(i.save(),i.translate(S.renderLeft,S.renderTop),i.rotate(S.angle),i.fillStyle=O,O&&i.fillRect(-S.width/2,-r/this.lineHeight*(1-this._fontSizeFraction),S.width,r/this.lineHeight),i.restore()):O!==s?(A=f+n+y,this.direction==="rtl"&&(A=this.width-A-_),i.fillStyle=s,s&&i.fillRect(A,m,_,r/this.lineHeight),y=S.left,_=S.width,s=O):_+=S.kernedWidth;O&&!D&&(A=f+n+y,this.direction==="rtl"&&(A=this.width-A-_),i.fillStyle=O,i.fillRect(A,m,_,r/this.lineHeight)),m+=r}i.fillStyle=o,this._removeShadow(i)}},getFontCache:function(i){var r=i.fontFamily.toLowerCase();a.charWidthsCache[r]||(a.charWidthsCache[r]={});var n=a.charWidthsCache[r],o=i.fontStyle.toLowerCase()+"_"+(i.fontWeight+"").toLowerCase();return n[o]||(n[o]={}),n[o]},_measureChar:function(i,r,n,o){var c=this.getFontCache(r),s=this._getFontDeclaration(r),f=this._getFontDeclaration(o),m=n+i,y=s===f,_,S,O,D=r.fontSize/this.CACHE_FONT_SIZE,A;if(n&&c[n]!==void 0&&(O=c[n]),c[i]!==void 0&&(A=_=c[i]),y&&c[m]!==void 0&&(S=c[m],A=S-O),_===void 0||O===void 0||S===void 0){var V=this.getMeasuringContext();this._setTextStyles(V,r,!0)}return _===void 0&&(A=_=V.measureText(i).width,c[i]=_),O===void 0&&y&&n&&(O=V.measureText(n).width,c[n]=O),y&&S===void 0&&(S=V.measureText(m).width,c[m]=S,A=S-O),{width:_*D,kernedWidth:A*D}},getHeightOfChar:function(i,r){return this.getValueOfPropertyAt(i,r,"fontSize")},measureLine:function(i){var r=this._measureLine(i);return this.charSpacing!==0&&(r.width-=this._getWidthOfCharSpacing()),r.width<0&&(r.width=0),r},_measureLine:function(i){var r=0,n,o,c=this._textLines[i],s,f,m=0,y=new Array(c.length),_=0,S,O,D=this.path,A=this.pathSide==="right";for(this.__charBounds[i]=y,n=0;n<c.length;n++)o=c[n],f=this._getGraphemeBox(o,i,n,s),y[n]=f,r+=f.kernedWidth,s=o;if(y[n]={left:f?f.left+f.width:0,width:0,kernedWidth:0,height:this.fontSize},D){switch(O=D.segmentsInfo[D.segmentsInfo.length-1].length,S=a.util.getPointOnPath(D.path,0,D.segmentsInfo),S.x+=D.pathOffset.x,S.y+=D.pathOffset.y,this.textAlign){case"left":_=A?O-r:0;break;case"center":_=(O-r)/2;break;case"right":_=A?0:O-r;break}for(_+=this.pathStartOffset*(A?-1:1),n=A?c.length-1:0;A?n>=0:n<c.length;A?n--:n++)f=y[n],_>O?_%=O:_<0&&(_+=O),this._setGraphemeOnPath(_,f,S),_+=f.kernedWidth}return{width:r,numOfSpaces:m}},_setGraphemeOnPath:function(i,r,n){var o=i+r.kernedWidth/2,c=this.path,s=a.util.getPointOnPath(c.path,o,c.segmentsInfo);r.renderLeft=s.x-n.x,r.renderTop=s.y-n.y,r.angle=s.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(i,r,n,o,c){var s=this.getCompleteStyleDeclaration(r,n),f=o?this.getCompleteStyleDeclaration(r,n-1):{},m=this._measureChar(i,s,o,f),y=m.kernedWidth,_=m.width,S;this.charSpacing!==0&&(S=this._getWidthOfCharSpacing(),_+=S,y+=S);var O={width:_,left:0,height:s.fontSize,kernedWidth:y,deltaY:s.deltaY};if(n>0&&!c){var D=this.__charBounds[r][n-1];O.left=D.left+D.width+m.kernedWidth-m.width}return O},getHeightOfLine:function(i){if(this.__lineHeights[i])return this.__lineHeights[i];for(var r=this._textLines[i],n=this.getHeightOfChar(i,0),o=1,c=r.length;o<c;o++)n=Math.max(this.getHeightOfChar(i,o),n);return this.__lineHeights[i]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var i,r=0,n=0,o=this._textLines.length;n<o;n++)i=this.getHeightOfLine(n),r+=n===o-1?i/this.lineHeight:i;return r},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(i,r){i.save();for(var n=0,o=this._getLeftOffset(),c=this._getTopOffset(),s=0,f=this._textLines.length;s<f;s++){var m=this.getHeightOfLine(s),y=m/this.lineHeight,_=this._getLineLeftOffset(s);this._renderTextLine(r,i,this._textLines[s],o+_,c+n+y,s),n+=m}i.restore()},_renderTextFill:function(i){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(i,"fillText")},_renderTextStroke:function(i){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(i),i.save(),this._setLineDash(i,this.strokeDashArray),i.beginPath(),this._renderTextCommon(i,"strokeText"),i.closePath(),i.restore())},_renderChars:function(i,r,n,o,c,s){var f=this.getHeightOfLine(s),m=this.textAlign.indexOf("justify")!==-1,y,_,S="",O,D=0,A,V=this.path,q=!m&&this.charSpacing===0&&this.isEmptyStyles(s)&&!V,oe=this.direction==="ltr",ge=this.direction==="ltr"?1:-1,me,he=r.canvas.getAttribute("dir");if(r.save(),he!==this.direction&&(r.canvas.setAttribute("dir",oe?"ltr":"rtl"),r.direction=oe?"ltr":"rtl",r.textAlign=oe?"left":"right"),c-=f*this._fontSizeFraction/this.lineHeight,q){this._renderChar(i,r,s,0,n.join(""),o,c,f),r.restore();return}for(var de=0,Ce=n.length-1;de<=Ce;de++)A=de===Ce||this.charSpacing||V,S+=n[de],O=this.__charBounds[s][de],D===0?(o+=ge*(O.kernedWidth-O.width),D+=O.width):D+=O.kernedWidth,m&&!A&&this._reSpaceAndTab.test(n[de])&&(A=!0),A||(y=y||this.getCompleteStyleDeclaration(s,de),_=this.getCompleteStyleDeclaration(s,de+1),A=a.util.hasStyleChanged(y,_,!1)),A&&(V?(r.save(),r.translate(O.renderLeft,O.renderTop),r.rotate(O.angle),this._renderChar(i,r,s,de,S,-D/2,0,f),r.restore()):(me=o,this._renderChar(i,r,s,de,S,me,c,f)),S="",y=_,o+=ge*D,D=0);r.restore()},_applyPatternGradientTransformText:function(i){var r=a.util.createCanvasElement(),n,o=this.width+this.strokeWidth,c=this.height+this.strokeWidth;return r.width=o,r.height=c,n=r.getContext("2d"),n.beginPath(),n.moveTo(0,0),n.lineTo(o,0),n.lineTo(o,c),n.lineTo(0,c),n.closePath(),n.translate(o/2,c/2),n.fillStyle=i.toLive(n),this._applyPatternGradientTransform(n,i),n.fill(),n.createPattern(r,"no-repeat")},handleFiller:function(i,r,n){var o,c;return n.toLive?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(o=-this.width/2,c=-this.height/2,i.translate(o,c),i[r]=this._applyPatternGradientTransformText(n),{offsetX:o,offsetY:c}):(i[r]=n.toLive(i,this),this._applyPatternGradientTransform(i,n)):(i[r]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(i,r){return i.lineWidth=r.strokeWidth,i.lineCap=this.strokeLineCap,i.lineDashOffset=this.strokeDashOffset,i.lineJoin=this.strokeLineJoin,i.miterLimit=this.strokeMiterLimit,this.handleFiller(i,"strokeStyle",r.stroke)},_setFillStyles:function(i,r){return this.handleFiller(i,"fillStyle",r.fill)},_renderChar:function(i,r,n,o,c,s,f){var m=this._getStyleDeclaration(n,o),y=this.getCompleteStyleDeclaration(n,o),_=i==="fillText"&&y.fill,S=i==="strokeText"&&y.stroke&&y.strokeWidth,O,D;!S&&!_||(r.save(),_&&(O=this._setFillStyles(r,y)),S&&(D=this._setStrokeStyles(r,y)),r.font=this._getFontDeclaration(y),m&&m.textBackgroundColor&&this._removeShadow(r),m&&m.deltaY&&(f+=m.deltaY),_&&r.fillText(c,s-O.offsetX,f-O.offsetY),S&&r.strokeText(c,s-D.offsetX,f-D.offsetY),r.restore())},setSuperscript:function(i,r){return this._setScript(i,r,this.superscript)},setSubscript:function(i,r){return this._setScript(i,r,this.subscript)},_setScript:function(i,r,n){var o=this.get2DCursorLocation(i,!0),c=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"fontSize"),s=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"deltaY"),f={fontSize:c*n.size,deltaY:s+c*n.baseline};return this.setSelectionStyles(f,i,r),this},_getLineLeftOffset:function(i){var r=this.getLineWidth(i),n=this.width-r,o=this.textAlign,c=this.direction,f,s=0,f=this.isEndOfWrapping(i);return o==="justify"||o==="justify-center"&&!f||o==="justify-right"&&!f||o==="justify-left"&&!f?0:(o==="center"&&(s=n/2),o==="right"&&(s=n),o==="justify-center"&&(s=n/2),o==="justify-right"&&(s=n),c==="rtl"&&(s-=n),s)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var i=this._forceClearCache;return i||(i=this.hasStateChanged("_dimensionAffectingProps")),i&&(this.dirty=!0,this._forceClearCache=!1),i},getLineWidth:function(i){if(this.__lineWidths[i]!==void 0)return this.__lineWidths[i];var r=this.measureLine(i),n=r.width;return this.__lineWidths[i]=n,n},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(i,r,n){var o=this._getStyleDeclaration(i,r);return o&&typeof o[n]<"u"?o[n]:this[n]},_renderTextDecoration:function(i,r){if(!(!this[r]&&!this.styleHas(r))){i.save(),(r==="overline"||r==="linethrough")&&this._removeShadow(i);for(var n,o,c,s,f,m,y,_,S=this._getLeftOffset(),O=this._getTopOffset(),D,A,V,q,oe,ge,me,he,de=this.path,Ce=this._getWidthOfCharSpacing(),_e=this.offsets[r],Z=0,k=this._textLines.length;Z<k;Z++){if(n=this.getHeightOfLine(Z),!this[r]&&!this.styleHas(r,Z)){O+=n;continue}y=this._textLines[Z],ge=n/this.lineHeight,s=this._getLineLeftOffset(Z),A=0,V=0,_=this.getValueOfPropertyAt(Z,0,r),he=this.getValueOfPropertyAt(Z,0,"fill"),D=O+ge*(1-this._fontSizeFraction),o=this.getHeightOfChar(Z,0),f=this.getValueOfPropertyAt(Z,0,"deltaY");for(var M=0,x=y.length;M<x;M++)if(q=this.__charBounds[Z][M],oe=this.getValueOfPropertyAt(Z,M,r),me=this.getValueOfPropertyAt(Z,M,"fill"),c=this.getHeightOfChar(Z,M),m=this.getValueOfPropertyAt(Z,M,"deltaY"),de&&oe&&me)i.save(),i.fillStyle=he,i.translate(q.renderLeft,q.renderTop),i.rotate(q.angle),i.fillRect(-q.kernedWidth/2,_e*c+m,q.kernedWidth,this.fontSize/15),i.restore();else if((oe!==_||me!==he||c!==o||m!==f)&&V>0){var b=S+s+A;this.direction==="rtl"&&(b=this.width-b-V),_&&he&&(i.fillStyle=he,i.fillRect(b,D+_e*o+f,V,this.fontSize/15)),A=q.left,V=q.width,_=oe,he=me,o=c,f=m}else V+=q.kernedWidth;var b=S+s+A;this.direction==="rtl"&&(b=this.width-b-V),i.fillStyle=me,oe&&me&&i.fillRect(b,D+_e*o+f,V-Ce,this.fontSize/15),O+=n}i.restore()}},_getFontDeclaration:function(i,r){var n=i||this,o=this.fontFamily,c=a.Text.genericFonts.indexOf(o.toLowerCase())>-1,s=o===void 0||o.indexOf("'")>-1||o.indexOf(",")>-1||o.indexOf('"')>-1||c?n.fontFamily:'"'+n.fontFamily+'"';return[a.isLikelyNode?n.fontWeight:n.fontStyle,a.isLikelyNode?n.fontStyle:n.fontWeight,r?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",s].join(" ")},render:function(i){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",i)))},_splitTextIntoLines:function(i){for(var r=i.split(this._reNewline),n=new Array(r.length),o=[`
`],c=[],s=0;s<r.length;s++)n[s]=a.util.string.graphemeSplit(r[s]),c=c.concat(n[s],o);return c.pop(),{_unwrappedLines:n,lines:r,graphemeText:c,graphemeLines:n}},toObject:function(i){var r=h.concat(i),n=this.callSuper("toObject",r);return n.styles=a.util.stylesToArray(this.styles,this.text),n.path&&(n.path=this.path.toObject()),n},set:function(i,r){this.callSuper("set",i,r);var n=!1,o=!1;if(typeof i=="object")for(var c in i)c==="path"&&this.setPathInfo(),n=n||this._dimensionAffectingProps.indexOf(c)!==-1,o=o||c==="path";else n=this._dimensionAffectingProps.indexOf(i)!==-1,o=i==="path";return o&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),a.Text.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),a.Text.DEFAULT_SVG_FONT_SIZE=16,a.Text.fromElement=function(i,r,n){if(!i)return r(null);var o=a.parseAttributes(i,a.Text.ATTRIBUTE_NAMES),c=o.textAnchor||"left";if(n=a.util.object.extend(n?u(n):{},o),n.top=n.top||0,n.left=n.left||0,o.textDecoration){var s=o.textDecoration;s.indexOf("underline")!==-1&&(n.underline=!0),s.indexOf("overline")!==-1&&(n.overline=!0),s.indexOf("line-through")!==-1&&(n.linethrough=!0),delete n.textDecoration}"dx"in o&&(n.left+=o.dx),"dy"in o&&(n.top+=o.dy),"fontSize"in n||(n.fontSize=a.Text.DEFAULT_SVG_FONT_SIZE);var f="";"textContent"in i?f=i.textContent:"firstChild"in i&&i.firstChild!==null&&"data"in i.firstChild&&i.firstChild.data!==null&&(f=i.firstChild.data),f=f.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var m=n.strokeWidth;n.strokeWidth=0;var y=new a.Text(f,n),_=y.getScaledHeight()/y.height,S=(y.height+y.strokeWidth)*y.lineHeight-y.height,O=S*_,D=y.getScaledHeight()+O,A=0;c==="center"&&(A=y.getScaledWidth()/2),c==="right"&&(A=y.getScaledWidth()),y.set({left:y.left-A,top:y.top-(D-y.fontSize*(.07+y._fontSizeFraction))/y.lineHeight,strokeWidth:typeof m<"u"?m:1}),r(y)},a.Text.fromObject=function(i,r){var n=u(i),o=i.path;return delete n.path,a.Object._fromObject("Text",n,function(c){c.styles=a.util.stylesFromArray(i.styles,i.text),o?a.Object._fromObject("Path",o,function(s){c.set("path",s),r(c)},"path"):r(c)},"text")},a.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],a.util.createAccessors&&a.util.createAccessors(a.Text)}(w),function(){p.util.object.extend(p.Text.prototype,{isEmptyStyles:function(g){if(!this.styles||typeof g<"u"&&!this.styles[g])return!0;var a=typeof g>"u"?this.styles:{line:this.styles[g]};for(var u in a)for(var h in a[u])for(var i in a[u][h])return!1;return!0},styleHas:function(g,a){if(!this.styles||!g||g===""||typeof a<"u"&&!this.styles[a])return!1;var u=typeof a>"u"?this.styles:{0:this.styles[a]};for(var h in u)for(var i in u[h])if(typeof u[h][i][g]<"u")return!0;return!1},cleanStyle:function(g){if(!this.styles||!g||g==="")return!1;var a=this.styles,u=0,h,i,r=!0,n=0,o;for(var c in a){h=0;for(var s in a[c]){var o=a[c][s],f=o.hasOwnProperty(g);u++,f?(i?o[g]!==i&&(r=!1):i=o[g],o[g]===this[g]&&delete o[g]):r=!1,Object.keys(o).length!==0?h++:delete a[c][s]}h===0&&delete a[c]}for(var m=0;m<this._textLines.length;m++)n+=this._textLines[m].length;r&&u===n&&(this[g]=i,this.removeStyle(g))},removeStyle:function(g){if(!(!this.styles||!g||g==="")){var a=this.styles,u,h,i;for(h in a){u=a[h];for(i in u)delete u[i][g],Object.keys(u[i]).length===0&&delete u[i];Object.keys(u).length===0&&delete a[h]}}},_extendStyles:function(g,a){var u=this.get2DCursorLocation(g);this._getLineStyle(u.lineIndex)||this._setLineStyle(u.lineIndex),this._getStyleDeclaration(u.lineIndex,u.charIndex)||this._setStyleDeclaration(u.lineIndex,u.charIndex,{}),p.util.object.extend(this._getStyleDeclaration(u.lineIndex,u.charIndex),a)},get2DCursorLocation:function(g,a){typeof g>"u"&&(g=this.selectionStart);for(var u=a?this._unwrappedTextLines:this._textLines,h=u.length,i=0;i<h;i++){if(g<=u[i].length)return{lineIndex:i,charIndex:g};g-=u[i].length+this.missingNewlineOffset(i,a)}return{lineIndex:i-1,charIndex:u[i-1].length<g?u[i-1].length:g}},getSelectionStyles:function(g,a,u){typeof g>"u"&&(g=this.selectionStart||0),typeof a>"u"&&(a=this.selectionEnd||g);for(var h=[],i=g;i<a;i++)h.push(this.getStyleAtPosition(i,u));return h},getStyleAtPosition:function(g,a){var u=this.get2DCursorLocation(g),h=a?this.getCompleteStyleDeclaration(u.lineIndex,u.charIndex):this._getStyleDeclaration(u.lineIndex,u.charIndex);return h||{}},setSelectionStyles:function(g,a,u){typeof a>"u"&&(a=this.selectionStart||0),typeof u>"u"&&(u=this.selectionEnd||a);for(var h=a;h<u;h++)this._extendStyles(h,g);return this._forceClearCache=!0,this},_getStyleDeclaration:function(g,a){var u=this.styles&&this.styles[g];return u?u[a]:null},getCompleteStyleDeclaration:function(g,a){for(var u=this._getStyleDeclaration(g,a)||{},h={},i,r=0;r<this._styleProperties.length;r++)i=this._styleProperties[r],h[i]=typeof u[i]>"u"?this[i]:u[i];return h},_setStyleDeclaration:function(g,a,u){this.styles[g][a]=u},_deleteStyleDeclaration:function(g,a){delete this.styles[g][a]},_getLineStyle:function(g){return!!this.styles[g]},_setLineStyle:function(g){this.styles[g]={}},_deleteLineStyle:function(g){delete this.styles[g]}})}(),function(){function g(a){a.textDecoration&&(a.textDecoration.indexOf("underline")>-1&&(a.underline=!0),a.textDecoration.indexOf("line-through")>-1&&(a.linethrough=!0),a.textDecoration.indexOf("overline")>-1&&(a.overline=!0),delete a.textDecoration)}p.IText=p.util.createClass(p.Text,p.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(a,u){this.callSuper("initialize",a,u),this.initBehavior()},setSelectionStart:function(a){a=Math.max(a,0),this._updateAndFire("selectionStart",a)},setSelectionEnd:function(a){a=Math.min(a,this.text.length),this._updateAndFire("selectionEnd",a)},_updateAndFire:function(a,u){this[a]!==u&&(this._fireSelectionChanged(),this[a]=u),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(a){this.clearContextTop(),this.callSuper("render",a),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(a){this.callSuper("_render",a)},clearContextTop:function(a){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var u=this.canvas.contextTop,h=this.canvas.viewportTransform;u.save(),u.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this.transform(u),this._clearTextArea(u),a||u.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var a=this._getCursorBoundaries(),u=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(a,u):this.renderSelection(a,u),u.restore()}},_clearTextArea:function(a){var u=this.width+4,h=this.height+4;a.clearRect(-u/2,-h/2,u,h)},_getCursorBoundaries:function(a){typeof a>"u"&&(a=this.selectionStart);var u=this._getLeftOffset(),h=this._getTopOffset(),i=this._getCursorBoundariesOffsets(a);return{left:u,top:h,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(a){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var u,h,i,r=0,n=0,o,c=this.get2DCursorLocation(a);i=c.charIndex,h=c.lineIndex;for(var s=0;s<h;s++)r+=this.getHeightOfLine(s);u=this._getLineLeftOffset(h);var f=this.__charBounds[h][i];return f&&(n=f.left),this.charSpacing!==0&&i===this._textLines[h].length&&(n-=this._getWidthOfCharSpacing()),o={top:r,left:u+(n>0?n:0)},this.direction==="rtl"&&(o.left*=-1),this.cursorOffsetCache=o,this.cursorOffsetCache},renderCursor:function(a,u){var h=this.get2DCursorLocation(),i=h.lineIndex,r=h.charIndex>0?h.charIndex-1:0,n=this.getValueOfPropertyAt(i,r,"fontSize"),o=this.scaleX*this.canvas.getZoom(),c=this.cursorWidth/o,s=a.topOffset,f=this.getValueOfPropertyAt(i,r,"deltaY");s+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-n*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(a,u),u.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,r,"fill"),u.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,u.fillRect(a.left+a.leftOffset-c/2,s+a.top+f,c,n)},renderSelection:function(a,u){for(var h=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=this.textAlign.indexOf("justify")!==-1,n=this.get2DCursorLocation(h),o=this.get2DCursorLocation(i),c=n.lineIndex,s=o.lineIndex,f=n.charIndex<0?0:n.charIndex,m=o.charIndex<0?0:o.charIndex,y=c;y<=s;y++){var _=this._getLineLeftOffset(y)||0,S=this.getHeightOfLine(y),O=0,D=0,A=0;if(y===c&&(D=this.__charBounds[c][f].left),y>=c&&y<s)A=r&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===s)if(m===0)A=this.__charBounds[s][m].left;else{var V=this._getWidthOfCharSpacing();A=this.__charBounds[s][m-1].left+this.__charBounds[s][m-1].width-V}O=S,(this.lineHeight<1||y===s&&this.lineHeight>1)&&(S/=this.lineHeight);var q=a.left+_+D,oe=A-D,ge=S,me=0;this.inCompositionMode?(u.fillStyle=this.compositionColor||"black",ge=1,me=S):u.fillStyle=this.selectionColor,this.direction==="rtl"&&(q=this.width-q-oe),u.fillRect(q,a.top+a.topOffset+me,oe,ge),a.topOffset+=O}},getCurrentCharFontSize:function(){var a=this._getCurrentCharIndex();return this.getValueOfPropertyAt(a.l,a.c,"fontSize")},getCurrentCharColor:function(){var a=this._getCurrentCharIndex();return this.getValueOfPropertyAt(a.l,a.c,"fill")},_getCurrentCharIndex:function(){var a=this.get2DCursorLocation(this.selectionStart,!0),u=a.charIndex>0?a.charIndex-1:0;return{l:a.lineIndex,c:u}}}),p.IText.fromObject=function(a,u){var h=p.util.stylesFromArray(a.styles,a.text),i=Object.assign({},a,{styles:h});if(delete i.path,g(i),i.styles)for(var r in i.styles)for(var n in i.styles[r])g(i.styles[r][n]);p.Object._fromObject("IText",i,function(o){a.path?p.Object._fromObject("Path",a.path,function(c){o.set("path",c),u(o)},"path"):u(o)},"text")}}(),function(){var g=p.util.object.clone;p.util.object.extend(p.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var a=this;this.on("added",function(){var u=a.canvas;u&&(u._hasITextHandlers||(u._hasITextHandlers=!0,a._initCanvasHandlers(u)),u._iTextInstances=u._iTextInstances||[],u._iTextInstances.push(a))})},initRemovedHandler:function(){var a=this;this.on("removed",function(){var u=a.canvas;u&&(u._iTextInstances=u._iTextInstances||[],p.util.removeFromArray(u._iTextInstances,a),u._iTextInstances.length===0&&(u._hasITextHandlers=!1,a._removeCanvasHandlers(u)))})},_initCanvasHandlers:function(a){a._mouseUpITextHandler=function(){a._iTextInstances&&a._iTextInstances.forEach(function(u){u.__isMousedown=!1})},a.on("mouse:up",a._mouseUpITextHandler)},_removeCanvasHandlers:function(a){a.off("mouse:up",a._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(a,u,h,i){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},a.animate("_currentCursorOpacity",u,{duration:h,onComplete:function(){r.isAborted||a[i]()},onChange:function(){a.canvas&&a.selectionStart===a.selectionEnd&&a.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var a=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){a._currentTickCompleteState=a._animateCursor(a,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(a){var u=this,h=a?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){u._tick()},h)},abortCursorAnimation:function(){var a=this._currentTickState||this._currentTickCompleteState,u=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,a&&u&&u.clearContext(u.contextTop||u.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(a){var u=0,h=a-1;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)u++,h--;for(;/\S/.test(this._text[h])&&h>-1;)u++,h--;return a-u},findWordBoundaryRight:function(a){var u=0,h=a;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)u++,h++;for(;/\S/.test(this._text[h])&&h<this._text.length;)u++,h++;return a+u},findLineBoundaryLeft:function(a){for(var u=0,h=a-1;!/\n/.test(this._text[h])&&h>-1;)u++,h--;return a-u},findLineBoundaryRight:function(a){for(var u=0,h=a;!/\n/.test(this._text[h])&&h<this._text.length;)u++,h++;return a+u},searchWordBoundary:function(a,u){for(var h=this._text,i=this._reSpace.test(h[a])?a-1:a,r=h[i],n=p.reNonWord;!n.test(r)&&i>0&&i<h.length;)i+=u,r=h[i];return n.test(r)&&(i+=u===1?0:1),i},selectWord:function(a){a=a||this.selectionStart;var u=this.searchWordBoundary(a,-1),h=this.searchWordBoundary(a,1);this.selectionStart=u,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(a){a=a||this.selectionStart;var u=this.findLineBoundaryLeft(a),h=this.findLineBoundaryRight(a);return this.selectionStart=u,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(a){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(a),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(a){a._iTextInstances&&a._iTextInstances.forEach(function(u){u.selected=!1,u.isEditing&&u.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(a){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var u=this.getSelectionStartFromPointer(a.e),h=this.selectionStart,i=this.selectionEnd;(u!==this.__selectionStartOnMouseDown||h===i)&&(h===u||i===u)||(u>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=u):(this.selectionStart=u,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==h||this.selectionEnd!==i)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(a,u,h){var i=h.slice(0,a),r=p.util.string.graphemeSplit(i).length;if(a===u)return{selectionStart:r,selectionEnd:r};var n=h.slice(a,u),o=p.util.string.graphemeSplit(n).length;return{selectionStart:r,selectionEnd:r+o}},fromGraphemeToStringSelection:function(a,u,h){var i=h.slice(0,a),r=i.join("").length;if(a===u)return{selectionStart:r,selectionEnd:r};var n=h.slice(a,u),o=n.join("").length;return{selectionStart:r,selectionEnd:r+o}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var a=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=a.selectionStart,this.hiddenTextarea.selectionEnd=a.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var a=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=a.selectionEnd,this.inCompositionMode||(this.selectionStart=a.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var a=this._calcTextareaPosition();this.hiddenTextarea.style.left=a.left,this.hiddenTextarea.style.top=a.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var a=this.inCompositionMode?this.compositionStart:this.selectionStart,u=this._getCursorBoundaries(a),h=this.get2DCursorLocation(a),i=h.lineIndex,r=h.charIndex,n=this.getValueOfPropertyAt(i,r,"fontSize")*this.lineHeight,o=u.leftOffset,c=this.calcTransformMatrix(),s={x:u.left+o,y:u.top+u.topOffset+n},f=this.canvas.getRetinaScaling(),m=this.canvas.upperCanvasEl,y=m.width/f,_=m.height/f,S=y-n,O=_-n,D=m.clientWidth/y,A=m.clientHeight/_;return s=p.util.transformPoint(s,c),s=p.util.transformPoint(s,this.canvas.viewportTransform),s.x*=D,s.y*=A,s.x<0&&(s.x=0),s.x>S&&(s.x=S),s.y<0&&(s.y=0),s.y>O&&(s.y=O),s.x+=this.canvas._offset.left,s.y+=this.canvas._offset.top,{left:s.x+"px",top:s.y+"px",fontSize:n+"px",charHeight:n}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var a=this._textBeforeEdit!==this.text,u=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,u&&(u.blur&&u.blur(),u.parentNode&&u.parentNode.removeChild(u)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),a&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),a&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var a in this.styles)this._textLines[a]||delete this.styles[a]},removeStyleFromTo:function(a,u){var h=this.get2DCursorLocation(a,!0),i=this.get2DCursorLocation(u,!0),r=h.lineIndex,n=h.charIndex,o=i.lineIndex,c=i.charIndex,s,f;if(r!==o){if(this.styles[r])for(s=n;s<this._unwrappedTextLines[r].length;s++)delete this.styles[r][s];if(this.styles[o])for(s=c;s<this._unwrappedTextLines[o].length;s++)f=this.styles[o][s],f&&(this.styles[r]||(this.styles[r]={}),this.styles[r][n+s-c]=f);for(s=r+1;s<=o;s++)delete this.styles[s];this.shiftLineStyles(o,r-o)}else if(this.styles[r]){f=this.styles[r];var m=c-n,y,_;for(s=n;s<c;s++)delete f[s];for(_ in this.styles[r])y=parseInt(_,10),y>=c&&(f[y-m]=f[_],delete f[_])}},shiftLineStyles:function(a,u){var h=g(this.styles);for(var i in this.styles){var r=parseInt(i,10);r>a&&(this.styles[r+u]=h[r],h[r-u]||delete this.styles[r])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(a,u,h,i){var r,n={},o=!1,c=this._unwrappedTextLines[a].length,s=c===u;h||(h=1),this.shiftLineStyles(a,h),this.styles[a]&&(r=this.styles[a][u===0?u:u-1]);for(var f in this.styles[a]){var m=parseInt(f,10);m>=u&&(o=!0,n[m-u]=this.styles[a][f],s&&u===0||delete this.styles[a][f])}var y=!1;for(o&&!s&&(this.styles[a+h]=n,y=!0),(y||c>u)&&h--;h>0;)i&&i[h-1]?this.styles[a+h]={0:g(i[h-1])}:r?this.styles[a+h]={0:g(r)}:delete this.styles[a+h],h--;this._forceClearCache=!0},insertCharStyleObject:function(a,u,h,i){this.styles||(this.styles={});var r=this.styles[a],n=r?g(r):{};h||(h=1);for(var o in n){var c=parseInt(o,10);c>=u&&(r[c+h]=n[c],n[c-h]||delete r[c])}if(this._forceClearCache=!0,i){for(;h--;)Object.keys(i[h]).length&&(this.styles[a]||(this.styles[a]={}),this.styles[a][u+h]=g(i[h]));return}if(r)for(var s=r[u?u-1:1];s&&h--;)this.styles[a][u+h]=g(s)},insertNewStyleBlock:function(a,u,h){for(var i=this.get2DCursorLocation(u,!0),r=[0],n=0,o=0;o<a.length;o++)a[o]===`
`?(n++,r[n]=0):r[n]++;r[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,r[0],h),h=h&&h.slice(r[0]+1)),n&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+r[0],n);for(var o=1;o<n;o++)r[o]>0?this.insertCharStyleObject(i.lineIndex+o,0,r[o],h):h&&this.styles[i.lineIndex+o]&&h[0]&&(this.styles[i.lineIndex+o][0]=h[0]),h=h&&h.slice(r[o]+1);r[o]>0&&this.insertCharStyleObject(i.lineIndex+o,0,r[o],h)},setSelectionStartEndWithShift:function(a,u,h){h<=a?(u===a?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=a),this.selectionStart=h):h>a&&h<u?this._selectionDirection==="right"?this.selectionEnd=h:this.selectionStart=h:(u===a?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=u),this.selectionEnd=h)},setSelectionInBoundaries:function(){var a=this.text.length;this.selectionStart>a?this.selectionStart=a:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>a?this.selectionEnd=a:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),p.util.object.extend(p.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(g){if(this.canvas){this.__newClickTime=+new Date;var a=g.pointer;this.isTripleClick(a)&&(this.fire("tripleclick",g),this._stopEvent(g.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=a,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(g){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===g.x&&this.__lastPointer.y===g.y},_stopEvent:function(g){g.preventDefault&&g.preventDefault(),g.stopPropagation&&g.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(g){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(g.e))},tripleClickHandler:function(g){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(g.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(g){!this.canvas||!this.editable||g.e.button&&g.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(g.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(g){!this.canvas||!this.editable||g.e.button&&g.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(g){if(this.__isMousedown=!1,!(!this.editable||this.group||g.transform&&g.transform.actionPerformed||g.e.button&&g.e.button!==1)){if(this.canvas){var a=this.canvas._activeObject;if(a&&a!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(g.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(g){var a=this.getSelectionStartFromPointer(g),u=this.selectionStart,h=this.selectionEnd;g.shiftKey?this.setSelectionStartEndWithShift(u,h,a):(this.selectionStart=a,this.selectionEnd=a),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(g){for(var a=this.getLocalPointer(g),u=0,h=0,i=0,r=0,n=0,o,c,s=0,f=this._textLines.length;s<f&&i<=a.y;s++)i+=this.getHeightOfLine(s)*this.scaleY,n=s,s>0&&(r+=this._textLines[s-1].length+this.missingNewlineOffset(s-1));o=this._getLineLeftOffset(n),h=o*this.scaleX,c=this._textLines[n],this.direction==="rtl"&&(a.x=this.width*this.scaleX-a.x+h);for(var m=0,y=c.length;m<y&&(u=h,h+=this.__charBounds[n][m].kernedWidth*this.scaleX,h<=a.x);m++)r++;return this._getNewSelectionStartFromOffset(a,u,h,r,y)},_getNewSelectionStartFromOffset:function(g,a,u,h,i){var r=g.x-a,n=u-g.x,o=n>r||n<0?0:1,c=h+o;return this.flipX&&(c=i-c),c>this._text.length&&(c=this._text.length),c}}),p.util.object.extend(p.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=p.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var g=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+g.top+"; left: "+g.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+g.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):p.document.body.appendChild(this.hiddenTextarea),p.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),p.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),p.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),p.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),p.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),p.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),p.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),p.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),p.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(p.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(g){if(this.isEditing){var a=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(g.keyCode in a)this[a[g.keyCode]](g);else if(g.keyCode in this.ctrlKeysMapDown&&(g.ctrlKey||g.metaKey))this[this.ctrlKeysMapDown[g.keyCode]](g);else return;g.stopImmediatePropagation(),g.preventDefault(),g.keyCode>=33&&g.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(g){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(g.keyCode in this.ctrlKeysMapUp&&(g.ctrlKey||g.metaKey))this[this.ctrlKeysMapUp[g.keyCode]](g);else return;g.stopImmediatePropagation(),g.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(g){var a=this.fromPaste;if(this.fromPaste=!1,g&&g.stopPropagation(),!!this.isEditing){var u=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,i=u.length,r,n,o=i-h,c=this.selectionStart,s=this.selectionEnd,f=c!==s,m,y,_;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var S=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),O=c>S.selectionStart;f?(r=this._text.slice(c,s),o+=s-c):i<h&&(O?r=this._text.slice(s+o,s):r=this._text.slice(c,c-o)),n=u.slice(S.selectionEnd-o,S.selectionEnd),r&&r.length&&(n.length&&(m=this.getSelectionStyles(c,c+1,!1),m=n.map(function(){return m[0]})),f?(y=c,_=s):O?(y=s-r.length,_=s):(y=s,_=s+r.length),this.removeStyleFromTo(y,_)),n.length&&(a&&n.join("")===p.copiedText&&!p.disableStyleCopyPaste&&(m=p.copiedTextStyle),this.insertNewStyleBlock(n,c,m)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(g){this.compositionStart=g.target.selectionStart,this.compositionEnd=g.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(p.copiedText=this.getSelectedText(),p.disableStyleCopyPaste?p.copiedTextStyle=null:p.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(g){return g&&g.clipboardData||p.window.clipboardData},_getWidthBeforeCursor:function(g,a){var u=this._getLineLeftOffset(g),h;return a>0&&(h=this.__charBounds[g][a-1],u+=h.left+h.width),u},getDownCursorOffset:function(g,a){var u=this._getSelectionForOffset(g,a),h=this.get2DCursorLocation(u),i=h.lineIndex;if(i===this._textLines.length-1||g.metaKey||g.keyCode===34)return this._text.length-u;var r=h.charIndex,n=this._getWidthBeforeCursor(i,r),o=this._getIndexOnLine(i+1,n),c=this._textLines[i].slice(r);return c.length+o+1+this.missingNewlineOffset(i)},_getSelectionForOffset:function(g,a){return g.shiftKey&&this.selectionStart!==this.selectionEnd&&a?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(g,a){var u=this._getSelectionForOffset(g,a),h=this.get2DCursorLocation(u),i=h.lineIndex;if(i===0||g.metaKey||g.keyCode===33)return-u;var r=h.charIndex,n=this._getWidthBeforeCursor(i,r),o=this._getIndexOnLine(i-1,n),c=this._textLines[i].slice(0,r),s=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+o-c.length+(1-s)},_getIndexOnLine:function(g,a){for(var u=this._textLines[g],h=this._getLineLeftOffset(g),i=h,r=0,n,o,c=0,s=u.length;c<s;c++)if(n=this.__charBounds[g][c].width,i+=n,i>a){o=!0;var f=i-n,m=i,y=Math.abs(f-a),_=Math.abs(m-a);r=_<y?c:c-1;break}return o||(r=u.length-1),r},moveCursorDown:function(g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",g)},moveCursorUp:function(g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",g)},_moveCursorUpOrDown:function(g,a){var u="get"+g+"CursorOffset",h=this[u](a,this._selectionDirection==="right");a.shiftKey?this.moveCursorWithShift(h):this.moveCursorWithoutShift(h),h!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(g){var a=this._selectionDirection==="left"?this.selectionStart+g:this.selectionEnd+g;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,a),g!==0},moveCursorWithoutShift:function(g){return g<0?(this.selectionStart+=g,this.selectionEnd=this.selectionStart):(this.selectionEnd+=g,this.selectionStart=this.selectionEnd),g!==0},moveCursorLeft:function(g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",g)},_move:function(g,a,u){var h;if(g.altKey)h=this["findWordBoundary"+u](this[a]);else if(g.metaKey||g.keyCode===35||g.keyCode===36)h=this["findLineBoundary"+u](this[a]);else return this[a]+=u==="Left"?-1:1,!0;if(typeof h<"u"&&this[a]!==h)return this[a]=h,!0},_moveLeft:function(g,a){return this._move(g,a,"Left")},_moveRight:function(g,a){return this._move(g,a,"Right")},moveCursorLeftWithoutShift:function(g){var a=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(a=this._moveLeft(g,"selectionStart")),this.selectionEnd=this.selectionStart,a},moveCursorLeftWithShift:function(g){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(g,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(g,"selectionStart")},moveCursorRight:function(g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",g)},_moveCursorLeftOrRight:function(g,a){var u="moveCursor"+g+"With";this._currentCursorOpacity=1,a.shiftKey?u+="Shift":u+="outShift",this[u](a)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(g){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(g,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(g,"selectionEnd")},moveCursorRightWithoutShift:function(g){var a=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(a=this._moveRight(g,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,a},removeChars:function(g,a){typeof a>"u"&&(a=g+1),this.removeStyleFromTo(g,a),this._text.splice(g,a-g),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(g,a,u,h){typeof h>"u"&&(h=u),h>u&&this.removeStyleFromTo(u,h);var i=p.util.string.graphemeSplit(g);this.insertNewStyleBlock(i,u,a),this._text=[].concat(this._text.slice(0,u),i,this._text.slice(h)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var g=p.util.toFixed,a=p.util.radiansToDegrees,u=p.util.calcRotateMatrix,h=p.util.transformPoint,i=/  +/g;p.util.object.extend(p.Text.prototype,{_toSVG:function(){var r=this._getSVGLeftTopOffsets(),n=this._getSVGTextAndBg(r.textTop,r.textLeft);return this._wrapSVGTextAndBg(n)},toSVG:function(r){var n=this._createBaseSVGMarkup(this._toSVG(),{reviver:r,noStyle:!0,withShadow:!0}),o=this.path;return o?n+o._createBaseSVGMarkup(o._toSVG(),{reviver:r,withShadow:!0}):n},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(r){var n=!0,o=this.getSvgTextDecoration(this);return[r.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",o?'text-decoration="'+o+'" ':"",'style="',this.getSvgStyles(n),'"',this.addPaintOrder()," >",r.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(r,n){var o=[],c=[],s=r,f;this._setSVGBg(c);for(var m=0,y=this._textLines.length;m<y;m++)f=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(c,m,n+f,s),this._setSVGTextLineText(o,m,n+f,s),s+=this.getHeightOfLine(m);return{textSpans:o,textBgRects:c}},_createTextCharSpan:function(r,n,o,c,s){var f=r!==r.trim()||r.match(i),m=this.getSvgSpanStyles(n,f),y=m?'style="'+m+'"':"",_=n.deltaY,S="",O=p.Object.NUM_FRACTION_DIGITS,D="";if(_&&(S=' dy="'+g(_,O)+'" '),s.renderLeft!==void 0){var A=s.angle;D=' rotate="'+g(a(A),p.Object.NUM_FRACTION_DIGITS)+'" ';var V=s.width/2,q=u({angle:a(A)});q[4]=s.renderLeft,q[5]=s.renderTop;var oe=h({x:-V,y:0},q);o=oe.x,c=oe.y}return['<tspan x="',g(o,O),'" y="',g(c,O),'" ',S,y,D,">",p.util.string.escapeXml(r),"</tspan>"].join("")},_setSVGTextLineText:function(r,n,o,c){var s=this.getHeightOfLine(n),f=this.textAlign.indexOf("justify")!==-1,m,y,_="",S,O,D=0,A=this._textLines[n],V;c+=s*(1-this._fontSizeFraction)/this.lineHeight;for(var q=0,oe=A.length-1;q<=oe;q++)V=q===oe||this.charSpacing||this.path,_+=A[q],S=this.__charBounds[n][q],D===0?(o+=S.kernedWidth-S.width,D+=S.width):D+=S.kernedWidth,f&&!V&&this._reSpaceAndTab.test(A[q])&&(V=!0),V||(m=m||this.getCompleteStyleDeclaration(n,q),y=this.getCompleteStyleDeclaration(n,q+1),V=p.util.hasStyleChanged(m,y,!0)),V&&(O=this._getStyleDeclaration(n,q)||{},r.push(this._createTextCharSpan(_,O,o,c,S)),_="",m=y,o+=D,D=0)},_pushTextBgRect:function(r,n,o,c,s,f){var m=p.Object.NUM_FRACTION_DIGITS;r.push("		<rect ",this._getFillAttributes(n),' x="',g(o,m),'" y="',g(c,m),'" width="',g(s,m),'" height="',g(f,m),`"></rect>
`)},_setSVGTextLineBg:function(r,n,o,c){for(var s=this._textLines[n],f=this.getHeightOfLine(n)/this.lineHeight,m=0,y=0,_,S,O=this.getValueOfPropertyAt(n,0,"textBackgroundColor"),D=0,A=s.length;D<A;D++)_=this.__charBounds[n][D],S=this.getValueOfPropertyAt(n,D,"textBackgroundColor"),S!==O?(O&&this._pushTextBgRect(r,O,o+y,c,m,f),y=_.left,m=_.width,O=S):m+=_.kernedWidth;S&&this._pushTextBgRect(r,S,o+y,c,m,f)},_getFillAttributes:function(r){var n=r&&typeof r=="string"?new p.Color(r):"";return!n||!n.getSource()||n.getAlpha()===1?'fill="'+r+'"':'opacity="'+n.getAlpha()+'" fill="'+n.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(r){for(var n=0,o=0,c=0;c<r;c++)n+=this.getHeightOfLine(c);return o=this.getHeightOfLine(c),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*o/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(r){var n=p.Object.prototype.getSvgStyles.call(this,r);return n+" white-space: pre;"}})}(),function(g){var a=g.fabric||(g.fabric={});a.Textbox=a.util.createClass(a.IText,a.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:a.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(u){for(var h=0,i=0,r=0,n={},o=0;o<u.graphemeLines.length;o++)u.graphemeText[r]===`
`&&o>0?(i=0,r++,h++):!this.splitByGrapheme&&this._reSpaceAndTab.test(u.graphemeText[r])&&o>0&&(i++,r++),n[o]={line:h,offset:i},r+=u.graphemeLines[o].length,i+=u.graphemeLines[o].length;return n},styleHas:function(u,h){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[h];i&&(h=i.line)}return a.Text.prototype.styleHas.call(this,u,h)},isEmptyStyles:function(u){if(!this.styles)return!0;var h=0,i=u+1,r,n,o=!1,c=this._styleMap[u],s=this._styleMap[u+1];c&&(u=c.line,h=c.offset),s&&(i=s.line,o=i===u,r=s.offset),n=typeof u>"u"?this.styles:{line:this.styles[u]};for(var f in n)for(var m in n[f])if(m>=h&&(!o||m<r))for(var y in n[f][m])return!1;return!0},_getStyleDeclaration:function(u,h){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[u];if(!i)return null;u=i.line,h=i.offset+h}return this.callSuper("_getStyleDeclaration",u,h)},_setStyleDeclaration:function(u,h,i){var r=this._styleMap[u];u=r.line,h=r.offset+h,this.styles[u][h]=i},_deleteStyleDeclaration:function(u,h){var i=this._styleMap[u];u=i.line,h=i.offset+h,delete this.styles[u][h]},_getLineStyle:function(u){var h=this._styleMap[u];return!!this.styles[h.line]},_setLineStyle:function(u){var h=this._styleMap[u];this.styles[h.line]={}},_wrapText:function(u,h){var i=[],r;for(this.isWrapping=!0,r=0;r<u.length;r++)i=i.concat(this._wrapLine(u[r],r,h));return this.isWrapping=!1,i},_measureWord:function(u,h,i){var r=0,n,o=!0;i=i||0;for(var c=0,s=u.length;c<s;c++){var f=this._getGraphemeBox(u[c],h,c+i,n,o);r+=f.kernedWidth,n=u[c]}return r},_wrapLine:function(u,h,i,q){var n=0,o=this.splitByGrapheme,c=[],s=[],f=o?a.util.string.graphemeSplit(u):u.split(this._wordJoiners),m="",y=0,_=o?"":" ",S=0,O=0,D=0,A=!0,V=this._getWidthOfCharSpacing(),q=q||0;f.length===0&&f.push([]),i-=q;for(var oe=0;oe<f.length;oe++)m=o?f[oe]:a.util.string.graphemeSplit(f[oe]),S=this._measureWord(m,h,y),y+=m.length,n+=O+S-V,n>i&&!A?(c.push(s),s=[],n=S,A=!0):n+=V,!A&&!o&&s.push(_),s=s.concat(m),O=o?0:this._measureWord([_],h,y),y++,A=!1,S>D&&(D=S);return oe&&c.push(s),D+q>this.dynamicMinWidth&&(this.dynamicMinWidth=D-V+q),c},isEndOfWrapping:function(u){return!this._styleMap[u+1]||this._styleMap[u+1].line!==this._styleMap[u].line},missingNewlineOffset:function(u,h){return this.splitByGrapheme&&!h?this.isEndOfWrapping(u)?1:0:1},_splitTextIntoLines:function(u){for(var h=a.Text.prototype._splitTextIntoLines.call(this,u),i=this._wrapText(h.lines,this.width),r=new Array(i.length),n=0;n<i.length;n++)r[n]=i[n].join("");return h.lines=r,h.graphemeLines=i,h},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var u={};for(var h in this._styleMap)this._textLines[h]&&(u[this._styleMap[h].line]=1);for(var h in this.styles)u[h]||delete this.styles[h]},toObject:function(u){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(u))}}),a.Textbox.fromObject=function(u,h){var i=a.util.stylesFromArray(u.styles,u.text),r=Object.assign({},u,{styles:i});return delete r.path,a.Object._fromObject("Textbox",r,function(n){u.path?a.Object._fromObject("Path",u.path,function(o){n.set("path",o),h(n)},"path"):h(n)},"text")}}(w),function(){var g=p.controlsUtils,a=g.scaleSkewCursorStyleHandler,u=g.scaleCursorStyleHandler,h=g.scalingEqually,i=g.scalingYOrSkewingX,r=g.scalingXOrSkewingY,n=g.scaleOrSkewActionName,o=p.Object.prototype.controls;if(o.ml=new p.Control({x:-.5,y:0,cursorStyleHandler:a,actionHandler:r,getActionName:n}),o.mr=new p.Control({x:.5,y:0,cursorStyleHandler:a,actionHandler:r,getActionName:n}),o.mb=new p.Control({x:0,y:.5,cursorStyleHandler:a,actionHandler:i,getActionName:n}),o.mt=new p.Control({x:0,y:-.5,cursorStyleHandler:a,actionHandler:i,getActionName:n}),o.tl=new p.Control({x:-.5,y:-.5,cursorStyleHandler:u,actionHandler:h}),o.tr=new p.Control({x:.5,y:-.5,cursorStyleHandler:u,actionHandler:h}),o.bl=new p.Control({x:-.5,y:.5,cursorStyleHandler:u,actionHandler:h}),o.br=new p.Control({x:.5,y:.5,cursorStyleHandler:u,actionHandler:h}),o.mtr=new p.Control({x:0,y:-.5,actionHandler:g.rotationWithSnapping,cursorStyleHandler:g.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),p.Textbox){var c=p.Textbox.prototype.controls={};c.mtr=o.mtr,c.tr=o.tr,c.br=o.br,c.tl=o.tl,c.bl=o.bl,c.mt=o.mt,c.mb=o.mb,c.mr=new p.Control({x:.5,y:0,actionHandler:g.changeWidth,cursorStyleHandler:a,actionName:"resizing"}),c.ml=new p.Control({x:-.5,y:0,actionHandler:g.changeWidth,cursorStyleHandler:a,actionName:"resizing"})}}()}(ha)),ha}var Cc=pg();const mg="_home_1g5he_1",vg="_tools_1g5he_5",yg="_canvas_1g5he_35",_g={home:mg,tools:vg,"tools-item-config":"_tools-item-config_1g5he_18","tools-item":"_tools-item_1g5he_18","tools-item-text":"_tools-item-text_1g5he_30",canvas:yg};function Cg(){const w=ae.useRef(null),p=ae.useRef(null);return ae.useEffect(()=>(p.current=new Cc.fabric.Canvas(w.current),p.current.setWidth(window.innerWidth),p.current.setHeight(window.innerHeight),p.current,setTimeout(()=>{const P=new Cc.fabric.Rect({left:0,top:0,fill:"red",width:200,height:200});debugger;p.current.add(P)},2e3),()=>{var P;(P=p.current)==null||P.dispose(),p.current=null}),[]),Rn.jsx(Rn.Fragment,{children:Rn.jsx("canvas",{ref:w,id:"canvas",className:_g.canvas})})}Wf.createRoot(document.getElementById("root")).render(Rn.jsx(ig,{children:Rn.jsx(Fd,{children:Rn.jsx(Mc,{path:"*",element:Rn.jsx(Cg,{})})})}));
